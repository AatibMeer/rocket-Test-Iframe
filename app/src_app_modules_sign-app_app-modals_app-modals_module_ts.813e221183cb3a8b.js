"use strict";(self.webpackChunkrl_docman_app=self.webpackChunkrl_docman_app||[]).push([["src_app_modules_sign-app_app-modals_app-modals_module_ts"],{890:(Jd,Wt,u)=>{u.r(Wt),u.d(Wt,{AppModalsModule:()=>qd});var xt,v=u(6575),h=u(5939),g=u(8849),t=u(9039);function $t(i,r){i.onload=function(){this.onerror=this.onload=null,r(null,i)},i.onerror=function(){this.onerror=this.onload=null,r(new Error("Failed to load "+this.src),i)}}function Ke(i,r){i.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,r(null,i))}}function Et(i,r){return"CKEDITOR"in window?Promise.resolve(CKEDITOR):"string"!=typeof i||i.length<1?Promise.reject(new TypeError("CKEditor URL must be a non-empty string.")):(xt||(xt=Et.scriptLoader(i).then(function(e){return r&&r(e),e})),xt)}function je(i,r){}Et.scriptLoader=function(i){return new Promise(function(r,e){!function We(i,r,e){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");"function"==typeof r&&(e=r,r={}),e=e||function(){},o.type=(r=r||{}).type||"text/javascript",o.charset=r.charset||"utf8",o.async=!("async"in r)||!!r.async,o.src=i,r.attrs&&function $e(i,r){for(var e in r)i.setAttribute(e,r[e])}(o,r.attrs),r.text&&(o.text=String(r.text)),("onload"in o?$t:Ke)(o,e),o.onload||$t(o,e),n.appendChild(o)}(i,function(n){return xt=void 0,n?e(n):window.CKEDITOR?void r(CKEDITOR):e(new Error("Script loaded from editorUrl doesn't provide CKEDITOR namespace."))})})};let Xe=(()=>{class i{constructor(e,n){this.elementRef=e,this.ngZone=n,this.editorUrl="https://cdn.ckeditor.com/4.22.1/standard-all/ckeditor.js",this.tagName="textarea",this.type="classic",this.namespaceLoaded=new t.vpe,this.ready=new t.vpe,this.dataReady=new t.vpe,this.change=new t.vpe,this.dataChange=new t.vpe,this.dragStart=new t.vpe,this.dragEnd=new t.vpe,this.drop=new t.vpe,this.fileUploadResponse=new t.vpe,this.fileUploadRequest=new t.vpe,this.focus=new t.vpe,this.paste=new t.vpe,this.afterPaste=new t.vpe,this.blur=new t.vpe,this._readOnly=null,this._data=null,this._destroyed=!1}set data(e){if(e!==this._data){if(this.instance)return this.instance.setData(e),void(this._data=this.instance.getData());this._data=e}}get data(){return this._data}set readOnly(e){this.instance?this.instance.setReadOnly(e):this._readOnly=e}get readOnly(){return this.instance?this.instance.readOnly:this._readOnly}ngAfterViewInit(){Et(this.editorUrl,e=>{this.namespaceLoaded.emit(e)}).then(()=>{this._destroyed||this.ngZone.runOutsideAngular(this.createEditor.bind(this))}).catch(window.console.error)}ngOnDestroy(){this._destroyed=!0,this.ngZone.runOutsideAngular(()=>{this.instance&&(this.instance.destroy(),this.instance=null)})}writeValue(e){this.data=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}createEditor(){const e=document.createElement(this.tagName);this.elementRef.nativeElement.appendChild(e);const n=this.config?.on?.instanceReady,a={delayIfDetached:!0,...this.config};typeof a.on>"u"&&(a.on={}),a.on.instanceReady=s=>{const l=s.editor;this.instance=l,this.readOnly=null!==this._readOnly?this._readOnly:this.instance.readOnly,this.subscribe(this.instance);const d=l.undoManager;null!==this.data?(d&&d.lock(),l.setData(this.data,{callback:()=>{this.data!==l.getData()&&l.fire(d?"change":"dataReady"),d&&d.unlock(),this.ngZone.run(()=>{"function"==typeof n&&n(s),this.ready.emit(s)})}})):this.ngZone.run(()=>{"function"==typeof n&&n(s),this.ready.emit(s)})},"inline"===this.type?CKEDITOR.inline(e,a):CKEDITOR.replace(e,a)}subscribe(e){e.on("focus",n=>{this.ngZone.run(()=>{this.focus.emit(n)})}),e.on("paste",n=>{this.ngZone.run(()=>{this.paste.emit(n)})}),e.on("afterPaste",n=>{this.ngZone.run(()=>{this.afterPaste.emit(n)})}),e.on("dragend",n=>{this.ngZone.run(()=>{this.dragEnd.emit(n)})}),e.on("dragstart",n=>{this.ngZone.run(()=>{this.dragStart.emit(n)})}),e.on("drop",n=>{this.ngZone.run(()=>{this.drop.emit(n)})}),e.on("fileUploadRequest",n=>{this.ngZone.run(()=>{this.fileUploadRequest.emit(n)})}),e.on("fileUploadResponse",n=>{this.ngZone.run(()=>{this.fileUploadResponse.emit(n)})}),e.on("blur",n=>{this.ngZone.run(()=>{this.onTouched&&this.onTouched(),this.blur.emit(n)})}),e.on("dataReady",this.propagateChange,this),e.on(this.instance.undoManager?"change":"selectionCheck",this.propagateChange,this)}propagateChange(e){this.ngZone.run(()=>{const n=this.instance.getData();"change"===e.name?this.change.emit(e):"dataReady"===e.name&&this.dataReady.emit(e),n!==this.data&&(this._data=n,this.dataChange.emit(n),this.onChange&&this.onChange(n))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.R0b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ckeditor"]],inputs:{config:"config",editorUrl:"editorUrl",tagName:"tagName",type:"type",data:"data",readOnly:"readOnly"},outputs:{namespaceLoaded:"namespaceLoaded",ready:"ready",dataReady:"dataReady",change:"change",dataChange:"dataChange",dragStart:"dragStart",dragEnd:"dragEnd",drop:"drop",fileUploadResponse:"fileUploadResponse",fileUploadRequest:"fileUploadRequest",focus:"focus",paste:"paste",afterPaste:"afterPaste",blur:"blur"},features:[t._Bn([{provide:g.JU,useExisting:(0,t.Gpc)(()=>i),multi:!0}])],decls:1,vars:0,template:function(e,n){1&e&&t.YNc(0,je,0,0,"ng-template")},encapsulation:2}),i})(),tn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.u5,v.ez]]}),i})();var en=u(7542),nn=u(5366),Kt=u(405),on=u(6321),an=u(7507),rn=u(6626),sn=u(6925);const ln=["Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo"],cn=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],dn=["Alt","Alt-Graph","CapsLock","Control","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock"],mn=["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp"],jt=["0","1","2","3","4","5","6","7","8","9"],gn=[...jt,".","-"],pn=/^-?\d*\.?\d*$/,un=["`","!",'"',"\u20ac","\xa3","\u2039","$","\u203a","%","^","&","\u2021","*","\xb0","(","\xb7",")","-","_","\u2014","=","+","\xb1","[","{","\u201d","]","}","\u2019",";",":","'","@","#","~","\xbb",",","<","\xaf",".",">","\u02d8","/","?"],hn=["Enter","Tab"];class X{static#t=this.Alpha=({key:r})=>cn.indexOf(r)>-1;static#e=this.AlphaNumeric=(r,e)=>X.Alpha(r,e)||X.Numeric(r,e);static#n=this.NonCharKeysList=[...ln,...dn,...mn,...hn];static#o=this.NonCharKeys=({key:r})=>X.NonCharKeysList.indexOf(r)>-1;static#i=this.Number=({key:r},e)=>{if(-1===gn.indexOf(r))return!1;if(e instanceof HTMLInputElement){const n=`${e.value.slice(0,e.selectionStart)}${r}${e.value.slice(e.selectionEnd)}`;return pn.test(n)}return!0};static#a=this.Numeric=({key:r})=>jt.indexOf(r)>-1;static#r=this.SpecialChars=({key:r})=>un.indexOf(r)>-1;static#s=this.UTF8WordChar=({key:r})=>(X.utf8WordCharRegExp||(X.utf8WordCharRegExp=new RegExp("[A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")),X.utf8WordCharRegExp.test(r));constructor(r){this.elementRef=r,this.allowNonCharKeys=!0,this.keys=[],this.listType="whitelist"}ngOnChanges({keys:r}){r&&(this.keyFilters=r.currentValue?r.currentValue.map(e=>"function"==typeof e?e:n=>n.key===e):[])}onKeyDown(r){const{nativeElement:e}=this.elementRef;if("whitelist"===this.listType&&this.allowNonCharKeys&&X.NonCharKeys(r,e))return!0;const n=!!this.keyFilters.find(o=>o(r,e));return"whitelist"===this.listType?n:!n}static#l=this.\u0275fac=function(e){return new(e||X)(t.Y36(t.SBq))};static#c=this.\u0275dir=t.lG2({type:X,selectors:[["","rl-key-filter",""]],hostBindings:function(e,n){1&e&&t.NdJ("keydown",function(a){return n.onKeyDown(a)})},inputs:{allowNonCharKeys:"allowNonCharKeys",keys:[t.lbL.None,"rl-key-filter","keys"],listType:"listType"},features:[t.TTD]})}let Cn=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({})}return i})();var Mn=u(3071),fn=u(1839),yn=u(7441);let Pn=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({})}return i})();var xn=u(7886),Xt=u(2252),F=u(9163),w=u(9877),bn=u(3114),C=u(274),_=u(1191),P=u(130);const te={actionModal:{},addNameModal:{selectRoleModal:{nextModal:"paymentSelectRoleModal",delay:3e3},creatorModal:{nextModal:"paymentCreatorModal",delay:3e3},end:{nextModal:"actionModal",delay:3e3}},addSignerDataModal:{end:{nextModal:"actionModal",delay:3e3}},advancedEditorWarningModal:{back:"editModal",end:{}},askForRefundModal:{back:"paymentStatusModal",end:{nextModal:"actionModal",delay:3e3}},cancelSigningModal:{end:{nextModal:"actionModal",delay:3e3}},customTextWarningModal:{},declineSigningModal:{end:{nextModal:"actionModal",delay:3e3}},editDocTitleModal:{end:{nextModal:"actionModal",delay:3e3}},editInputModal:{next:"editSignerModal",end:{}},editModal:{next:"advancedEditorWarningModal"},editPartyModal:{paymentPayeeModal:"paymentPayeeModal",paymentPayerModal:"paymentPayerModal",end:{nextModal:"actionModal",delay:3e3}},editSignerModal:{editInputModal:"editInputModal",inviteCollaboratorsModal:"inviteCollaboratorsModal",end:{}},exportDocumentModal:{end:{nextModal:"actionModal",delay:3e3}},historyPanel:{end:{nextModal:"actionModal",delay:3e3}},howItWorksModal:{end:{}},inviteCollaboratorsModal:{complete:{nextModal:"actionModal",delay:3e3},editSignerModal:"editSignerModal",back:{},end:{nextModal:"actionModal",delay:3e3},next:"editSignerModal"},inviteViewersModal:{back:"manageViewersModal",manageViewersModal:"manageViewersModal"},manageModal:{cancelSigningModal:"cancelSigningModal",end:{nextModal:"actionModal",delay:3e3}},manageViewersModal:{end:{}},ownerFinaliseWarningModal:{back:{},end:{nextModal:"actionModal",delay:3e3}},paymentAchPlaidModal:{end:"paymentChoosePaymentMethod"},paymentDetailsModal:{askForSignatures:"addSignaturesSelectorModal",back:"paymentSelectRoleModal",end:{nextModal:"actionModal",delay:3e3}},paymentCreatorModal:{askForSignatures:"addSignaturesSelectorModal",end:{nextModal:"actionModal",delay:3e3}},paymentFailedModal:{end:{nextModal:"actionModal",delay:3e3}},paymentKYCVerifyModal:{next:"paymentKYCVerifyResultModal",end:{nextModal:"actionModal",delay:3e3}},paymentKYCVerifyResultModal:{back:"paymentKYCVerifyModal",end:{nextModal:"actionModal",delay:3e3}},paymentPayConfirmModal:{paymentFailed:"paymentFailedModal",choosePaymentMethod:"paymentChoosePaymentMethod",back:"paymentPayNowModal",end:{nextModal:"actionModal",delay:3e3}},paymentSelectRoleModal:{payeeRole:"paymentPayerModal",payerRole:"paymentPayeeModal",otherRole:"paymentPayerModal"},paymentPayeeModal:{back:"paymentSelectRoleModal",editParty:"editPartyModal",next:"paymentDetailsModal",end:{nextModal:"actionModal",delay:3e3}},paymentPayerModal:{back:"paymentSelectRoleModal",editParty:"editPartyModal",selectPayee:"paymentPayeeModal",paymentDetails:"paymentDetailsModal",end:{nextModal:"actionModal",delay:3e3}},paymentChoosePaymentMethod:{payNow:"paymentPayNowModal",addBankAccount:"paymentAchPlaidModal",next:"paymentPayConfirmModal",end:{nextModal:"actionModal",delay:3e3}},paymentPayNowModal:{choosePaymentMethod:"paymentChoosePaymentMethod",back:"paymentChoosePaymentMethod",next:"paymentPayConfirmModal",end:{nextModal:"actionModal",delay:3e3}},paymentPlaidModal:{end:{nextModal:"actionModal",delay:3e3}},paymentStatusModal:{askForRefund:"askForRefundModal",next:"removePaymentModal",end:{nextModal:"actionModal",delay:3e3}},payoutFailedModal:{end:{nextModal:"actionModal",delay:3e3}},removePaymentModal:{back:"paymentStatusModal",end:{nextModal:"actionModal",delay:3e3}},removeSignatureModal:{},repositioningDemoModal:{},signatureModal:{end:{}},initialsModal:{end:{}},addSignaturesSelectorModal:{actionModal:"actionModal",inviteModal:"inviteCollaboratorsModal",end:{nextModal:"actionModal",delay:3e3}}};var m=u(339);function ee(i){const r=(0,m.kT)(i),e=i.paymentAgreement;return!(!r||!e||!e.payments.reduce((n,o)=>n.concat(o.outs),[]).filter(n=>n.partyId===r.id).find(n=>n.paymentAccountId))}function ne(i){return!ee(i)&&("optional"===i.paymentAgreement?.status||"proposed"===i.paymentAgreement?.status)}var bt=u(3913),H=u(6803),f=function(i){return i.InviteCollaborators="invite-modal",i.InviteViewers="invite-viewers-modal",i.SignNowOwner="sign-now-owner",i.Cancel="cancel-modal",i.Decline="decline-modal",i.ChangeTitle="change-title",i.ShowHistory="history-modal",i.SignNow="sign-now",i.Manage="show-manage-modal",i.ManageViewers="manage-viewers-modal",i.GetSignature="get-signature",i.ShowFinaliseWarning="show-owner-finalise-warning-modal",i.PayChoosePaymentMethod="pay-choose-payment-method",i.ShowPaymentPayNow="show-payment-pay-now-modal",i.Edit="edit-modal",i.StartDocumentEdit="start-doc-edit",i.ExportDocument="show-export-document-modal",i.ShowPaymentCreatorModal="show-payment-creator-modal",i.ShowPaymentPayerModal="show-payment-payer-modal",i.ShowPaymentSelectRoleModal="show-payment-select-role-modal",i.ShowPaymentStatusModal="show-payment-status-modal",i.ShowKYCVerify="show-kyc-verify-modal",i.AddSignerDataModal="add-signer-data-modal",i.AddAnotherSigner="add-another-signer",i.ShowPlaid="paymentsPlaidModal",i.RemoveSignature="remove-signature-modal",i}(f||{}),c=u(4997),It=u(7017),R=u(9375),x=u(8336),lt=u(3609),kn=u(9935),ut=u(8920),Y=u(4980),oe=u(4683),B=u(9736),ct=u(3738),G=u(9882),ie=function(i){return i.CloseModal="CLOSE_MODAL",i}(ie||{}),I=u(7290);class Sn{constructor(r,e){this.actionsOrder=r,this.binderStatus=e}sort(r){return(this.actionsOrder&&this.binderStatus?new En(this.actionsOrder,this.binderStatus):new Zn).sort(r)}}class Zn{sort(r){return r}}class En{constructor(r,e){this.customOrder=r,this.binderStatus=e}sort(r){return this.sortByDefinedOrder(r,this.customOrder[this.binderStatus]||this.customOrder.DEFAULT)}sortByDefinedOrder(r,e){return r.sort((n,o)=>e.indexOf(n.id)-e.indexOf(o.id))}}function In(){return[{id:"SEND_TO_NOTARY",visible:this.isNotaryDocument,product:"notary",heading:"action-modal_send-to-notary",onClick:this.close,eventName:"sendToNotary",secondaryCTA:"VIEW_DOCUMENT",headers:[{visible:!0,title:"action-modal_notary-heading",description:"action-modal_notary-description",image:"images/icon-rocket-notary.svg"}]},{id:"ADD_SIGNER_DATA",visible:this.signerDataIsMissing,product:"sign",heading:"action-modal_lets-finish-this",onClick:this.showAddSignerDataModal,eventName:"addSignerData",layout:"primaryAndSecondaryButtons",headers:[{visible:!0,title:"action-modal_contextual-heading",description:"action-modal_contextual-description",useDefaultIcon:!0}]},{id:"VIEW_DOCUMENT",visible:this.signerDataIsMissing,product:"sign",heading:"action-modal_view-document",onClick:this.close,eventName:"viewDocument"},{id:"OWNER_SIGNS_FIRST_SIGN_NOW",visible:this.featureOwnerSignsFirstActivated&&!this.userHasSigned&&!this.signerDataIsMissing,product:"sign",heading:"action-modal_owner-signs-first-sign-now",iconClassName:"signature2",onClick:this.signNowOwnerOnly,eventName:"ownerSignsFirst",headers:[{visible:!0,title:"action-modal_owner-signs-first-header",useDefaultIcon:!0,description:"action-modal_owner-signs-first-description"}]},{id:"OWNER_SIGNS_FIRST_SIGN_LATER",visible:"IN_PREPARATION"===this.binder.status&&this.featureOwnerSignsFirstActivated&&!this.signerDataIsMissing&&!this.paymentAgreement,product:"sign",heading:"action-modal_owner-signs-first-sign-later",iconClassName:"signature2",onClick:this.showInviteModal,eventName:"ownerSignsFirst"},{id:"OWNER_SIGNS_FIRST_GET_IT_SIGNED",visible:"REVIEW_AND_SHARE"===this.binder.status&&this.featureOwnerSignsFirstActivated&&!this.signerDataIsMissing&&this.userIsOwner&&this.userHasSigned&&this.otherSignersHaveInputs,product:"sign",heading:"action-modal_invite-collaborators",iconClassName:"signature2",onClick:this.showInviteModal,eventName:"ownerSignsFirst",headers:[{useDefaultIcon:!0,visible:!0,title:"action-modal_owner-signs-first-send-for-signing-header",description:"action-modal_owner-signs-first-send-for-signing-description"}]},{id:"PAY_NOW",visible:this.userIsPayer&&("draft"===this.paymentAgreement?.status&&this.inputs.length>0&&this.noOtherSigners||"pending"===this.paymentAgreement?.status),product:"wallet",heading:"action-modal_pay-confirm",iconClassName:"pay",onClick:this.showPaymentPayNowModal,eventName:"payConfirmClicked",headerTitle:"action-modal_setup-payment-header",headers:[{title:()=>{if(this.paymentAgreement){const{amount:i,currency:r}=this.paymentAgreement.payments[0].ins[0].payment,e=this.currencyPipe.transform((i/100).toFixed(2),r,"symbol","1.2");return this.translateService.get("action-modal_setup-payment-title",{value:e})}return this.translateService.get("action-modal_setup-payment-title-no-agreement")},image:"images/rocketwallet-icon.svg",description:"action-modal_setup-payment-description",visible:!0}]},{id:"GET_VERIFIED",visible:("SIGN_IN_PROGRESS"===this.binder.status||"SIGN_COMPLETED"===this.binder.status)&&this.userIsPayee&&!!this.paymentAgreement&&!this.payeeAccountAttached,product:"wallet",heading:"action-modal_get-verified",iconClassName:"pay",onClick:this.getVerified,eventName:"getVerifiedClicked",headerTitle:"get-verified-modal-header",headers:[{visible:!0,image:"images/icon-wallet-verify.svg",title:"get-verified-modal-body_heading",description:null}]},{id:"RETRY_VERIFICATION",visible:("SIGN_IN_PROGRESS"===this.binder.status||"SIGN_COMPLETED"===this.binder.status)&&this.userIsPayee&&!!this.paymentAgreement&&this.payeeAccountVerificationFailed,product:"wallet",heading:"action-modal_retry-verification-primary",iconClassName:"pay",onClick:this.getVerified,eventName:"getVerifiedClicked",headers:[{visible:!0,image:"images/icon-wallet-verify.svg",title:"action-modal_retry-verification-header",description:"action-modal_retry-verification-description"}],secondaryCTA:"__KYC_CALL_US__"},{id:"__KYC_CALL_US__",visible:!1,heading:"action-modal_retry-verification-secondary",eventName:"kyc_call_assist",url:this.translateService.instant("action-modal-retry-verification-contact-number")},{id:"ADD_BANK_ACCOUNT",visible:!this.payoutEnabled&&this.userIsPayee&&this.payeeAccountAttached&&!!this.paymentAgreement&&"optional"!==this.paymentAgreement.status,product:"wallet",heading:"action-modal_add-bank-account",iconClassName:"pay",onClick:this.showPaymentPlaidModal,eventName:"addBankAccountClicked",headerTitle:"action-modal_add-bank-account-header",headers:[{image:"images/icon-wallet-verify.svg",title:"action-modal_add-bank-account-title",description:null,visible:!0}]},{id:"GET_SIGNATURE",visible:"IN_PREPARATION"===this.binder.status&&this.userIsOwner&&!this.signatureBuilderModeEnabled&&0===this.inputs.length&&this.binder.documents[0].signable&&!this.signerDataIsMissing,product:"sign",heading:"action-modal_get-signature",iconClassName:"signature2",onClick:this.getSignature.bind(this),eventName:"getSignatureClicked",headers:[{visible:!0,useDefaultIcon:!0,title:"action-modal_get-signature_header",description:"action-modal_get-signature_header_description"}]},{id:"PAY_ADD_A_PAYMENT",visible:this.userIsOwner&&"IN_PREPARATION"===this.binder.status&&(this.paymentsEnabled&&!this.paymentAgreement||"optional"===this.paymentAgreement?.status)&&(this.inputs.length>0||this.binder.documents.every(i=>!i.signable)),product:"wallet",heading:"action-modal_set-up-a-payment",iconClassName:"pay",onClick:this.showPaymentPayerModal,eventName:"addAPaymentClicked",headers:[{visible:!0,title:"action-modal_title-add-payment",description:"action-modal_description-add-payment"}]},{id:"EDIT_SIGNATURE",visible:"IN_PREPARATION"===this.binder.status&&this.userIsOwner&&!this.signatureBuilderModeEnabled&&this.inputs.length>0&&this.binder.documents[0].signable&&!this.signerDataIsMissing,product:"sign",heading:"action-modal_edit-signatures",iconClassName:"signature2",onClick:this.getSignature,eventName:"editSignatureClicked"},{id:"INVITE_MODAL_SIGN_ONLY",visible:("IN_PREPARATION"===this.binder.status||"REVIEW_AND_SHARE"===this.binder.status)&&this.userIsOwner&&this.inputs.length>0&&this.binder.documents[0].signable&&!this.signerDataIsMissing&&!this.noOtherSigners&&!this.paymentAgreement&&!this.featureOwnerSignsFirstActivated,product:"sign",heading:"action-modal_invite-collaborators_sign-only-cta",iconClassName:"addsigner",onClick:this.showInviteModal.bind(this),eventName:"inviteSignersModalShown",headers:[{useDefaultIcon:!0,title:"action-modal_invite-collaborators_sign-only-title",description:"action-modal_invite-collaborators_sign-only-description",visible:!0}]},{id:"INVITE_MODAL_PAY_ONLY",visible:("IN_PREPARATION"===this.binder.status||"REVIEW_AND_SHARE"===this.binder.status)&&this.userIsOwner&&this.binder.documents[0].signable&&!this.signerDataIsMissing&&this.noOtherSigners&&this.paymentAgreement&&!this.userIsPayer,product:"wallet",heading:"action-modal_invite-collaborators_pay-only-cta",iconClassName:"addsigner",onClick:this.showInviteModal,eventName:"inviteSignersModalShown",headers:[{title:"action-modal_invite-collaborators_pay-only-title",description:"action-modal_invite-collaborators_pay-only-description",visible:!0}]},{id:"INVITE_MODAL_SIGN_AND_PAY",visible:!(!(("IN_PREPARATION"===this.binder.status||"REVIEW_AND_SHARE"===this.binder.status)&&this.userIsOwner&&this.inputs.length>0&&this.binder.documents[0].signable)||this.signerDataIsMissing||this.noOtherSigners||!this.paymentAgreement||"optional"===this.paymentAgreement.status||"proposed"===this.paymentAgreement.status),product:"sign",heading:"action-modal_invite-collaborators_sign-and-pay-cta",iconClassName:"addsigner",onClick:this.showInviteModal,eventName:"inviteSignersModalShown",headers:[{title:"action-modal_invite-collaborators_sign-and-pay-title",description:"action-modal_invite-collaborators_sign-and-pay-description",visible:!0}]},{id:"SIGN_NOW_OWNER",visible:this.userIsOwner&&"IN_PREPARATION"===this.binder.status&&this.noOtherSigners&&!this.paymentAgreement&&this.inputs.length>0&&this.binder.documents[0].signable&&!this.signerDataIsMissing,product:"sign",heading:"action-modal_sign-now",iconClassName:"signature2",onClick:this.signNowOwnerOnly,eventName:"signNowOwnerOnly",headers:[{useDefaultIcon:!0,visible:this.userIsOwner,title:"action-modal_owner-sign-now-header",description:"action-modal_owner-sign-now-header_description"},{useDefaultIcon:!0,visible:this.userIsSigner,title:"action-modal_signer-sign-now-header",description:"action-modal_signer-sign-now-header_description"}]},{id:"SIGN_NOW_SIGNER",visible:"SIGN_IN_PROGRESS"===this.binder.status&&this.userHasEditableInputs&&this.userIsSigner&&this.binder.documents[0].signable,product:"sign",heading:"action-modal_sign-now",iconClassName:"signature2",onClick:this.signNow,eventName:"signNowSigner",headers:[{useDefaultIcon:!0,visible:this.userIsOwner,title:"action-modal_owner-sign-now-header",description:"action-modal_owner-sign-now-header_description"},{useDefaultIcon:!0,visible:this.userIsSigner,title:"action-modal_signer-sign-now-header",description:"action-modal_signer-sign-now-header_description"}]},{id:"REVIEW_PAYMENT",visible:!!this.paymentAgreement&&"optional"!==this.paymentAgreement.status,product:"wallet",heading:"action-modal_review-payment",iconClassName:"pay",onClick:this.showPaymentStatusModal,eventName:"paymentReviewClicked",headers:[{visible:!0,image:"images/rocketwallet-icon.svg",title:"action-modal_review-payment-title",description:"action-modal_review-payment-description"}]},{id:"MANAGE_SIGNERS_MODAL",visible:"SIGN_IN_PROGRESS"===this.binder.status&&this.userIsOwner&&this.binder.documents[0].signable,product:"sign",heading:"action-modal_manage-recipients",iconClassName:"profile",onClick:this.showManageModal,eventName:"manageSignersModalShown"},{id:"MANAGE_VIEWERS_MODAL",visible:this.userIsOwner&&!!(0,m.oJ)(this.binder,"VIEWER"),product:"sign",heading:"action-modal_manage-viewers",iconClassName:"profile",onClick:this.showManageViewersModal,eventName:"manageViewersModalShown"},{id:"SHARE_MODAL",visible:this.userIsOwner&&!(0,m.oJ)(this.binder,"VIEWER"),product:"sign",heading:"action-modal_share-document",iconClassName:"share",onClick:this.showInviteViewerModal,eventName:"shareModalShown"},{id:"CHANGE_DOCUMENT_TITLE_MODAL",visible:"IN_PREPARATION"===this.binder.status&&this.userIsOwner,product:"sign",heading:"action-modal_change-title",iconClassName:"icon-text",onClick:this.changeDocTitle,eventName:"changeDocTitleModalShown"},{id:"HISTORY_MODAL",visible:!0,product:"sign",heading:"action-modal_see-history",iconClassName:"clock2",onClick:this.seeHistory,eventName:"historyModalShown",headers:[{useDefaultIcon:!0,visible:this.userIsViewer,title:"action-modal_viewer-header",description:null}]},{id:"DOWNLOAD",visible:!0,product:"sign",heading:"action-modal_download",iconClassName:"cloud-download",onClick:this.exportDocument,eventName:"downloadClicked"},{id:"PRINT",visible:!this.isMsie,product:"sign",heading:"action-modal_print",iconClassName:"print",onClick:this.printDoc,eventName:"printClicked"},{id:"CANCEL_SIGNING_MODAL",visible:("REVIEW_AND_SHARE"===this.binder.status||"SIGN_IN_PROGRESS"===this.binder.status)&&this.userIsOwner&&this.binder.documents[0].signable,product:"sign",heading:"REVIEW_AND_SHARE"===this.binder.status?"action-modal_remove-signature":"action-modal_cancel-request",iconClassName:"cancel-blue",onClick:"REVIEW_AND_SHARE"===this.binder.status?this.showRemoveSignatureModal:this.showCancelModal,eventName:"cancelSigningModalShown",wrapperClass:"action-red"},{id:"DECLINE_SIGNING_MODAL",visible:"SIGN_IN_PROGRESS"===this.binder.status&&!(0,G.aB)(this.store.getState())&&this.userIsSigner&&!this.userIsOwner&&this.userHasEditableInputs&&this.binder.documents[0].signable,product:"sign",heading:"action-modal_decline-request",iconClassName:"cancel-blue",onClick:this.showDeclineModal,eventName:"declineSigningModalShown",wrapperClass:"action-red"},{id:"EDIT_MODAL",visible:"IN_PREPARATION"===this.binder.status&&this.userIsOwner&&this.docIsEditable&&window.location.href.includes("advancedEdit=enabled"),product:"sign",heading:"action-modal_edit-document",iconClassName:"settings",onClick:this.goToEdit.bind(this),eventName:"editModalShown"},{id:"ADD_ANOTHER_SIGNER",visible:"IN_PREPARATION"===this.binder.status&&this.userIsOwner&&this.binder.documents[0].signable&&this.signerDataIsMissing,product:"sign",heading:"action-modal_add-another-signer",iconClassName:"signature2",onClick:this.addAnotherSigner,eventName:"addAnotherSignerClicked"},{id:"COPY_UPLOADED_DOCUMENT_START_SIGNING",visible:!1,product:"sign",onClick:this.startSigningUploadedDocument.bind(this),eventName:"copyUploadedDocumentStartSigning"},{id:"COPY_INTERVIEW_DOCUMENT_START_SIGNING",visible:!1,product:"sign",onClick:this.startSigningInterviewedDocument.bind(this),eventName:"copyInterviewDocumentStartSigning"}]}var V=u(2800),Dn=u(6411),ae=u(7764),tt=u(9257),O=u(6518);let A=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275dir=t.lG2({type:i,selectors:[["","rl-modal-header-widget",""]],inputs:{position:[t.lbL.None,"rl-modal-header-widget","position"]}})}return i})();class re{}function se(i){return class extends i{constructor(){super(...arguments),this.stopWidgetChangesSubscription=new w.x}get showWidgets(){return!!this.leftWidget||!!this.rightWidget}setupWidgets(){const e=()=>{this.widgets?.forEach(n=>{"left"===n.position?this.leftWidget=n:"right"===n.position&&(this.rightWidget=n)})};this.stopWidgetChangesSubscription.next(),this.widgets?.changes.pipe((0,C.R)(this.stopWidgetChangesSubscription)).subscribe({next:e}),e()}}}const Nn=[[["","rl-modal-header-widget","left"]],"*",[["","rl-modal-header-widget","right"]]],Rn=["[rl-modal-header-widget=left]","*","[rl-modal-header-widget=right]"],Un=se(re);let _t=(()=>{class i extends Un{constructor(e){super(),this.modalControlService=e,this.bem=(0,I.aP)("rl-modal-header")}ngAfterContentInit(){this.setupWidgets()}leftWidgetClick(){this.leftWidget&&this.modalControlService.leftHeaderWidgetClick()}rightWidgetClick(){this.rightWidget&&this.modalControlService.rightHeaderWidgetClick()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-modal-header"]],contentQueries:function(n,o,a){if(1&n&&t.Suo(a,A,4),2&n){let s;t.iGM(s=t.CRH())&&(o.widgets=s)}},features:[t.qOj],ngContentSelectors:Rn,decls:6,vars:8,consts:[["rl-typography","heading","rl-test","modal-header"],["rl-test","modal-header-left-widget",3,"hidden","click"],["rl-test","modal-header-right-widget",3,"hidden","click"]],template:function(n,o){1&n&&(t.F$t(Nn),t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return o.leftWidgetClick()}),t.Hsn(2),t.qZA(),t.Hsn(3,1),t.TgZ(4,"div",2),t.NdJ("click",function(){return o.rightWidgetClick()}),t.Hsn(5,2),t.qZA()()),2&n&&(t.Tol(o.bem()),t.xp6(),t.Tol(o.bem("left-widget")),t.Q6J("hidden",!o.showWidgets),t.xp6(3),t.Tol(o.bem("right-widget")),t.Q6J("hidden",!o.showWidgets))},dependencies:[O.$m],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.header-image[_ngcontent-%COMP%]{max-height:100%;max-width:100%;width:auto;height:auto;position:absolute;inset:0;margin:auto}.sign-icon[_ngcontent-%COMP%]{min-height:40px;margin:0 auto;width:40px;display:block}.default-icon[_ngcontent-%COMP%]{font-size:39px;width:40px;height:40px}[_nghost-%COMP%]{background-color:#f7f7f8;border-top-left-radius:9px;border-top-right-radius:9px;display:block;margin:0 -16px;min-height:56px;padding:0 16px;position:relative}@media (min-width: 480px){[_nghost-%COMP%]{margin:0 -24px;min-height:56px;padding:0 16px}}@media (min-width: 768px){[_nghost-%COMP%]{margin:0 -80px;min-height:56px;padding:0 16px}}.rl-modal-header[_ngcontent-%COMP%]{align-items:center;display:flex;flex-flow:row nowrap;justify-content:space-between;min-height:56px;text-align:center;width:100%}.rl-modal-header[_ngcontent-%COMP%] >*{flex:1 0 0}.rl-modal-header[_ngcontent-%COMP%]  .rl-modal-header__left-widget, .rl-modal-header[_ngcontent-%COMP%]  .rl-modal-header__right-widget{flex:0 0 auto;min-width:30px}"]})}return i})();var Ot=u(5439);function le(i){return i?`rl-modal-body-part__${i}`:""}let q=(()=>{class i{constructor(e,n,o){this.classHelper=o||new Ot.s(e,n)}ngOnChanges({externalClassnames:e,part:n}){n&&this.classHelper.setClassnames(le(n.currentValue),le(n.previousValue)),e&&this.classHelper.setClassnames(e.currentValue,e.previousValue)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(Ot.s,8))};static#e=this.\u0275dir=t.lG2({type:i,selectors:[["","rl-modal-body-part",""]],inputs:{externalClassnames:[t.lbL.None,"class","externalClassnames"],part:[t.lbL.None,"rl-modal-body-part","part"]},features:[t.TTD]})}return i})();var K=u(9016),qn=u(7047),ce=u(384),Jn=u(6290),de=u(6190);function Dt(...i){const r=(0,de.yG)(i),e=(0,de._6)(i,1/0),n=i;return n.length?1===n.length?(0,ce.Xf)(n[0]):(0,qn.J)(e)((0,oe.D)(n,r)):Jn.E}var dt=u(1527);let k=(()=>{class i{get tabIndex(){return this._tabIndex}set tabIndex(e){this._tabIndex=e||0}get title(){return this._title}set title(e){this.titleSubject.next(e||"")}constructor(e,n,o){this.elementRef=e,this.modalControlService=n,this.translateService=o,this.destroy=new w.x,this._tabIndex=0,this._title="",this.titleSubject=new w.x}ngOnDestroy(){this.destroy.next()}ngOnInit(){this.titleSubject.pipe((0,C.R)(this.destroy)).subscribe(e=>this._title=e),(0,K.R)(this.elementRef.nativeElement,"click").pipe((0,C.R)(this.destroy)).subscribe(()=>{this.modalControlService.close(c.G.UserTerminated)}),this.translateService.get("modal-widget-modal-header-close_title").pipe((0,C.R)(Dt(this.destroy,this.titleSubject)),(0,dt.q)(1)).subscribe(e=>this.title=e)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.SBq),t.Y36(c.e),t.Y36(h.sK))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-modal-header-close"]],hostVars:2,hostBindings:function(n,o){2&n&&t.Ikx("tabindex",o._tabIndex)("title",o._title)},inputs:{tabIndex:"tabIndex",title:"title"},decls:0,vars:0,template:function(n,o){},styles:["[_nghost-%COMP%]{background-image:url(/images/modal/close.svg);background-position:center center;background-repeat:no-repeat;background-size:contain;cursor:pointer;display:block;height:30px;width:30px}[_nghost-%COMP%]:hover, [_nghost-%COMP%]:focus{background-image:url(/images/modal/close-hover.svg)}"]})}return i})();var J=u(4713);function zn(i,r){1&i&&(t.TgZ(0,"div",1)(1,"span"),t._UZ(2,"com",2),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("key","modal-footer_powered-by-rocketlawyer"))}let U=(()=>{class i{constructor(e){this.store=e,this.subs=[],this.brandingLevel=3,this.setupComponent(this.store.getState());let n=this.store.subscribe(o=>{this.setupComponent(o)});this.subs.push(n)}setupComponent(e){this.brandingLevel=e.globalBrandConfig?.brandingLevel||3}ngOnDestroy(){this.subs.forEach(e=>e())}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-modal-footer"]],decls:1,vars:1,consts:[["class","footer-container"],[1,"footer-container"],[3,"key"]],template:function(n,o){1&n&&t.YNc(0,zn,3,1,"div",0),2&n&&t.um2(0,2==o.brandingLevel?0:-1)},dependencies:[J.w],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.footer-container[_ngcontent-%COMP%]{margin:32px auto -16px;display:block;text-align:center;font-size:12px;font-weight:400;font-family:Open Sans;line-height:16px;color:#9da0ac}"]})}return i})();const Hn=["rlGrid",""],Bn=["*"];let Ln=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["","rlGrid",""]],attrs:Hn,ngContentSelectors:Bn,decls:1,vars:0,template:function(n,o){1&n&&(t.F$t(),t.Hsn(0))},styles:["[rlGrid]{display:grid;grid-template-rows:auto;justify-items:stretch;grid-template-columns:repeat(3,1fr 8px) 1fr}[rlGrid][hidden]{display:none}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){[rlGrid]{grid-column-gap:8px;column-gap:8px;grid-row-gap:16px;row-gap:16px;grid-template-columns:repeat(4,1fr)}}\n"],encapsulation:2})}return i})();const Gn=["*"];let T=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-modal-body"]],ngContentSelectors:Gn,decls:2,vars:0,consts:[["rlGrid","","rl-typography","",1,"rl-modal-body"]],template:function(n,o){1&n&&(t.F$t(),t.TgZ(0,"div",0),t.Hsn(1),t.qZA())},dependencies:[Ln],styles:[".header-image{max-height:100%;max-width:100%;width:auto;height:auto;position:absolute;inset:0;margin:auto}.sign-icon{min-height:40px;margin:0 auto;width:40px;display:block}.default-icon{font-size:39px;width:40px;height:40px}.bold-600{font-weight:600}.bold-700{font-weight:700}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.centered{margin:0 auto}.pull-left{float:left}.pull-right{float:right}ul.list-unstyled{list-style:none}.noselect{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.rl-modal-body>*{grid-column:1/span max(1,2 * 4 - 1)}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.rl-modal-body>*{grid-column:1/span 4}}.rl-modal-body-part__actionsContainer,.rl-modal-body-part__container,.rl-modal-body-part__interestPanel{display:grid;grid-template-rows:auto;justify-items:stretch;grid-template-columns:repeat(3,1fr 8px) 1fr}.rl-modal-body-part__actionsContainer[hidden],.rl-modal-body-part__container[hidden],.rl-modal-body-part__interestPanel[hidden]{display:none}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.rl-modal-body-part__actionsContainer,.rl-modal-body-part__container,.rl-modal-body-part__interestPanel{grid-column-gap:8px;column-gap:8px;grid-row-gap:16px;row-gap:16px;grid-template-columns:repeat(4,1fr)}}.rl-modal-body-part__actionsContainer>*,.rl-modal-body-part__container>*,.rl-modal-body-part__interestPanel>*{grid-column:1/span max(1,2 * 4 - 1)}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.rl-modal-body-part__actionsContainer>*,.rl-modal-body-part__container>*,.rl-modal-body-part__interestPanel>*{grid-column:1/span 4}}.rl-modal-body-part__heroText{margin-top:32px;margin-bottom:32px;text-align:center}.rl-modal-body-part__heroText:first-child{margin-top:16px}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.rl-modal-body-part__heroText{margin-top:16px}}.rl-modal-body-part__heroText:last-child{margin-bottom:16px}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.rl-modal-body-part__heroText{margin-bottom:16px}}.rl-modal-body>.rl-modal-body-part__heroText:first-child{margin-top:48px;margin-bottom:32px}.rl-modal-body>.rl-modal-body-part__heroText:first-child:first-child{margin-top:32px}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.rl-modal-body>.rl-modal-body-part__heroText:first-child{margin-top:32px}}.rl-modal-body>.rl-modal-body-part__heroText:first-child:last-child{margin-bottom:16px}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.rl-modal-body>.rl-modal-body-part__heroText:first-child{margin-bottom:16px}}.rl-modal-body-part__regularContent{margin-bottom:0;margin-top:0}.rl-modal-body-part__interestPanel{background-color:#f7f7f7;margin-left:-16px;margin-right:-16px;margin-top:0;padding-left:16px;padding-right:16px}@media (min-width: 480px){.rl-modal-body-part__interestPanel{margin-left:-24px;margin-right:-24px;padding-left:24px;padding-right:24px}}@media (min-width: 768px){.rl-modal-body-part__interestPanel{margin-left:-80px;margin-right:-80px;padding-left:80px;padding-right:80px}}.rl-modal-body-part__tertiaryButton{border-color:#3e3f4c;color:#3e3f4c;font-weight:600}.rl-modal-body-part__tertiaryButton:hover,.rl-modal-body-part__tertiaryButton:focus{background-color:transparent;border-color:#666;color:#666}.rl-modal-body-part__actionsContainer{margin-top:32px}.rl-modal-body-part__actionsContainer:first-child{margin-top:16px}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.rl-modal-body-part__actionsContainer{margin-top:16px}}@media (min-width: 480px){.rl-modal-body-part__primaryAction{grid-column:3/span max(1,2 * 2 - 1)}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.rl-modal-body-part__primaryAction{grid-column:3/span 2}}}@media (min-width: 768px){.rl-modal-body-part__primaryAction{grid-column:3/span max(1,2 * 2 - 1)}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.rl-modal-body-part__primaryAction{grid-column:3/span 2}}}@media (min-width: 480px){.rl-modal-body-part__secondaryAction{grid-column:1/span max(1,2 * 2 - 1)}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.rl-modal-body-part__secondaryAction{grid-column:1/span 2}}}@media (min-width: 768px){.rl-modal-body-part__secondaryAction{grid-column:1/span max(1,2 * 2 - 1)}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.rl-modal-body-part__secondaryAction{grid-column:1/span 2}}}.rl-modal-body-part__actionsContainer>.rl-modal-body-part__primaryAction{grid-row:1/2}.rl-modal-body-part__actionsContainer>.rl-modal-body-part__secondaryAction{grid-row:2/2}@media (min-width: 480px){.rl-modal-body-part__actionsContainer>.rl-modal-body-part__secondaryAction{grid-row:1/2}}\n"],encapsulation:2})}return i})();var me=u(6480);const Vn=["everyone","visualOnly","assistiveOnly","none"];function ge(i){return Vn.indexOf(i)>-1}let vt=(()=>{class i{static#t=this.defaultGroup="visualOnly";static#e=this.styleID="rl-inclusively-hidden-at-stylesheet";static#n=this.everybodyClassName="rl-ih-hide-for-all";static#o=this.visualOnlyClassName="rl-ih-atOnly";constructor(e,n,o){this.elementRef=e,this.renderer=n,this.document=o,this.for=i.defaultGroup,this.destroy=new w.x,this.viewInitialised=!1;const a=new Array(8);for(let s=0;s<a.length;s+=1)a[s]=(16*Math.random()|0).toString(16);this.stylesheetID=`${i.styleID}-${a.join("")}`}ngAfterViewInit(){this.viewInitialised=!0,this.updateNewVisibility()}ngOnChanges({for:e}){e&&this.setForGroup(e.currentValue,e.previousValue)}ngOnDestroy(){this.destroy.next()}ngOnInit(){if(null===this.document.querySelector(`style#${this.stylesheetID}`)){const n=this.createStyleSheet();this.renderer.appendChild(this.document.head,n),this.destroy.pipe((0,dt.q)(1)).subscribe(()=>this.renderer.removeChild(this.document.head,n))}}createStyleSheet(){const e=this.renderer.createElement("style");return this.renderer.setProperty(e,"type","text/css"),this.renderer.setProperty(e,"id",this.stylesheetID),e.innerText=`.${i.visualOnlyClassName}:not(:focus):not(:active){clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.${i.everybodyClassName}{display:none};`,e}setForGroup(e,n){n&&(ge(n)?this.updateOldVisibility(n):this.updateOldVisibility(i.defaultGroup)),this.for=ge(e)?e:i.defaultGroup,this.updateNewVisibility()}updateNewVisibility(){if(this.viewInitialised){const e=this.elementRef.nativeElement;try{"everyone"===this.for?this.renderer.addClass(e,i.everybodyClassName):"assistiveOnly"===this.for?this.renderer.setAttribute(e,"aria-hidden","true"):"visualOnly"===this.for&&this.renderer.addClass(e,i.visualOnlyClassName)}catch(n){throw n instanceof TypeError&&e?.nodeType!==Node.ELEMENT_NODE&&console?.warn(`You tried to use rl-inclusively-hidden on something which did not produce an Element node. Actual type was "${e?.nodeType}"${e?.nodeType===Node.COMMENT_NODE?" (a comment node)":""}. Did you try to use it with an <ng-container> or something similar? The element must exist to add classes or attributes.`),n}}}updateOldVisibility(e){const n=this.elementRef.nativeElement;"everyone"===e?this.renderer.removeClass(n,i.everybodyClassName):"assistiveOnly"===e?this.renderer.setAttribute(n,"aria-hidden","false"):"visualOnly"===e&&this.renderer.removeClass(n,i.visualOnlyClassName)}static#i=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(v.K0))};static#a=this.\u0275dir=t.lG2({type:i,selectors:[["","rl-inclusively-hidden",""]],inputs:{for:[t.lbL.None,"rl-inclusively-hidden","for"]},features:[t.TTD]})}return i})();function Qn(i,r){1&i&&(t.TgZ(0,"div",0),t.Hsn(1,1),t.qZA())}function Yn(i,r){if(1&i&&t._UZ(0,"rl-logo",4),2&i){const e=t.oxw();t.Akn(e.logoURL),t.Q6J("product",e.product)}}function Wn(i,r){1&i&&(t.TgZ(0,"div",3),t.Hsn(1,2),t.qZA())}const $n=["*",[["","rl-modal-header-widget","left"]],[["","rl-modal-header-widget","right"]]],Kn=["*","[rl-modal-header-widget=left]","[rl-modal-header-widget=right]"],jn=se(re);let S=(()=>{class i extends jn{get canShowLogo(){return void 0!==this.logoURL}constructor(e,n){super(),this.sanitizer=e,this.store=n}ngOnChanges({product:e}){if(e){const{brandConfig:n,globalBrandConfig:o}=this.store.getState();if(o&&1!==o.brandingLevel)return void(this.logoURL=void 0);this.logoURL="sign"===e.currentValue&&n?.lookAndFeel.signLogoUrl?this.sanitizer.bypassSecurityTrustStyle(`--rl-logo--product--sign--image: ${this.sanitizer.sanitize(t.q3G.STYLE,`url("${n.lookAndFeel.signLogoUrl}")`)}`):"wallet"===e.currentValue&&n?.lookAndFeel.walletLogoUrl?this.sanitizer.bypassSecurityTrustStyle(`--rl-logo--product--wallet--image: ${this.sanitizer.sanitize(t.q3G.STYLE,`url("${n.lookAndFeel.walletLogoUrl}")`)}`):"notary"===e.currentValue?this.sanitizer.bypassSecurityTrustStyle(`--rl-logo--product--notary--image: ${this.sanitizer.sanitize(t.q3G.STYLE,'url("images/rocketnotarize-logo.svg")')}`):void 0}}ngAfterContentInit(){this.setupWidgets()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(me.H7),t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-modal-header-branded"]],contentQueries:function(n,o,a){if(1&n&&t.Suo(a,A,4),2&n){let s;t.iGM(s=t.CRH())&&(o.widgets=s)}},inputs:{product:"product"},features:[t.qOj,t.TTD],ngContentSelectors:Kn,decls:6,vars:4,consts:[["rl-modal-header-widget","left"],["rl-test","modal-header-logo",3,"product","style"],[3,"rl-inclusively-hidden"],["rl-modal-header-widget","right"],["rl-test","modal-header-logo",3,"product"]],template:function(n,o){1&n&&(t.F$t($n),t.TgZ(0,"rl-modal-header"),t.YNc(1,Qn,2,0,"div",0)(2,Yn,1,3,"rl-logo",1),t.TgZ(3,"div",2),t.Hsn(4),t.qZA(),t.YNc(5,Wn,2,0,"div",3),t.qZA()),2&n&&(t.xp6(),t.um2(1,o.showWidgets?1:-1),t.xp6(),t.um2(2,o.canShowLogo?2:-1),t.xp6(),t.Q6J("rl-inclusively-hidden",o.canShowLogo?"visualOnly":"none"),t.xp6(2),t.um2(5,o.showWidgets?5:-1))},dependencies:[vt,O.$m,_t,A],encapsulation:2})}return i})();var b=u(5781),mt=u(1911);function Xn(i,r){if(1&i&&t._UZ(0,"i",6),2&i){const e=t.oxw();t.Gre("rl-icon ",e.headerIcon," header__icon")}}function to(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.ctaClick.emit(o.primaryCta.menuItemId))}),t.ALo(1,"lowercase"),t._uU(2),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("rl-test",t.lcZ(1,2,e.primaryCta.menuItemId)),t.xp6(2),t.hij(" ",e.primaryCta.displayName," ")}}function eo(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.ctaClick.emit(o.secondaryCta.menuItemId))}),t.ALo(1,"lowercase"),t._uU(2),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("rl-test",t.lcZ(1,2,e.secondaryCta.menuItemId)),t.xp6(2),t.hij(" ",e.secondaryCta.displayName," ")}}function no(i,r){if(1&i&&(t.TgZ(0,"section",7),t.YNc(1,to,3,4,"button",8)(2,eo,3,4,"button",9),t.qZA()),2&i){const e=t.oxw();t.xp6(),t.um2(1,e.primaryCta?1:-1),t.xp6(),t.um2(2,e.secondaryCta?2:-1)}}const oo=[[["",8,"heading"]],[["",8,"description-primary"]],[["",8,"description-secondary"]]],io=[".heading",".description-primary",".description-secondary"];let ao=(()=>{class i{constructor(){this.ctaClick=new t.vpe}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-copy-document-actions-layout"]],inputs:{headerIcon:"headerIcon",primaryCta:"primaryCta",secondaryCta:"secondaryCta"},outputs:{ctaClick:"ctaClick"},ngContentSelectors:io,decls:9,vars:2,consts:[[1,"header"],["role","presentation",3,"class"],["rl-modal-body-part","regularContent","rl-test","action-modal-primary-title","rl-typography","bold"],["rl-modal-body-part","regularContent","rl-test","action-modal-primary-description"],["rl-modal-body-part","regularContent","rl-test","action-modal-primary-description","rl-typography","bold","translate",""],["class","main-actions"],["role","presentation"],[1,"main-actions"],["class","btn btn-primary","rl-modal-body-part","regularContent",3,"rl-test"],["class","btn btn-secondary",3,"rl-test"],["rl-modal-body-part","regularContent",1,"btn","btn-primary",3,"rl-test","click"],[1,"btn","btn-secondary",3,"rl-test","click"]],template:function(n,o){1&n&&(t.F$t(oo),t.TgZ(0,"section",0),t.YNc(1,Xn,1,3,"i",1),t.TgZ(2,"p",2),t.Hsn(3),t.qZA(),t.TgZ(4,"p",3),t.Hsn(5,1),t.qZA(),t.TgZ(6,"p",4),t.Hsn(7,2),t.qZA()(),t.YNc(8,no,3,2,"section",5)),2&n&&(t.xp6(),t.um2(1,o.headerIcon?1:-1),t.xp6(7),t.um2(8,o.primaryCta||o.secondaryCta?8:-1))},dependencies:[h.Pi,O.$m,q,b.tH,v.i8],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.header-image[_ngcontent-%COMP%]{max-height:100%;max-width:100%;width:auto;height:auto;position:absolute;inset:0;margin:auto}.sign-icon[_ngcontent-%COMP%]{min-height:40px;margin:0 auto;width:40px;display:block}.default-icon[_ngcontent-%COMP%]{font-size:39px;width:40px;height:40px}.header[_ngcontent-%COMP%]{display:grid;row-gap:16px;padding:32px 0 0}.header__icon[_ngcontent-%COMP%]{font-size:40px;color:#900}.main-actions[_ngcontent-%COMP%]{display:grid;row-gap:8px;padding:16px 0;grid-template-columns:repeat(4,1fr)}.main-actions[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{grid-column:1/span max(1,2 * 4 - 1)}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.main-actions[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{grid-column:1/span 4}}@media (min-width: 480px){.main-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{grid-column:2/span max(1,2 * 2 - 1)}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.main-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{grid-column:2/span 2}}}"]})}return i})();const ro=i=>({documentName:i});function so(i,r){if(1&i&&(t.TgZ(0,"rl-copy-document-actions-layout",0)(1,"div",2),t._uU(2," action-modal_contextual-heading_complete "),t.qZA(),t.TgZ(3,"div",3),t._uU(4,"action-modal_contextual-description_complete"),t.qZA(),t.TgZ(5,"div",4),t._uU(6,"action-modal_contextual-description_complete-secondary"),t.qZA()()),2&i){const e=t.oxw();t.xp6(),t.Q6J("translateParams",t.VKq(1,ro,e.binder.documents[0].name))}}function lo(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-copy-document-actions-layout",5),t.NdJ("ctaClick",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.invokeAction(o))}),t.TgZ(1,"div",6),t._uU(2),t.qZA(),t.TgZ(3,"div",7),t._uU(4),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("primaryCta",e.activatedCustomActionsModal.actions[0])("secondaryCta",e.activatedCustomActionsModal.actions[1]),t.xp6(2),t.Oqu(e.activatedCustomActionsModal.heading),t.xp6(2),t.Oqu(e.activatedCustomActionsModal.description)}}let co=(()=>{class i{constructor(e){this.searchParams=e,this.enabled=!0}ngOnInit(){this.customActionsModal&&(this.activatedCustomActionsModal=this.customActionsModal.find(e=>this.searchParams.notEmpty(e.queryParamToActivate)))}invokeAction(e){this.actions.find(o=>o.id===e).onClick(),this.enabled=!1}hasEnabledLayoutForCompletedDocuments(){return this.searchParams.notEmpty("copyDocument")&&"SIGN_COMPLETED"===this.binder.status&&this.ownerUser&&this.signerDataComplete&&this.binderHasInputs&&(!this.userIsPayee||this.payeeAccountAttached&&!this.payeeAccountVerificationFailed&&this.payoutEnabled)}hasEnabledLayoutForCopiedDocuments(){return this.enabled&&"IN_PREPARATION"===this.binder.status&&this.ownerUser&&!!this.activatedCustomActionsModal&&this.signerDataComplete&&this.binderHasInputs&&(!this.userIsPayee||this.payeeAccountAttached&&!this.payeeAccountVerificationFailed&&this.payoutEnabled)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(lt.l))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-copy-document-actions-container"]],inputs:{binder:"binder",signerDataComplete:"signerDataComplete",binderHasInputs:"binderHasInputs",ownerUser:"ownerUser",customActionsModal:"customActionsModal",actions:"actions",userIsPayee:"userIsPayee",payeeAccountAttached:"payeeAccountAttached",payeeAccountVerificationFailed:"payeeAccountVerificationFailed",payoutEnabled:"payoutEnabled"},decls:2,vars:2,consts:[["headerIcon","doc-view"],["headerIcon","edit-doc",3,"primaryCta","secondaryCta"],["translate","",1,"heading",3,"translateParams"],["translate","",1,"description-primary"],["translate","",1,"description-secondary"],["headerIcon","edit-doc",3,"primaryCta","secondaryCta","ctaClick"],[1,"heading"],[1,"description-primary"]],template:function(n,o){1&n&&t.YNc(0,so,7,3,"rl-copy-document-actions-layout",0)(1,lo,5,4,"rl-copy-document-actions-layout",1),2&n&&(t.um2(0,o.hasEnabledLayoutForCompletedDocuments()?0:-1),t.xp6(),t.um2(1,o.hasEnabledLayoutForCopiedDocuments()?1:-1))},dependencies:[h.Pi,ao],encapsulation:2})}return i})();const mo=["actionList"],go=["message"],po=["actionItems"];function uo(i,r){1&i&&(t.TgZ(0,"rl-modal-header")(1,"h1",9),t._uU(2,"action-modal_review-document"),t.qZA(),t._UZ(3,"rl-modal-header-close",10),t.qZA())}function _o(i,r){if(1&i&&(t.TgZ(0,"rl-modal-header-branded",11)(1,"h1",12),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"rl-modal-header-close",10),t.qZA()),2&i){const e=t.oxw();t.Q6J("product",null!=e.mainCta&&e.mainCta.headerTitle?void 0:null==e.mainCta?null:e.mainCta.product),t.xp6(2),t.hij(" ",t.lcZ(3,2,(null==e.mainCta?null:e.mainCta.headerTitle)||"action-modal_heading")," ")}}function ho(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"img",19),t.qZA()),2&i){const e=t.oxw(3);t.xp6(),t.Q6J("src",e.mainCtaHeader.image,t.LSH)}}function Co(i,r){1&i&&t._UZ(0,"img",22)}function Mo(i,r){1&i&&t._UZ(0,"span",23)}function fo(i,r){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Co,1,0,"img",20)(2,Mo,1,0,"span",21),t.qZA()),2&i){const e=t.oxw(3);t.xp6(),t.um2(1,1==e.brandingLevel?1:-1),t.xp6(),t.um2(2,1!=e.brandingLevel?2:-1)}}function yo(i,r){if(1&i&&(t.TgZ(0,"p",24),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(),t.Oqu(e.mainCtaHeader.title)}}function Po(i,r){if(1&i&&(t.TgZ(0,"p",17),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(),t.Oqu(e.mainCtaHeader.description)}}function xo(i,r){if(1&i&&(t.TgZ(0,"p",18),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(),t.Oqu(e.mainCtaHeader.secondDescription)}}function bo(i,r){if(1&i&&t.YNc(0,ho,2,1,"div")(1,fo,3,2,"div")(2,yo,2,1,"p",16)(3,Po,2,1,"p",17)(4,xo,2,1,"p",18),2&i){const e=t.oxw(2);t.um2(0,e.mainCtaHeader.image?0:-1),t.xp6(),t.um2(1,e.mainCtaHeader.useDefaultIcon?1:-1),t.xp6(),t.um2(2,e.mainCtaHeader.title?2:-1),t.xp6(),t.um2(3,e.mainCtaHeader.description?3:-1),t.xp6(),t.um2(4,e.mainCtaHeader.secondDescription?4:-1)}}function Oo(i,r){if(1&i&&t._UZ(0,"p",32,33),2&i){const e=t.oxw(3);t.ekj("expanded",e.textExpanded),t.Q6J("comContent",e.contextualMessage.key)("params",null==e.contextualMessage?null:e.contextualMessage.params)}}function vo(i,r){if(1&i&&(t.TgZ(0,"p",34,33),t._uU(2),t.qZA()),2&i){const e=t.oxw(3);t.ekj("expanded",e.textExpanded),t.xp6(2),t.Oqu(e.contextualMessage.key)}}function wo(i,r){1&i&&(t.TgZ(0,"span"),t._uU(1,"..."),t.qZA())}function Ao(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",35),t.YNc(1,wo,2,0,"span"),t.TgZ(2,"span",36),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.toggleText())}),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(),t.um2(1,e.textExpanded?-1:1),t.xp6(2),t.Oqu(e.textExpanded?t.lcZ(4,2,"action-modal_see-less"):t.lcZ(5,4,"action-modal_see-more"))}}function To(i,r){if(1&i&&(t.TgZ(0,"div",25)(1,"span",26),t._UZ(2,"com",27),t.qZA(),t.TgZ(3,"div",28),t.YNc(4,Oo,2,4,"p",29)(5,vo,3,3,"p",30)(6,Ao,6,6,"div",31),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("key","action-modal_doc-owner-message")("params",null==e.contextualMessage?null:e.contextualMessage.params),t.xp6(2),t.um2(4,e.contextualMessage.isCustom?-1:4),t.xp6(),t.um2(5,e.contextualMessage.isCustom?5:-1),t.xp6(),t.um2(6,e.canToggleText?6:-1)}}const ko=i=>({"no-margin-bottom":i});function So(i,r){if(1&i&&(t.TgZ(0,"div",13)(1,"div",14),t.YNc(2,bo,5,5)(3,To,7,5,"div",15),t.qZA()()),2&i){const e=t.oxw();t.Tol(e.bem("context")),t.Q6J("ngClass",t.VKq(5,ko,e.docOwnerSignedDocAndOtherSignersPending||e.signerSignedAndOtherSignersPending||e.signerOrOwnerSigningCompleted)),t.xp6(2),t.um2(2,e.mainCtaHeader?2:-1),t.xp6(),t.um2(3,null!=e.contextualMessage&&e.contextualMessage.key?3:-1)}}function Zo(i,r){1&i&&t.GkF(0)}function Eo(i,r){if(1&i&&(t.TgZ(0,"a",4),t.YNc(1,Zo,1,0,"ng-container",37),t.qZA()),2&i){const e=t.oxw(),n=t.MAs(10);t.Q6J("href",e.mainCta.url,t.LSH),t.uIk("target",e.mainCta.openInNewWindow?"_blank":null),t.xp6(),t.Q6J("ngTemplateOutlet",n)}}const pe=i=>({deviant:i});function Io(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.elemClicked(o,a.mainCta))}),t.ALo(1,"lowercase"),t._uU(2),t.ALo(3,"translate"),t.qZA()}if(2&i){const e=t.oxw(2);t.MT6("btn btn-primary ",null==e.mainCta?null:e.mainCta.wrapperClass," ",e.bem("cta",t.VKq(11,pe,!!e.secondaryCta)),""),t.Q6J("rl-test",t.lcZ(1,7,null==e.mainCta?null:e.mainCta.id))("rl-modal-body-part",e.signerDataIsMissing||e.docOwnerSignedDocAndOtherSignersPending||e.mainCtaHeader||"GET_VERIFIED"===(null==e.mainCta?null:e.mainCta.id)?"regularContent":"heroText"),t.xp6(2),t.hij(" ",null!=e.mainCta&&e.mainCta.heading?t.lcZ(3,9,null==e.mainCta?null:e.mainCta.heading):null==e.mainCta?null:e.mainCta.name," ")}}function Do(i,r){if(1&i&&t.YNc(0,Io,4,13,"button",38),2&i){t.oxw();const e=t.MAs(5);t.um2(0,e.hasEnabledLayoutForCopiedDocuments()?-1:0)}}function No(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.elemClicked(o,a.mainCta))}),t.ALo(1,"lowercase"),t._uU(2),t.ALo(3,"translate"),t.qZA()}if(2&i){const e=t.oxw(2);t.MT6("btn btn-primary ",null==e.mainCta?null:e.mainCta.wrapperClass," ",e.bem("cta",t.VKq(11,pe,!!e.secondaryCta)),""),t.Q6J("rl-test",t.lcZ(1,7,null==e.mainCta?null:e.mainCta.id))("rl-modal-body-part",e.signerDataIsMissing||e.docOwnerSignedDocAndOtherSignersPending||e.mainCtaHeader||"GET_VERIFIED"===(null==e.mainCta?null:e.mainCta.id)?"regularContent":"heroText"),t.xp6(2),t.hij(" ",null!=e.mainCta&&e.mainCta.heading?t.lcZ(3,9,null==e.mainCta?null:e.mainCta.heading):null==e.mainCta?null:e.mainCta.name," ")}}function Ro(i,r){if(1&i&&t.YNc(0,No,4,13,"button",38),2&i){t.oxw();const e=t.MAs(5);t.um2(0,e.hasEnabledLayoutForCopiedDocuments()?-1:0)}}function Fo(i,r){1&i&&t.GkF(0)}function Uo(i,r){if(1&i&&(t.TgZ(0,"a",4),t.YNc(1,Fo,1,0,"ng-container",37),t.qZA()),2&i){t.oxw();const e=t.MAs(3),n=t.oxw();t.Q6J("href",n.secondaryCta.url,t.LSH),t.uIk("target",n.secondaryCta.openInNewWindow?"_blank":null),t.xp6(),t.Q6J("ngTemplateOutlet",e)}}function qo(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.elemClicked(o,a.secondaryCta))}),t.ALo(1,"lowercase"),t._uU(2),t.ALo(3,"translate"),t.qZA()}if(2&i){const e=t.oxw(2);t.MT6("btn btn-secondary ",null==e.secondaryCta?null:e.secondaryCta.wrapperClass," ",e.bem("cta"),""),t.Q6J("rl-test",t.lcZ(1,6,null==e.secondaryCta?null:e.secondaryCta.id)),t.xp6(2),t.hij(" ",null!=e.secondaryCta&&e.secondaryCta.heading?t.lcZ(3,8,null==e.secondaryCta?null:e.secondaryCta.heading):null==e.secondaryCta?null:e.secondaryCta.name," ")}}function Jo(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.elemClicked(o,a.secondaryCta))}),t.ALo(1,"lowercase"),t._uU(2),t.ALo(3,"translate"),t.qZA()}if(2&i){const e=t.oxw(2);t.MT6("btn btn-secondary ",null==e.secondaryCta?null:e.secondaryCta.wrapperClass," ",e.bem("cta"),""),t.Q6J("rl-test",t.lcZ(1,6,null==e.secondaryCta?null:e.secondaryCta.id)),t.xp6(2),t.hij(" ",null!=e.secondaryCta&&e.secondaryCta.heading?t.lcZ(3,8,null==e.secondaryCta?null:e.secondaryCta.heading):null==e.secondaryCta?null:e.secondaryCta.name," ")}}function zo(i,r){if(1&i&&t.YNc(0,Uo,2,3,"a",4)(1,qo,4,10)(2,Jo,4,10,"ng-template",null,40,t.W1O),2&i){const e=t.oxw();t.um2(0,null!=e.secondaryCta&&e.secondaryCta.url?0:1)}}function Ho(i,r){1&i&&t.GkF(0)}function Bo(i,r){if(1&i&&(t.TgZ(0,"a",4),t.YNc(1,Ho,1,0,"ng-container",37),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.MAs(6),o=t.oxw();t.Tol(o.bem("listed-action-anchor")),t.Q6J("href",e.url,t.LSH),t.uIk("target",e.openInNewWindow?"_blank":null),t.xp6(),t.Q6J("ngTemplateOutlet",n)}}function Lo(i,r){if(1&i&&(t._UZ(0,"i",45),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw();t.MT6("rl-icon ",e.iconClassName," ",n.bem("listed-action-icon"),""),t.xp6(),t.Tol(n.bem("listed-action-text")),t.xp6(),t.Oqu(null!=e&&e.heading?t.lcZ(3,7,null==e?null:e.heading):null==e?null:e.name)}}function Go(i,r){if(1&i&&(t._UZ(0,"i",45),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw();t.MT6("rl-icon ",e.iconClassName," ",n.bem("listed-action-icon"),""),t.xp6(),t.Tol(n.bem("listed-action-text")),t.xp6(),t.Oqu(null!=e&&e.heading?t.lcZ(3,7,null==e?null:e.heading):null==e?null:e.name)}}const Vo=(i,r)=>({hidden:i,solo:r});function Qo(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"li",41,42),t.NdJ("click",function(o){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.elemClicked(o,s))}),t.ALo(2,"lowercase"),t.YNc(3,Bo,2,5,"a",43)(4,Lo,4,9)(5,Go,4,9,"ng-template",null,44,t.W1O),t.qZA()}if(2&i){const e=r.$implicit,n=r.$index,o=t.oxw();t.MT6("",o.bem("listed-action",t.WLB(8,Vo,!o.showOtherActions&&n>0,!o.showOtherActions&&0===n))," ",null==e?null:e.wrapperClass,""),t.Q6J("rl-test",t.lcZ(2,6,e.id)),t.xp6(3),t.um2(3,e.url?3:4)}}function Yo(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleOtherActions())}),t._UZ(1,"i",45),t._uU(2),t.ALo(3,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Tol(e.bem("toggle-options")),t.Q6J("bold",!0),t.uIk("data-expanded",e.showOtherActions?"expanded":"collapsed"),t.xp6(),t.MT6("rl-icon ",e.showOtherActions?"arrow":"arrow-down"," ",e.bem("toggle-icon"),""),t.xp6(),t.hij(" ",t.lcZ(3,9,e.showOtherActions?"action-modal_less-options":"action-modal_other-options")," ")}}let $o=(()=>{class i{constructor(e,n,o,a,s,l,d,p,M,y,D,Z,E,Q){this.store=e,this.signService=n,this.alertService=o,this.messageService=a,this.nibblerBusinessEventsService=s,this.featureFlagService=l,this.userAgentService=d,this.modalControlService=p,this.renderer=M,this.translateService=y,this.currencyPipe=D,this.eventTracker=Z,this.searchParams=E,this.document=Q,this.showOtherActions=!1,this.brandingLevel=3,this.isMsie=!!window.MSInputMethodContext&&!!this.document.documentMode,this.docIsEditable=!1,this.docOwnerSignedDocAndOtherSignersPending=!1,this.signerSignedAndOtherSignersPending=!1,this.binderHasInputs=!1,this.actionListDimensionsNeedCalculating=!0,this.canToggleText=!1,this.textExpanded=!1,this.bem=(0,I.aP)("rl-action-modal"),this.brandConfig=this.store.getState().brandConfig,this.destroy=new w.x,this.paymentsEnabled=this.featureFlagService.flags.payments_enabled,this.featureCopyDocumentActivated=E.notEmpty("copyDocument"),this.featureGoToDashboardActivated=E.notEmpty("goToDashboard"),this.store.getState$().pipe((0,C.R)(this.destroy)).subscribe(at=>this.setupComponent(at))}getActions(){return In.apply(this)}setupComponent(e){this.binder=e.binder,this.brandingLevel=e.globalBrandConfig?.brandingLevel||3,this.paymentAgreement=e.paymentAgreement,this.inputs=(0,m.sG)(e),this.currentUser=(0,m.kT)(e),this.userIsOwner=(0,m.jn)(this.currentUser,"OWNER"),this.userIsSigner=(0,m.Kt)(this.currentUser.reference,e),this.userIsViewer=(0,m.jn)(this.currentUser,"VIEWER"),this.userIsPayer=(0,m.jn)(this.currentUser,"PAYER"),this.userIsNotary=(0,m.jn)(this.currentUser,"NOTARY"),this.ownerReference=this.binder.parties.find(n=>n.roles.includes("OWNER")).reference,this.noOtherSigners=(0,G.AY)(e),this.otherSignersHaveInputs=(0,m.L2)(e,this.ownerReference),this.userHasEditableInputs=(0,G.ys)(e),this.signatureBuilderModeEnabled=e.signatureBuilderModeEnabled,this.docIsEditable=(e.advancedEditorOptionEnabled||e.backToInterviewOptionEnabled)&&"text/html"===this.binder.documents[0].contentType,this.signerDataIsMissing=this.userIsOwner&&(0,m.wm)(e),this.isNotaryDocument=this.isSendToNotaryVisible(e),this.docOwnerSignedDocAndOtherSignersPending=(0,G.jV)(e),this.userIsPayee=(0,m.jn)(this.currentUser,"PAYEE"),this.payeeAccountAttached=function vn(i){const r=(0,m.kT)(i);if(!r||!(0,m.jn)(r,"PAYEE"))return!1;const e=i.paymentAccount;return!!e&&!!e.stripeTosAcceptance}(e),this.payeeAccountVerificationFailed=function wn(i){const r=(0,m.kT)(i);return!(!r||!(0,m.jn)(r,"PAYEE"))&&"unverified"===i.paymentAccount?.individual?.verification?.status}(e),this.userHasSigned=(0,G.Zm)(e),this.signerSignedAndOtherSignersPending=(0,G.bY)(e)&&this.userIsSigner,this.featureOwnerSignsFirstActivated=(0,G.GU)(e),this.isOwnerSigningSecond=(0,G.TI)(e),this.signerOrOwnerSigningCompleted=(0,G.nB)(e),this.binderHasInputs=(0,G._N)(e),this.payoutEnabled=function An(i){return i.paymentAccount?.payoutsEnabled??!1}(e),this.setContextualMessage(),this.setupActions(),this.configureTopSection()}isSendToNotaryVisible(e){return this.userIsOwner&&"SIGN_COMPLETED"!==this.binder.status&&(0,m.OH)(e)}setContextualMessage(){if(this.userIsOwner||!(this.userIsSigner&&this.userHasEditableInputs||this.userIsViewer))return;const n=this.getCustomInviteMessage(),o=this.getDefaultInviteMessage(),a=this.binder.parties.find(s=>s.reference===this.ownerReference).legalName;this.contextualMessage={isCustom:!!n,key:n||o,params:{name:this.currentUser.legalName,docOwnerName:a}},this.message&&this.message.nativeElement&&0!==this.message.nativeElement.clientHeight?this.canToggleText=this.contextualMessage.key.split("\n").length>i.getNumberOfLinesToShow():setTimeout(()=>this.setContextualMessage(),50)}getCustomInviteMessage(){const e=this.store.getState().historyInfo,{requests:n}=this.store.getState().binder;return this.userIsViewer?n.filter(s=>"VIEWER_CREATION"===s.type).filter(s=>s.recipients.find(l=>l.partyId===this.currentUser.id)).shift()?.message:e.filter(o=>"INVITATION_TO_SIGN_SENT"===o.type).shift()?.details?.message}getDefaultInviteMessage(){return this.userIsViewer?"action-modal_viewer-contextual-message":"action-modal_signer-contextual-message-sign-now"}onResize(){this.canToggleText=this.contextualMessage?.key.split("\n").length>i.getNumberOfLinesToShow()}static getNumberOfLinesToShow(){return window.innerWidth>480?6:4}setupActions(){const o=[...this.getActions(),...this.getCustomActions()];this.allActions=this.addOrderToActions(o),this.brandConfig&&this.brandConfig.featureTogglesForDefaultMenuItems&&(this.allActions=this.addCustomFeatureTogglesToDefaultActions(this.allActions)),this.actions=this.allActions.filter(a=>a.visible)}configureTopSection(){this.setupCtas(),this.mainCta.headers=this.mainCta.headers||[];const e="GO_TO_DASHBOARD"===this.mainCta.id;this.userIsOwner&&"SIGN_COMPLETED"===this.binder.status&&"VIEW_LOGOIPSUM_DOCUMENT"===this.mainCta.id?this.mainCta.headers.push({visible:!0,useDefaultIcon:!0,title:()=>this.translateService.get("action-modal_owner-signed-signing-complete-logoipsum-header",{docName:this.binder.documents[0].name}),description:"action-modal_owner-signed-signing-complete-logoipsum-description"}):this.docOwnerSignedDocAndOtherSignersPending&&"VIEW_LOGOIPSUM_DOCUMENT"===this.mainCta.id?this.mainCta.headers.push({visible:!0,useDefaultIcon:!0,title:"action-modal_owner-signed-signing-in-progress-logoipsum-header",description:"action-modal_owner-signed-signing-in-progress-logoipsum-description"}):this.userIsSigner&&"SIGN_COMPLETED"===this.binder.status&&"VIEW_LOGOIPSUM_DOCUMENT"===this.mainCta.id?this.mainCta.headers.push({visible:!0,useDefaultIcon:!0,title:"action-modal_signer-signed-signing-complete-logoipsum-header",description:"action-modal_signer-signed-signing-complete-logoipsum-description"}):this.signerSignedAndOtherSignersPending&&"VIEW_LOGOIPSUM_DOCUMENT"===this.mainCta.id?this.mainCta.headers.push({visible:!0,useDefaultIcon:!0,title:"action-modal_signer-signed-signing-in-progress-logoipsum-header",description:"action-modal_signer-signed-signing-in-progress-logoipsum-description"}):this.docOwnerSignedDocAndOtherSignersPending&&e?this.mainCta.headers.push({visible:!0,image:this.brandConfig?.lookAndFeel?.customIcons?.goToDashboard,title:"action-modal_sign-in-progress-first-header",description:"action-modal_sign-in-progress-first-description",secondDescription:"action-modal_sign-in-progress-second-description"}):this.signerSignedAndOtherSignersPending?this.mainCta.headers.push({visible:!0,useDefaultIcon:!0,title:"action-modal_sign-in-progress-first-header_signer",description:"action-modal_sign-in-progress-first-description_signer"}):this.signerOrOwnerSigningCompleted&&e?this.mainCta.headers.push({visible:!0,image:this.brandConfig?.lookAndFeel?.customIcons?.goToDashboard,title:"action-modal_owner-signer-signing-complete-header",description:"action-modal_owner-signer-signing-complete-description",secondDescription:"action-modal_owner-signer-signing-complete-footer"}):this.userIsViewer&&"VIEW_LOGOIPSUM_DOCUMENT"===this.mainCta.id&&this.mainCta.headers.push({visible:!0,title:"action-modal_viewer-header",useDefaultIcon:!0,description:null}),this.setupActionHeaders(),this.actionListDimensionsNeedCalculating=!0}setupCtas(){let e=this.actions[0],n=this.actions[1];if(!this.docOwnerSignedDocAndOtherSignersPending||this.paymentAgreement&&"collected"!==this.paymentAgreement.status||!this.featureGoToDashboardActivated)if((this.featureOwnerSignsFirstActivated||this.isCopyDocumentSecondaryCtaEnabled(this.actions)||this.isOwnerSigningSecond||this.signerSignedAndOtherSignersPending||this.signerOrOwnerSigningCompleted||!e.onClick||n.isSecondaryCTA)&&i.hasLayoutWithSecondaryCta(this.actions[0])){const[o,a]=this.actions;this.mainCta=o,this.secondaryCta=a}else{const[o]=this.actions;this.mainCta=o,this.secondaryCta=void 0}else this.mainCta=this.allActions.find(o=>"GO_TO_DASHBOARD"===o.id),this.secondaryCta=this.allActions.find(o=>"ASK_A_LAWYER"===o.id);this.mainCta&&"string"==typeof this.mainCta.secondaryCTA&&(this.secondaryCta=this.allActions.find(o=>o.id===this.mainCta.secondaryCTA)),this.removeCtasFromActionList()}static hasLayoutWithSecondaryCta(e){return"primaryButton"!==e.layout}removeCtasFromActionList(){this.actions=this.actions.filter(e=>e.id!==this.mainCta.id),this.secondaryCta&&(this.actions=this.actions.filter(e=>e.id!==this.secondaryCta.id))}isCopyDocumentSecondaryCtaEnabled(e){return this.featureCopyDocumentActivated&&i.isCandidateToSecondaryCta("COPY_DOCUMENT",e)}static isCandidateToSecondaryCta(e,n){return n[1].id===e}getObservableHeaderPart(e){if("string"==typeof e)return this.translateService.get(e,{docOwnerName:this.binder.parties.find(o=>o.roles.includes("OWNER")).legalName,documentName:this.binder.documents[0].name});const n="function"==typeof e?e():"";return"string"==typeof n?(0,Y.of)(n):n instanceof Promise?(0,oe.D)(n):n}toggleText(){this.textExpanded=!this.textExpanded;const e=this.message.nativeElement;e.style.maxHeight=e.clientHeight===e.scrollHeight?i.getContextualMessageMaxHeight():`${e.scrollHeight}px`}static getContextualMessageMaxHeight(){return window.innerWidth>480?"8em":"6em"}setupActionHeaders(){this.mainCtaHeader=i.getFirstVisibleHeader(this.mainCta),this.mainCtaHeader&&(this.getObservableHeaderPart(this.mainCtaHeader.title).pipe((0,C.R)(this.destroy)).subscribe(e=>{this.mainCtaHeader.title=e}),this.getObservableHeaderPart(this.mainCtaHeader.description).pipe((0,C.R)(this.destroy)).subscribe(e=>{this.mainCtaHeader.description=e}),this.mainCtaHeader.secondDescription&&this.getObservableHeaderPart(this.mainCtaHeader.secondDescription).pipe((0,C.R)(this.destroy)).subscribe(e=>{this.mainCtaHeader.secondDescription=e}))}ngAfterViewChecked(){if(this.actionListDimensionsNeedCalculating){const e=this.calculateActionListHeight(this.showOtherActions);this.setActionListHeight(e),this.actionListDimensionsNeedCalculating=!1}}calculateActionListHeight(e){if(!this.actionList||!this.actionList.nativeElement||0===this.actionItems.length)return;if(e){let o=0;return this.actionItems.forEach(a=>{const s=a.nativeElement;s.style.setProperty("--actionHeight",`${s.offsetHeight}px`),s.style.setProperty("--dividerTop",`${o}px`),o+=s.offsetHeight}),o}const n=this.actionItems.first.nativeElement;return n.style.setProperty("--actionHeight",`${n.offsetHeight}px`),n.style.setProperty("--dividerTop","0"),n.offsetHeight}setActionListHeight(e){void 0!==e&&this.actionList&&this.actionList.nativeElement&&this.renderer.setStyle(this.actionList.nativeElement,"height",`${e}px`)}ngOnDestroy(){this.destroy.next()}ngOnInit(){this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(({data:e})=>{this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:e.action})})}close(){this.modalControlService.close(c.G.UserTerminated)}showAddSignerDataModal(){this.modalControlService.navigate("next",{action:f.AddSignerDataModal})}sendDocumentToNotary(){this.modalControlService.navigate("next",{action:f.AddSignerDataModal})}static getFirstVisibleHeader(e){return(e.headers||[]).find(n=>n.visible)}showManageModal(){this.modalControlService.navigate("next",{action:f.Manage})}showInviteViewerModal(){this.modalControlService.navigate("next",{action:f.InviteViewers})}showManageViewersModal(){this.modalControlService.navigate("next",{action:f.ManageViewers})}signNowOwnerOnly(){this.modalControlService.navigate("next",{action:f.SignNowOwner})}showInviteModal(){this.modalControlService.navigate("next",{action:f.InviteCollaborators})}addAnotherSigner(){this.modalControlService.navigate("next",{action:f.AddAnotherSigner})}startSigningUploadedDocument(){this.userIsSigner?this.signNowOwnerOnly():this.showInviteModal()}startSigningInterviewedDocument(){this.userIsOwner&&this.userIsSigner?this.noOtherSigners&&this.signNowOwnerOnly():this.showInviteModal()}getSignature(){this.store.dispatch((0,H.KI)(!0)),this.alertService.clearAlerts();const e=(0,m.oJ)(this.binder,"OWNER"),n=this.binder.documents[0];this.modalControlService.navigate("next",{action:f.GetSignature}),this.callBusinessEvent({eventType:"SIGN_PREPARE_STARTED",party:{partyId:e.id,partyName:e.legalName,partyEmail:e.email,partyRoles:e.roles},binder:{binderId:this.binder.id,binderName:this.binder.name,binderStatus:this.binder.status,country:this.binder?.configuration?.locale?.country,language:void 0,signable:!0},document:{documentId:n.id,documentName:n.name,signable:n.signable,contentType:n.contentType,templateId:n.id,templateName:n.name}},null)}showPaymentPayerModal(){this.modalControlService.navigate("next","optional"===this.paymentAgreement?.status||"proposed"===this.paymentAgreement?.status||this.featureFlagService.flags.variable_fee_enabled?{action:f.ShowPaymentCreatorModal}:{action:f.ShowPaymentSelectRoleModal})}showPaymentStatusModal(){this.modalControlService.navigate("next",{action:f.ShowPaymentStatusModal})}showPaymentPayNowModal(){(()=>{this.store.getState()})(),this.modalControlService.navigate("next",{action:this.featureFlagService.flags.pay_with_bank_account||this.featureFlagService.flags.wallet_enabled||"bank"===this.paymentAgreement.paymentMethodType?f.PayChoosePaymentMethod:f.ShowPaymentPayNow})}showPaymentPlaidModal(){this.modalControlService.navigate("next",{action:f.ShowPlaid})}showRemoveSignatureModal(){this.modalControlService.navigate("next",{action:f.RemoveSignature})}showCancelModal(){this.modalControlService.navigate("next",{action:f.Cancel})}showDeclineModal(){this.modalControlService.navigate("next",{action:f.Decline})}goToEdit(){this.modalControlService.navigate("next",{action:f.StartDocumentEdit})}changeDocTitle(){this.modalControlService.navigate("next",{action:f.ChangeTitle})}seeHistory(){this.modalControlService.navigate("next",{action:f.ShowHistory})}signNow(){this.modalControlService.navigate("next",{action:f.SignNow})}getVerified(){this.modalControlService.navigate("next",{action:f.ShowKYCVerify})}exportDocument(){this.userIsNotary||"IN_PREPARATION"===this.binder.status?this.modalControlService.navigate("next",{action:f.ExportDocument}):this.signService.download(this.binder,".pdf").subscribe(e=>{e&&this.modalControlService.close(c.G.CompletedSuccessfully)})}printDoc(){const e=this.store.getState().get("binder");this.messageService.sendEvent({eventName:"DOCUMENT_PRINTED",binder:e,category:"SignEvent"});const n=this.signService.getFullDocument(e.id,!0).pipe((0,C.R)(this.destroy),(0,B.U)(o=>new Blob([o],{type:"application/pdf"})),(0,ct.b)(o=>this.emitEvents(o)),(0,ct.b)(()=>this.updateDocumentHistory(e.id)));this.userAgentService.isAndroidDevice()?i.openPdfWindowForAndroid(n):this.userAgentService.isIOSDevice()?i.openPdfWindowForIOS(n):i.openNativePrintPopup(n)}emitEvents(e){const n=new FileReader;n.addEventListener("loadend",o=>{this.messageService.sendEvent({printFullDoc:o.target.result})}),n.readAsText(e)}updateDocumentHistory(e){this.signService.getDocumentEvents(e).subscribe()}static openPdfWindowForIOS(e){const n=window.open();e.subscribe(o=>n.location.assign(URL.createObjectURL(o)))}static openPdfWindowForAndroid(e){e.subscribe(n=>window.open(URL.createObjectURL(n)))}static openNativePrintPopup(e){e.subscribe(n=>{const o=URL.createObjectURL(n),a=window.document.createElement("iframe");a.setAttribute("src",o),a.style.display="none",window.document.body.appendChild(a),setTimeout(()=>{a.contentWindow.print()},1e3)})}toggleOtherActions(){this.actionListDimensionsNeedCalculating=!0,this.showOtherActions=!this.showOtherActions}addCustomFeatureTogglesToDefaultActions(e){return e.map(n=>{const o=this.brandConfig.featureTogglesForDefaultMenuItems.find(a=>a.id===n.id);return o?{...n,visible:i.itemVisibilityFromUserRole(o,this.currentUser,this.binder.status)}:n})}addOrderToActions(e){const n=this.getCustomActionItemsOrder();return new Sn(n,this.binder.status).sort(e)}getCustomActionItemsOrder(){return this.brandConfig&&this.brandConfig.orderOfItemsInIntentionModal?this.brandConfig.orderOfItemsInIntentionModal:null}getCustomActions(){return this.brandConfig&&this.brandConfig.customMenuItems?this.getCustomMenuItems(this.brandConfig.customMenuItems):[]}elemClicked(e,n){this.emitToParentWindow(n.eventName),this.eventTracker.action({id:n.id,text:n.heading?this.translateService.instant(n.heading):void 0}),n.id!==this.mainCta.id&&n.id!==this.secondaryCta?.id&&n.url&&(e.currentTarget.querySelector(`a.${this.bem("listed-action-anchor")}`).contains(e.target)||(n.openInNewWindow?this.document.open(n.url,"_blank","noopener=true"):this.document.location.href=n.url)),n.isCustom&&!n.onClick?this.modalControlService.close(c.G.CompletedSuccessfully):n.onClick?.apply(this)}getCustomMenuItems(e){return e.map(n=>({id:n.id,product:n?.product,name:n.name,eventName:n.eventName,iconClassName:n.iconClassName||null,queryStringFeatureToggle:n.queryStringFeatureToggle,visible:i.itemVisibilityFromUserRole(n,this.currentUser,this.binder.status)&&this.itemVisibilityFromQueryParam(n)&&i.itemVisibilityForBinderType(n,this.binder.documents),url:n.url||null,openInNewWindow:n.openInNewWindow,layout:n.layout,onClick:this.mapCustomActionToCallback(n.onClick),isCustom:!0,headers:n.headers,isSecondaryCTA:n.isSecondaryCTA}))}mapCustomActionToCallback(e){if(e){if(e===ie.CloseModal)return this.close;throw new Error("Unexpected custom action, please verify the brand configuration file!")}return null}emitToParentWindow(e){this.messageService.sendEvent({action:e})}callBusinessEvent(e,n){const o=this.nibblerBusinessEventsService.createBusinessEvent(e,{market:e.binder.country});this.nibblerBusinessEventsService.postBusinessEvent(o,n)}static itemVisibilityFromUserRole(e,n,o){return!!e.featureToggles&&n.roles.some(a=>!0===e.featureToggles[o][a])}itemVisibilityFromQueryParam(e){return!e.queryStringFeatureToggle||"true"===this.searchParams.get(e.eventName)}static itemVisibilityForBinderType(e,n){return!!n[0].signable||(e.visibleForNonSignableDocs??!0)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(F.f),t.Y36(R.c),t.Y36(V.e),t.Y36(Dn.O),t.Y36(ut.e),t.Y36(ae.V),t.Y36(c.e),t.Y36(t.Qsj),t.Y36(h.sK),t.Y36(v.H9),t.Y36(tt.a),t.Y36(lt.l),t.Y36(v.K0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["action-modal"]],viewQuery:function(n,o){if(1&n&&(t.Gf(mo,5),t.Gf(go,5,t.SBq),t.Gf(po,5)),2&n){let a;t.iGM(a=t.CRH())&&(o.actionList=a.first),t.iGM(a=t.CRH())&&(o.message=a.first),t.iGM(a=t.CRH())&&(o.actionItems=a)}},hostBindings:function(n,o){1&n&&t.NdJ("resize",function(){return o.onResize()},!1,t.Jf7)},features:[t._Bn([v.H9])],decls:19,vars:23,consts:[["fakePath","actionModal","rl-test","action-modal"],[3,"binder","ownerUser","payoutEnabled","userIsPayee","payeeAccountAttached","payeeAccountVerificationFailed","customActionsModal","signerDataComplete","binderHasInputs","actions"],["copyDocumentContainer",""],["rl-modal-body-part","heroText","rl-modal-description","",3,"class","ngClass"],["rel","noopener",3,"href"],["primaryCTA",""],["rl-test","action-modal-other-actions-list","rl-typography","body"],["actionList",""],["rl-test","action-modal-other-actions-toggle","rl-typography","small",3,"class","bold"],["rl-modal-title","","rl-typography","heading","translate",""],["rl-modal-header-widget","right"],[3,"product"],["rl-modal-title","","rl-typography","heading"],["rl-modal-body-part","heroText","rl-modal-description","",3,"ngClass"],["rl-modal-body-part","container"],["class","contextual-message"],["class","bold-700","rl-modal-body-part","regularContent","rl-test","action-modal-primary-title","rl-typography","bold"],["rl-modal-body-part","regularContent","rl-test","action-modal-primary-description"],["rl-modal-body-part","regularContent","rl-test","action-modal-primary-description","rl-typography","bold"],[1,"sign-icon",3,"src"],["class","sign-icon modal-default-icon-color","src","images/rocketsign-logo.svg"],["class","default-icon sign-icon rl-icon swivel-icon modal-default-icon-color"],["src","images/rocketsign-logo.svg",1,"sign-icon","modal-default-icon-color"],[1,"default-icon","sign-icon","rl-icon","swivel-icon","modal-default-icon-color"],["rl-modal-body-part","regularContent","rl-test","action-modal-primary-title","rl-typography","bold",1,"bold-700"],[1,"contextual-message"],[1,"title"],[3,"key","params"],[1,"message-wrapper"],["class","message",3,"expanded","comContent","params"],["class","message",3,"expanded"],["class","see-more-wrapper"],[1,"message",3,"comContent","params"],["message",""],[1,"message"],[1,"see-more-wrapper"],[1,"see-more",3,"click"],[4,"ngTemplateOutlet"],[3,"class","rl-test","rl-modal-body-part"],[3,"rl-test","rl-modal-body-part","click"],["secondaryCTA",""],[3,"rl-test","click"],["actionItems",""],["rel","noopener",3,"class","href"],["listedAction",""],["role","presentation"],["rl-test","action-modal-other-actions-toggle","rl-typography","small",3,"bold","click"],[3,"class","rl-test"]],template:function(n,o){if(1&n&&(t.TgZ(0,"rl-modal",0),t.YNc(1,uo,4,0,"rl-modal-header")(2,_o,5,4),t.TgZ(3,"rl-modal-body"),t._UZ(4,"rl-copy-document-actions-container",1,2),t.YNc(6,So,4,7,"div",3)(7,Eo,2,3,"a",4)(8,Do,1,1)(9,Ro,1,1,"ng-template",null,5,t.W1O)(11,zo,4,1),t.TgZ(12,"div")(13,"ul",6,7),t.SjG(15,Qo,7,11,"li",47,t.x6l),t.qZA()(),t.YNc(17,Yo,4,11,"button",8),t.qZA(),t._UZ(18,"rl-modal-footer"),t.qZA()),2&n){const a=t.MAs(5);t.Tol(o.bem(void 0)),t.xp6(),t.um2(1,o.userIsViewer?1:2),t.xp6(2),t.Tol(o.bem("body")),t.xp6(),t.Q6J("binder",o.binder)("ownerUser",o.userIsOwner)("payoutEnabled",o.payoutEnabled)("userIsPayee",o.userIsPayee)("payeeAccountAttached",o.payeeAccountAttached)("payeeAccountVerificationFailed",o.payeeAccountVerificationFailed)("customActionsModal",null==o.brandConfig?null:o.brandConfig.customActionsModalForDocumentCopyFeature)("signerDataComplete",!o.signerDataIsMissing)("binderHasInputs",o.binderHasInputs)("actions",o.allActions),t.xp6(2),t.um2(6,!o.mainCtaHeader&&!o.contextualMessage||a.hasEnabledLayoutForCompletedDocuments()||a.hasEnabledLayoutForCopiedDocuments()?-1:6),t.xp6(),t.um2(7,null!=o.mainCta&&o.mainCta.url?7:8),t.xp6(4),t.um2(11,o.secondaryCta&&!a.hasEnabledLayoutForCopiedDocuments()?11:-1),t.xp6(),t.Tol(o.bem("action-list-container")),t.xp6(),t.Tol(o.bem("action-list")),t.xp6(2),t.wJu(o.actions),t.xp6(2),t.um2(17,(null==o.actions?null:o.actions.length)>1?17:-1)}},dependencies:[v.mk,v.tP,h.Pi,O.$m,_t,q,_.zS,k,U,T,_.vP,_.Wb,A,S,b.tH,J.w,mt.q,co,v.i8,h.X$],styles:['.header-image[_ngcontent-%COMP%]{max-height:100%;max-width:100%;width:auto;height:auto;position:absolute;inset:0;margin:auto}.sign-icon[_ngcontent-%COMP%]{min-height:40px;margin:0 auto;width:40px;display:block}.default-icon[_ngcontent-%COMP%]{font-size:39px;width:40px;height:40px}.bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.rl-action-modal[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;text-decoration:none}@media (min-width: 480px){.rl-action-modal[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{grid-column:2/span max(1,2 * 2 - 1)}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.rl-action-modal[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{grid-column:2/span 2}}}.rl-action-modal__body[_ngcontent-%COMP%]{text-align:center}.rl-action-modal__cta[_ngcontent-%COMP%]{width:90%;margin:0 auto;height:auto}@media (min-width: 480px){.rl-action-modal__cta[_ngcontent-%COMP%]{margin-bottom:16px}}@media (min-width: 768px){.rl-action-modal__cta[_ngcontent-%COMP%]{margin-bottom:16px}}.rl-action-modal__cta.rl-action-modal__cta--deviant[_ngcontent-%COMP%]{margin-bottom:0}.rl-action-modal__action-list-container[_ngcontent-%COMP%]{border-bottom:1px solid #EDEDF0;border-top:1px solid #EDEDF0;font-size:0;overflow:hidden;position:relative}.rl-action-modal__action-list[_ngcontent-%COMP%]{--actionHeight: 0;--dividerTop: 0;display:inline-block;list-style:none;margin:0;overflow:hidden;padding:0;transition:height .2s ease-out}.rl-action-modal__listed-action[_ngcontent-%COMP%]{align-items:center;box-sizing:border-box;cursor:pointer;display:flex;flex-flow:row nowrap;justify-content:flex-start;min-height:40px;padding:9px 0;transition:.15s ease-in-out}.rl-action-modal__listed-action[_ngcontent-%COMP%]:after{background-color:#ededf0;content:"";display:block;height:1px;left:0;position:absolute;right:0;top:var(--dividerTop)}.rl-action-modal__listed-action--hidden[_ngcontent-%COMP%]:after, .rl-action-modal__listed-action[_ngcontent-%COMP%]:first-of-type:after{display:none}.rl-action-modal__listed-action[_ngcontent-%COMP%]:before{background-color:transparent;content:"";display:block;height:var(--actionHeight);left:0;position:absolute;right:0;transition:.15s ease-in-out;top:var(--dividerTop)}.rl-action-modal__listed-action--solo[_ngcontent-%COMP%]{justify-content:center}.rl-action-modal__listed-action.action-red[_ngcontent-%COMP%]{color:#e62300}.rl-action-modal__listed-action[_ngcontent-%COMP%]:hover:before{background-color:#e9e9e9}.rl-action-modal__listed-action-icon[_ngcontent-%COMP%], .rl-action-modal__listed-action-text[_ngcontent-%COMP%]{display:inline-block}.rl-action-modal__listed-action-anchor[_ngcontent-%COMP%], .rl-action-modal__listed-action-icon[_ngcontent-%COMP%], .rl-action-modal__listed-action-text[_ngcontent-%COMP%]{z-index:1}.rl-action-modal__listed-action-icon[_ngcontent-%COMP%]{margin-right:8px}.rl-action-modal__toggle-options[_ngcontent-%COMP%]{background-color:transparent;border:none;color:var(--rl-action-primary-default, #d68021);cursor:pointer;outline:none}.rl-action-modal__toggle-icon[_ngcontent-%COMP%]{font-size:10px;margin-right:8px}.no-margin-bottom[_ngcontent-%COMP%]{margin-bottom:0}.contextual-message[_ngcontent-%COMP%]{margin:0 -16px;background:#f7f7f8;text-align:left;padding:8px 16px}.contextual-message[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;display:block;padding-bottom:8px}.contextual-message[_ngcontent-%COMP%]   .message-wrapper[_ngcontent-%COMP%]{position:relative}.contextual-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin:0;font-size:13px;max-height:6em;overflow:hidden;overflow-y:auto;white-space:pre-line;transition:.2s ease-in all}.contextual-message[_ngcontent-%COMP%]   .see-more-wrapper[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;background:linear-gradient(90deg,#fff0,#f7f7f8 32%);width:110px;text-align:right}.contextual-message[_ngcontent-%COMP%]   .see-more[_ngcontent-%COMP%]{font-size:13px;font-weight:700;text-decoration:underline}@media screen and (min-width: 480px){.contextual-message[_ngcontent-%COMP%]{margin:0 -24px;padding:8px 24px}.contextual-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{max-height:8em}}@media screen and (min-width: 768px){.contextual-message[_ngcontent-%COMP%]{margin:0 -80px;padding:8px 80px}}']})}return i})();var L=u(4776),Nt=u(1423);let ue=(()=>{class i{constructor(e){this.elementRef=e}ngOnInit(){for(let e=0;e<this.elementRef.nativeElement.childNodes.length;e++){const n=this.elementRef.nativeElement.childNodes[e];if(n.href){let o=n.href;n.onclick=a=>{a.preventDefault(),window.open(o,"_blank")}}}}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:i,selectors:[["","comLinkNewTab",""]]})}return i})();class wt{constructor(r,e,n){this.x=r,this.y=e,this.time=n||Date.now()}distanceTo(r){return Math.sqrt(Math.pow(this.x-r.x,2)+Math.pow(this.y-r.y,2))}equals(r){return this.x===r.x&&this.y===r.y&&this.time===r.time}velocityFrom(r){return this.time!==r.time?this.distanceTo(r)/(this.time-r.time):0}}class Rt{static fromPoints(r,e){const n=this.calculateControlPoints(r[0],r[1],r[2]).c2,o=this.calculateControlPoints(r[1],r[2],r[3]).c1;return new Rt(r[1],n,o,r[2],e.start,e.end)}static calculateControlPoints(r,e,n){const o=r.x-e.x,a=r.y-e.y,s=e.x-n.x,l=e.y-n.y,d_x=(r.x+e.x)/2,d_y=(r.y+e.y)/2,p_x=(e.x+n.x)/2,p_y=(e.y+n.y)/2,M=Math.sqrt(o*o+a*a),y=Math.sqrt(s*s+l*l),E=y/(M+y),at=e.x-(p_x+(d_x-p_x)*E),Pt=e.y-(p_y+(d_y-p_y)*E);return{c1:new wt(d_x+at,d_y+Pt),c2:new wt(p_x+at,p_y+Pt)}}constructor(r,e,n,o,a,s){this.startPoint=r,this.control2=e,this.control1=n,this.endPoint=o,this.startWidth=a,this.endWidth=s}length(){let n,o,e=0;for(let a=0;a<=1e4;a+=1){const s=a/1e4,l=this.point(s,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),d=this.point(s,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){const p=l-n,M=d-o;e+=Math.sqrt(p*p+M*M)}n=l,o=d}return e}point(r,e,n,o,a){return e*(1-r)*(1-r)*(1-r)+3*n*(1-r)*(1-r)*r+3*o*(1-r)*r*r+a*r*r*r}}class At{constructor(r,e={}){this.canvas=r,this.options=e,this._scaleRatio=1,this._handleMouseDown=n=>{1===n.which&&(this._mouseButtonDown=!0,this._strokeBegin(n))},this._handleMouseMove=n=>{this._mouseButtonDown&&this._strokeMoveUpdate(n)},this._handleMouseUp=n=>{1===n.which&&this._mouseButtonDown&&(this._mouseButtonDown=!1,this._strokeEnd(n))},this._handleTouchStart=n=>{n.preventDefault(),1===n.targetTouches.length&&this._strokeBegin(n.changedTouches[0])},this._handleTouchMove=n=>{n.preventDefault(),this._strokeMoveUpdate(n.targetTouches[0])},this._handleTouchEnd=n=>{n.target===this.canvas&&(n.preventDefault(),this._strokeEnd(n.changedTouches[0]))},this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||1,this.maxWidth=e.maxWidth||2.5,this.throttle="throttle"in e?e.throttle:1,this.minDistance="minDistance"in e?e.minDistance:1,this._strokeMoveUpdate=this.throttle?function Ko(i,r=250){let o,a,s,e=0,n=null;const l=()=>{e=Date.now(),n=null,o=i.apply(a,s),n||(a=null,s=[])};return function(...p){const M=Date.now(),y=r-(M-e);return a=this,s=p,y<=0||y>r?(n&&(clearTimeout(n),n=null),e=M,o=i.apply(a,s),n||(a=null,s=[])):n||(n=window.setTimeout(l,y)),o}}(At.prototype._strokeUpdate,this.throttle):At.prototype._strokeUpdate,this.dotSize=e.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.onBegin=e.onBegin,this.onEnd=e.onEnd,this._ctx=r.getContext("2d"),this.clear(),this.on()}clear(){const r=this._ctx,e=this.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.fillStyle=this.backgroundColor,r.clearRect(0,0,e.width,e.height),r.fillRect(0,0,e.width,e.height),r.restore(),this._data=[],this._reset(),this._isEmpty=!0}setScaleRatio(r){r!=this._scaleRatio&&(this._scaleRatio=r,this.canvas.getContext("2d").restore(),this.canvas.getContext("2d").scale(this._scaleRatio,this._scaleRatio))}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",window.PointerEvent?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.removeEventListener("pointerdown",this._handleMouseDown),this.canvas.removeEventListener("pointermove",this._handleMouseMove),document.removeEventListener("pointerup",this._handleMouseUp),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(r){let e=JSON.parse(JSON.stringify(r));this.clear(),this._fromData(e,({color:n,curve:o})=>this._drawCurve({color:n,curve:o}),({color:n,point:o})=>this._drawDot({color:n,point:o})),this._data=e}toData(){return this._data}toSVG(){const r=this._data,e=Math.max(window.devicePixelRatio||1,1),a=this.canvas.width/e,s=this.canvas.height/e,l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("width",this.canvas.width.toString()),l.setAttribute("height",this.canvas.height.toString()),this._fromData(r,({color:D,curve:Z})=>{const E=document.createElement("path");if(!(isNaN(Z.control1.x)||isNaN(Z.control1.y)||isNaN(Z.control2.x)||isNaN(Z.control2.y))){const Q=`M ${Z.startPoint.x.toFixed(3)},${Z.startPoint.y.toFixed(3)} C ${Z.control1.x.toFixed(3)},${Z.control1.y.toFixed(3)} ${Z.control2.x.toFixed(3)},${Z.control2.y.toFixed(3)} ${Z.endPoint.x.toFixed(3)},${Z.endPoint.y.toFixed(3)}`;E.setAttribute("d",Q),E.setAttribute("stroke-width",(2.25*Z.endWidth).toFixed(3)),E.setAttribute("stroke",D),E.setAttribute("fill","none"),E.setAttribute("stroke-linecap","round"),l.appendChild(E)}},({color:D,point:Z})=>{const E=document.createElement("circle"),Q="function"==typeof this.dotSize?this.dotSize():this.dotSize;E.setAttribute("r",Q.toString()),E.setAttribute("cx",Z.x.toString()),E.setAttribute("cy",Z.y.toString()),E.setAttribute("fill",D),l.appendChild(E)});const d=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 ${a} ${s}" width="${a}" height="${s}">`;let p=l.innerHTML;if(void 0===p){const D=document.createElement("dummy"),Z=l.childNodes;D.innerHTML="";for(let E=0;E<Z.length;E+=1)D.appendChild(Z[E].cloneNode(!0));p=D.innerHTML}return d+p+"</svg>"}_strokeBegin(r){const e={color:this.penColor,points:[]};"function"==typeof this.onBegin&&this.onBegin(r),this._data.push(e),this._reset(),this._strokeUpdate(r)}_strokeUpdate(r){const o=this._createPoint(r.clientX,r.clientY),a=this._data[this._data.length-1],s=a.points,l=s.length>0&&s[s.length-1],d=!!l&&o.distanceTo(l)<=this.minDistance,p=a.color;if(!l||!l||!d){const M=this._addPoint(o);l?M&&this._drawCurve({color:p,curve:M}):this._drawDot({color:p,point:o}),s.push({time:o.time,x:o.x,y:o.y})}}_strokeEnd(r){this._strokeUpdate(r),"function"==typeof this.onEnd&&this.onEnd(r)}_handlePointerEvents(){this._mouseButtonDown=!1,this.canvas.addEventListener("pointerdown",this._handleMouseDown),this.canvas.addEventListener("pointermove",this._handleMouseMove),document.addEventListener("pointerup",this._handleMouseUp)}_handleMouseEvents(){this._mouseButtonDown=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor}_createPoint(r,e){const n=this.canvas.getBoundingClientRect();return new wt((r-n.left)/this._scaleRatio,(e-n.top)/this._scaleRatio,(new Date).getTime())}_addPoint(r){const{_lastPoints:e}=this;if(e.push(r),e.length>2){3===e.length&&e.unshift(e[0]);const n=this._calculateCurveWidths(e[1],e[2]),o=Rt.fromPoints(e,n);return e.shift(),o}return null}_calculateCurveWidths(r,e){const n=this.velocityFilterWeight*e.velocityFrom(r)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(n),a={end:o,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=o,a}_strokeWidth(r){return Math.max(this.maxWidth/(r+1),this.minWidth)}_drawCurveSegment(r,e,n){const o=this._ctx;o.moveTo(r,e),o.arc(r,e,n,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve({color:r,curve:e}){const n=this._ctx,o=e.endWidth-e.startWidth,a=2*Math.floor(e.length());n.beginPath(),n.fillStyle=r;for(let s=0;s<a;s+=1){const l=s/a,d=l*l,p=d*l,M=1-l,y=M*M,D=y*M;let Z=D*e.startPoint.x;Z+=3*y*l*e.control1.x,Z+=3*M*d*e.control2.x,Z+=p*e.endPoint.x;let E=D*e.startPoint.y;E+=3*y*l*e.control1.y,E+=3*M*d*e.control2.y,E+=p*e.endPoint.y;const Q=Math.min(e.startWidth+p*o,this.maxWidth);this._drawCurveSegment(Z,E,Q)}n.closePath(),n.fill()}_drawDot({color:r,point:e}){const n=this._ctx,o="function"==typeof this.dotSize?this.dotSize():this.dotSize;n.beginPath(),this._drawCurveSegment(e.x,e.y,o),n.closePath(),n.fillStyle=r,n.fill()}_fromData(r,e,n){for(const o of r){const{color:a,points:s}=o;if(s.length>1)for(let l=0;l<s.length;l+=1){const d=s[l],p=new wt(d.x,d.y,d.time);this.penColor=a,0===l&&this._reset();const M=this._addPoint(p);M&&e({color:a,curve:M})}else this._reset(),n({color:a,point:s[0]})}}}const jo=["padContainer"],Xo=["svgCroppingBox"],ti=["canvasRef"];let _e=(()=>{class i{constructor(){this.canvasDimensions={width:0,height:0},this.resizeTimeout=null,this.resizeStartDimensions=null,this.scaleRatio=1,this.canvasMaxSize=431}onWindowResize(){this.rescaleCanvas()}onOrientationChange(){this.rescaleCanvas()}ngOnInit(){this.parentPadContainer=document.querySelector("#parentPadContainer"),this.setCanvasSize()}ngAfterViewInit(){this.canvas=this.canvasRef.nativeElement,this.signaturePad=new At(this.canvas,{backgroundColor:"rgba(255, 255, 255, 0)",penColor:"rgb(51 , 51, 51)"}),setTimeout(()=>{this.signaturePad.clear(),this.svgData&&(this.resizeStartDimensions={width:this.svgData.canvas.width,height:this.svgData.canvas.height},this.signaturePad.fromData(this.svgData.points)),this.rescaleCanvas()},100)}setCanvasSize(){this.canvasDimensions.width=this.parentPadContainer?.offsetWidth,this.canvasDimensions.height=.5*this.parentPadContainer?.offsetWidth,this.resizeStartDimensions={width:this.canvasDimensions.width,height:this.canvasDimensions.height}}rescaleCanvas(){this.canvasDimensions.width=this.parentPadContainer?.offsetWidth,this.canvasDimensions.height=.5*this.parentPadContainer?.offsetWidth,this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{let e;e=this.svgData&&this.svgData.canvas?this.padContainer?.nativeElement?.offsetWidth/this.resizeStartDimensions.width*this.svgData.canvas.ratio:this.padContainer?.nativeElement?.offsetWidth/this.resizeStartDimensions.width;const n=this.signaturePad.toData();this.signaturePad.clear(),this.signaturePad.setScaleRatio(e),this.scaleRatio=e,this.setPathWidth(this.padContainer.nativeElement.offsetWidth,e),this.signaturePad.fromData(n)},100)}setPathWidth(e,n){const o=e/this.canvasMaxSize;this.signaturePad.minWidth=o/n,this.signaturePad.maxWidth=2.5*o/n}switchColor(e){const n=this.signaturePad.toData();this.signaturePad.clear(),this.signaturePad.penColor=e;for(let o=0;o<n.length;o++)n[o].color=e;this.signaturePad.fromData(n)}cropSignatureCanvas(){const n=(new DOMParser).parseFromString(this.signaturePad.toSVG(),"image/svg+xml");this.svgCroppingBox.nativeElement.innerHTML="",this.svgCroppingBox.nativeElement.appendChild(n.documentElement);const o=this.svgCroppingBox.nativeElement.getElementsByTagName("svg")[0],a=this.svgCroppingBox.nativeElement.getElementsByTagName("svg")[0].getBBox(),s=[a.x,a.y-.05*a.y,a.width,a.height+.1*a.height].join(" ");return o.setAttribute("viewBox",s),o.setAttribute("width",a.width),o.setAttribute("height",a.height),btoa(this.svgCroppingBox.nativeElement.innerHTML)}getSvgData(){return{points:this.signaturePad.toData(),canvas:{width:this.canvasDimensions.width,height:this.canvasDimensions.height,ratio:this.scaleRatio}}}clearPad(){this.signaturePad.clear()}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["signature-pad"]],viewQuery:function(n,o){if(1&n&&(t.Gf(jo,5),t.Gf(Xo,5),t.Gf(ti,5)),2&n){let a;t.iGM(a=t.CRH())&&(o.padContainer=a.first),t.iGM(a=t.CRH())&&(o.svgCroppingBox=a.first),t.iGM(a=t.CRH())&&(o.canvasRef=a.first)}},hostBindings:function(n,o){1&n&&t.NdJ("resize",function(){return o.onWindowResize()},!1,t.Jf7)("orientationchange",function(){return o.onOrientationChange()},!1,t.Jf7)},inputs:{svgData:"svgData"},decls:7,vars:2,consts:[[1,"signature-component"],["padContainer",""],[1,"svg-cropping-box"],["svgCroppingBox",""],[1,"canvas-background"],[3,"width","height"],["canvasRef",""]],template:function(n,o){1&n&&(t.TgZ(0,"div",0,1),t._UZ(2,"div",2,3)(4,"div",4)(5,"canvas",5,6),t.qZA()),2&n&&(t.xp6(5),t.Q6J("width",o.canvasDimensions.width)("height",o.canvasDimensions.height))},styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.signature-component[_ngcontent-%COMP%]{position:relative;display:block;width:100%}.signature-component[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:block;position:relative;box-shadow:0 2px #ccd1d9,inset 1px 1px #ccd1d9,inset -1px 1px #ccd1d9;border:none}.signature-component[_ngcontent-%COMP%]   .canvas-background[_ngcontent-%COMP%], .signature-component[_ngcontent-%COMP%]   .svg-cropping-box[_ngcontent-%COMP%]{top:0;position:absolute}.signature-component[_ngcontent-%COMP%]   .canvas-background[_ngcontent-%COMP%]{width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-image:url(/images/draw-sign-box.svg)}"]})}return i})();const ei=["editableInput"],ni=["signaturePad"],he=(i,r)=>({termsUrl:i,privacyPageUrl:r});function oi(i,r){if(1&i&&t._UZ(0,"p",29),2&i){const e=t.oxw();t.Q6J("comContent","signature-modal_terms-and-conditions-with-url")("params",t.WLB(2,he,e.termsUrl,e.privacyPageUrl))}}function ii(i,r){if(1&i&&t._UZ(0,"p",29),2&i){const e=t.oxw(2);t.Q6J("comContent","signature-modal_terms-and-conditions-with-url")("params",t.WLB(2,he,e.termsUrl,e.privacyPageUrl))}}function ai(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",11)(1,"label"),t._UZ(2,"com",9),t.qZA(),t.TgZ(3,"form",12,30),t.NdJ("submit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.saveDrawSign())}),t.TgZ(5,"div",14)(6,"div",31),t._UZ(7,"signature-pad",32,33),t.qZA(),t.TgZ(9,"div",19)(10,"div",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.switchColor())}),t._UZ(11,"span",21)(12,"com",22),t.qZA(),t.TgZ(13,"div",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clearPad())}),t._UZ(14,"span",34)(15,"com",35),t.qZA()()(),t.TgZ(16,"div",25)(17,"button",26),t._UZ(18,"com",9),t.qZA()(),t.YNc(19,ii,1,5,"p",27),t.qZA()()}if(2&i){const e=t.MAs(8),n=t.oxw();t.xp6(2),t.Q6J("key","signature-modal_prompt_draw"),t.xp6(5),t.Q6J("svgData",n.unsavedSvgData),t.xp6(5),t.Q6J("key","signature-modal_switch_color"),t.xp6(3),t.Q6J("key","signature-modal_start_again"),t.xp6(2),t.ekj("disabled",n.isPadEmpty(e)),t.Q6J("disabled",n.isPadEmpty(e)),t.xp6(),t.Q6J("key","signature-modal_confirm"),t.xp6(),t.um2(19,n.isOwner()?-1:19)}}const ri=i=>({"over-limit":i});let Ce=(()=>{class i{constructor(e,n,o,a){this.modalControlService=e,this.store=n,this.activatedRoute=o,this.documentEl=a,this.destroy=new w.x,this.signatureModalSubmitted=new t.vpe,this.hideModal=new t.vpe,this.signatureStyles=["sig-style-1","sig-style-2","sig-style-3","sig-style-4"],this.signatureStyle="sig-style-1",this.typeInSignatureColor="#333333",this.drawSignatureColor="#333333",this.termsAccepted=!1,this.activeSigType="draw";const s=this.store.getState().brandConfig;s&&s.lookAndFeel&&(this.termsUrl=s.lookAndFeel.partnerTermsAndConditionsPage,this.privacyPageUrl=s.lookAndFeel.partnerPrivacyPage)}ngOnInit(){this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(e=>this.onNavigate(e)),this.addPasteEventListener(),this.input.value&&(this.activeSigType="type"),this.input.valueType&&"IMAGE"==this.input.valueType&&(this.activeSigType="draw",this.unsavedSvgData=this.input.svgData,this.drawSignatureColor=this.input.font.color,setTimeout(()=>{this.signaturePad.switchColor("#2c39f9"===this.drawSignatureColor?"rgb(44, 57, 249)":"rgb(51, 51, 51)")},200))}onNavigate(e){this.modalControlService.close(c.G.UserTerminated)}ngOnDestroy(){this.destroy.next()}addPasteEventListener(){this.editableInput&&this.editableInput.nativeElement?this.editableInput.nativeElement.addEventListener("paste",function(e){e.preventDefault();let n="";e.clipboardData||e.originalEvent.clipboardData?n=(e.originalEvent||e).clipboardData.getData("text/plain"):window.clipboardData&&(n=window.clipboardData.getData("Text")),document.queryCommandSupported("insertText")?document.execCommand("insertText",!1,n):document.execCommand("paste",!1,n)}):setTimeout(()=>this.addPasteEventListener(),100)}isPadEmpty(e){return!e||!e.signaturePad||e.signaturePad.isEmpty()}isOwner(){return(0,m.cm)(this.store.getState())}ngOnChanges(e){e.currentUserLegalName&&(this.signatureValue=("TEXT"===this.input.valueType?this.input.value:null)??e.currentUserLegalName.currentValue),e.showModal&&this.setFontStyle()}setFontStyle(){const e=(0,m.zw)(this.store.getState()).filter(n=>!!n.font).find(n=>"DATE_SIGNED"!==n.type);e&&("CAVEAT_REGULAR"===e.font.type&&(this.signatureStyle="sig-style-1"),"SHADOWS_INTO_LIGHT_TWO"===e.font.type&&(this.signatureStyle="sig-style-2"),"DANCING_SCRIPT"===e.font.type&&(this.signatureStyle="sig-style-3"),"JUST_ME_AGAIN_DOWN_HERE"===e.font.type&&(this.signatureStyle="sig-style-4"),this.typeInSignatureColor=e.font.color)}switchColor(){"draw"===this.activeSigType?this.switchDrawColor():this.switchTypeInColor()}switchTypeInColor(){this.typeInSignatureColor="#333333"===this.typeInSignatureColor?"#2c39f9":"#333333"}switchDrawColor(){"#333333"===this.drawSignatureColor?(this.drawSignatureColor="#2c39f9",this.signaturePad.switchColor("rgb(44, 57, 249)")):(this.drawSignatureColor="#333333",this.signaturePad.switchColor("rgb(51, 51, 51)"))}switchFont(){const e=this.signatureStyles.indexOf(this.signatureStyle)+1;this.signatureStyle=e===this.signatureStyles.length?this.signatureStyles[0]:this.signatureStyles[e]}isSigValid(){if(!this.signatureValue)return!1;const e=this.signatureValue.trim();return!(!e||e.length<1)&&e.length<=75}confirmSignatureEditsAndTos(){if(!this.isSigValid())return;this.signatureModalSubmitted.emit(),this.modalControlService.close(c.G.CompletedSuccessfully);const e=this.signatureValue.trim(),n={color:this.typeInSignatureColor,type:"CAVEAT_REGULAR",sizeInPx:26,weight:"NORMAL_400"};"sig-style-1"===this.signatureStyle&&(n.type="CAVEAT_REGULAR"),"sig-style-2"===this.signatureStyle&&(n.type="SHADOWS_INTO_LIGHT_TWO"),"sig-style-3"===this.signatureStyle&&(n.type="DANCING_SCRIPT"),"sig-style-4"===this.signatureStyle&&(n.type="JUST_ME_AGAIN_DOWN_HERE");const{id:o}=this.input,{partyReference:a}=this.input;this.submitToStore({id:o,partyReference:a,font:n,value:e,type:this.input.type,valueType:"TEXT"})}saveDrawSign(){this.signatureModalSubmitted.emit("scrollToNextInput"),this.modalControlService.close(c.G.CompletedSuccessfully),this.submitToStore({id:this.input.id,partyReference:this.input.partyReference,valueType:"IMAGE",font:{color:this.drawSignatureColor},value:this.signaturePad.cropSignatureCanvas(),svgData:this.signaturePad.getSvgData(),type:this.input.type})}submitToStore(e){this.store.dispatch(L.t7(e))}switchSigType(e){"draw"===this.activeSigType&&(this.unsavedSvgData=this.signaturePad.getSvgData()),this.activeSigType!==e&&(this.activeSigType=e)}clearPad(){this.signaturePad.clearPad()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e),t.Y36(x.y),t.Y36(Nt.gz),t.Y36(v.K0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["signature-modal"]],viewQuery:function(n,o){if(1&n&&(t.Gf(ei,5),t.Gf(ni,5)),2&n){let a;t.iGM(a=t.CRH())&&(o.editableInput=a.first),t.iGM(a=t.CRH())&&(o.signaturePad=a.first)}},inputs:{input:"input",currentUserLegalName:"currentUserLegalName",showModal:"showModal"},outputs:{signatureModalSubmitted:"signatureModalSubmitted",hideModal:"hideModal"},features:[t.TTD],decls:40,vars:25,consts:[["product","sign"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"header-icon","rl-icon","signature2"],["translate",""],["rl-modal-header-widget","right"],[1,"modal-wrapper"],[1,"modal-content-wrapper"],[1,"signature-type-switch"],[1,"switch-button","signature-switch",3,"click"],[3,"key"],[1,"e2e_type-tab",3,"key"],[1,"modal-content"],[3,"submit"],["editSigForm","ngForm"],[1,"form-group"],["id","signature-input","required","","type","text","name","signature-input",1,"party-form-control",3,"ngClass","ngModel","ngModelChange"],["editableInput",""],[1,"char-counter"],[1,"counter-text",3,"ngClass"],[1,"control-wrapper"],[1,"switch-button","switch-color",3,"click"],[1,"rl-icon","color-change"],[1,"e2e_switch-color",3,"key"],[1,"switch-button","switch-font-button",3,"click"],[1,"rl-icon","font-change"],[1,"bottom-buttons"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","terms-link","comLinkNewTab","",3,"comContent","params"],["class","modal-content"],["comLinkNewTab","",1,"terms-link",3,"comContent","params"],["drawSigForm","ngForm"],["id","parentPadContainer",1,"signature-pad-container"],[3,"svgData"],["signaturePad",""],[1,"rl-icon","start-again"],[1,"e2e_start-again",3,"key"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal")(1,"rl-modal-header-branded",0)(2,"h1",1),t._UZ(3,"i",2),t.TgZ(4,"span",3),t._uU(5,"signature-modal_heading"),t.qZA()(),t._UZ(6,"rl-modal-header-close",4),t.qZA(),t.TgZ(7,"rl-modal-body")(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8),t.NdJ("click",function(){return o.switchSigType("draw")}),t._UZ(12,"com",9),t.qZA(),t.TgZ(13,"div",8),t.NdJ("click",function(){return o.switchSigType("type")}),t._UZ(14,"com",10),t.qZA()(),t.TgZ(15,"div",11)(16,"label"),t._UZ(17,"com",9),t.qZA(),t.TgZ(18,"form",12,13),t.NdJ("submit",function(){return o.confirmSignatureEditsAndTos()}),t.TgZ(20,"div",14)(21,"input",15,16),t.NdJ("ngModelChange",function(s){return o.signatureValue=s}),t.qZA(),t.TgZ(23,"div",17)(24,"div",18)(25,"span"),t._uU(26),t.qZA()()(),t.TgZ(27,"div",19)(28,"div",20),t.NdJ("click",function(){return o.switchColor()}),t._UZ(29,"span",21)(30,"com",22),t.qZA(),t.TgZ(31,"div",23),t.NdJ("click",function(){return o.switchFont()}),t._UZ(32,"span",24)(33,"com",9),t.qZA()()(),t.TgZ(34,"div",25)(35,"button",26),t._UZ(36,"com",9),t.qZA()(),t.YNc(37,oi,1,5,"p",27),t.qZA()(),t.YNc(38,ai,20,9,"div",28),t.qZA()()(),t._UZ(39,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(11),t.ekj("active","draw"==o.activeSigType),t.xp6(),t.Q6J("key","signature-modal_select_draw_signature"),t.xp6(),t.ekj("active","type"==o.activeSigType),t.xp6(),t.Q6J("key","signature-modal_select_type_in_signature"),t.xp6(),t.ekj("hidden","draw"==o.activeSigType),t.xp6(2),t.Q6J("key","signature-modal_prompt"),t.xp6(4),t.Udp("color",o.typeInSignatureColor),t.Q6J("ngClass",o.signatureStyle)("ngModel",o.signatureValue),t.xp6(3),t.Q6J("ngClass",t.VKq(23,ri,(null==o.signatureValue?null:o.signatureValue.length)>75)),t.xp6(2),t.hij("",null==o.signatureValue?null:o.signatureValue.length,"/75"),t.xp6(4),t.Q6J("key","signature-modal_switch_color"),t.xp6(3),t.Q6J("key","signature-modal_switch_font"),t.xp6(2),t.ekj("disabled",!o.isSigValid()),t.Q6J("disabled",!o.isSigValid()),t.xp6(),t.Q6J("key","signature-modal_confirm"),t.xp6(),t.um2(37,o.isOwner()?-1:37),t.xp6(),t.um2(38,"draw"==o.activeSigType?38:-1))},dependencies:[v.mk,J.w,mt.q,ue,g._Y,g.Fj,g.JJ,g.JL,g.Q7,g.On,g.F,h.Pi,_.zS,k,U,T,_.vP,A,S,b.tH,_e],styles:[".secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}.bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}[_nghost-%COMP%]     rl-modal-header{margin:0}[_nghost-%COMP%]     .rl-modal{padding:0}[_nghost-%COMP%]     .footer-container{margin:0 auto;padding-bottom:16px}.rl-icon.signature2[_ngcontent-%COMP%]{padding-right:8px;font-size:22px}.signature-type-switch[_ngcontent-%COMP%]{display:block}.signature-type-switch[_ngcontent-%COMP%]   .switch-button.signature-switch[_ngcontent-%COMP%]{font-size:16px;width:50%;text-align:center;height:50px;line-height:50px;cursor:pointer;color:#9da0ac;border:1px solid #9DA0AC;box-sizing:border-box;display:inline-block}.signature-type-switch[_ngcontent-%COMP%]   .switch-button.signature-switch.active[_ngcontent-%COMP%]{color:#fff;background-color:#3e3f4c}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;padding:24px 8px;width:100%;max-width:416px;box-sizing:border-box;margin:0 auto;padding:24px 8px 32px!important}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:24px 8px 40px}}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   span.rl-icon.dispute[_ngcontent-%COMP%]{top:6px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;resize:none;outline:none!important;font-size:16px;font-family:Open Sans;background-color:#f7f7f8;font-weight:400;margin-top:8px;padding:10px;border-radius:2px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border:1px solid #e62300}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .custom-text-caption[_ngcontent-%COMP%]{font-size:12px;clear:both}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;position:absolute;right:5px;bottom:5px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{width:100%;padding:0;margin-top:24px;display:flex;justify-content:space-between;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{width:100%;height:48px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse;height:48px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{flex:0 1 50%;height:100%;margin-right:8px;margin-bottom:0}}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:600;font-size:16px;line-height:20px;letter-spacing:.0125em;margin:16px 0 0}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]:first-child{margin-top:0}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .item-ref-label[_ngcontent-%COMP%]{display:block;height:33px;margin:20px 0;line-height:33px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   span.checkbox-check[_ngcontent-%COMP%]{margin-right:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:18px;position:relative}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .rl-icon.dispute[_ngcontent-%COMP%]{position:absolute;top:44px;right:12px;font-size:25px;color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;padding:15px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important;border-radius:2px;outline:0;box-sizing:border-box;background-color:#f7f7f8;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .party-form-control.disabled[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.disabled[_ngcontent-%COMP%]{pointer-events:none}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .party-form-control.invalid[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.invalid[_ngcontent-%COMP%]{box-shadow:0 2px #e62300,inset 1px 1px #e62300,inset -1px 1px #e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control.margin-top[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.margin-top[_ngcontent-%COMP%]{margin-top:6px}.modal-content[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{resize:none;height:120px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:12px;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-ref-label[_ngcontent-%COMP%]{display:block;height:33px;line-height:33px;cursor:pointer;max-width:calc(100% - 60px)}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:24px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   .doc-man-checkbox[_ngcontent-%COMP%]:before{font-size:14px;position:relative}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:14px;display:flex;flex-direction:row;align-items:center}.modal-content.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;display:block;width:100%;margin:0 auto}.modal-content.add-new[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0;color:#e62300;font-size:16px}.modal-content.hidden[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .signature-pad-container[_ngcontent-%COMP%]{margin-bottom:16px;width:100%}.modal-content[_ngcontent-%COMP%]   .signature-pad-container[_ngcontent-%COMP%]   signature-pad[_ngcontent-%COMP%]{display:block;width:100%}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:20px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.party-form-control[_ngcontent-%COMP%]{display:block;width:100%;font-size:22px;line-height:34px;padding:10px 10px 10px 15px;border-radius:2px;background-color:#fff;outline:0;margin-top:0;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{position:relative;height:15px;margin-bottom:16px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]   .counter-text[_ngcontent-%COMP%]{position:absolute;right:0;color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]   .counter-text.over-limit[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .switch-button[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--rl-action-primary-default, #d68021);border:1px solid var(--rl-action-primary-default, #d68021);background-color:#fff;border-radius:54px;padding:13px 12px 12px;height:48px;cursor:pointer;width:100%;display:inline-block;box-sizing:border-box;text-align:center;white-space:nowrap}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .switch-button[_ngcontent-%COMP%]:first-child{margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .switch-button[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{margin-top:-2px;vertical-align:middle}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .switch-button[_ngcontent-%COMP%]   .rl-icon.undo[_ngcontent-%COMP%]{transform:scaleX(-1)}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .sig-style-1[_ngcontent-%COMP%]{font-family:Caveat}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .sig-style-2[_ngcontent-%COMP%]{font-family:Shadows Into Light Two}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .sig-style-3[_ngcontent-%COMP%]{font-family:Dancing Script}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .sig-style-4[_ngcontent-%COMP%]{font-family:Just Me Again Down Here}.modal-content[_ngcontent-%COMP%]   .cancel-left[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .cancel-top[_ngcontent-%COMP%]{margin-bottom:8px;display:block}.modal-content[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{position:relative;bottom:1px;right:2px}.terms-link[_ngcontent-%COMP%]{font-style:normal;font-weight:400;font-size:11px;line-height:15px;align-items:center;letter-spacing:.0125em;margin:8px 0 0}.terms-link[_ngcontent-%COMP%]     a{text-decoration:none}@media screen and (min-width: 480px){.modal-dialog[_ngcontent-%COMP%]{padding:22px 0 0}.modal-wrapper[_ngcontent-%COMP%]   .cancel-top[_ngcontent-%COMP%]{display:none}.modal-wrapper[_ngcontent-%COMP%]   .cancel-left[_ngcontent-%COMP%]{display:block}}@media screen and (min-width: 768px){.switch-button[_ngcontent-%COMP%]{display:inline-block;width:180px}}"],data:{animation:[P.Ic,P.i_]}})}return i})();const si=["signaturePad"],li=(i,r)=>({termsUrl:i,privacyPageUrl:r});function ci(i,r){if(1&i&&t._UZ(0,"p",35),2&i){const e=t.oxw(2);t.Q6J("comContent","initials-modal_terms-and-conditions-with-url")("params",t.WLB(2,li,e.termsUrl,e.privacyPageUrl))}}function di(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",11)(1,"label"),t._UZ(2,"com",9),t.qZA(),t.TgZ(3,"form",12,27),t.NdJ("submit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.saveDrawSign())}),t.TgZ(5,"div",14)(6,"div",28),t._UZ(7,"signature-pad",29,30),t.qZA(),t.TgZ(9,"div",19)(10,"div",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.switchColor())}),t._UZ(11,"span",21)(12,"com",9),t.qZA(),t.TgZ(13,"div",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clearPad())}),t._UZ(14,"span",32)(15,"com",33),t.qZA()()(),t.TgZ(16,"div",24)(17,"button",25),t._UZ(18,"com",9),t.qZA()(),t.YNc(19,ci,1,5,"p",34),t.qZA()()}if(2&i){const e=t.MAs(8),n=t.oxw();t.xp6(2),t.Q6J("key","initials-modal_prompt_draw"),t.xp6(5),t.Q6J("svgData",n.unsavedSvgData)("input",n.input),t.xp6(5),t.Q6J("key","initials-modal_switch_color"),t.xp6(3),t.Q6J("key","initials-modal_start_again"),t.xp6(2),t.ekj("disabled",n.isPadEmpty(e)),t.Q6J("disabled",n.isPadEmpty(e)),t.xp6(),t.Q6J("key","signature-modal_confirm"),t.xp6(),t.um2(19,n.isOwner()?-1:19)}}const mi=i=>({"over-limit":i});let gi=(()=>{class i extends Ce{constructor(e,n,o,a){super(e,n,o),this.modalControlService=e,this.store=n,this.activatedRoute=o,this.documentEl=a}ngOnInit(){this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(e=>this.onNavigate(e)),this.input.value&&(this.activeSigType="type"),this.input.valueType&&"IMAGE"===this.input.valueType&&(this.activeSigType="draw",this.unsavedSvgData=this.input.svgData,this.drawSignatureColor=this.input.font.color,setTimeout(()=>{this.signaturePad.switchColor("#2c39f9"===this.drawSignatureColor?"rgb(44, 57, 249)":"rgb(51, 51, 51)")},200))}ngOnDestroy(){this.destroy.next()}ngOnChanges(e){e.currentUserLegalName&&(this.initialsValue=("TEXT"===this.input.valueType?this.input.value:null)??e.currentUserLegalName.currentValue.match(/\b\w/g).join(""),this.initialsBaseValue=this.initialsValue),e.showModal&&this.setFontStyle()}onInput(){this.initialsValue=this.editableInput.nativeElement.innerText,(!this.initialsValue||!this.initialsValue.trim())&&(this.initialsValue=this.currentUserLegalName.match(/\b\w/g).join(""))}isInitialsValid(){return!(!this.initialsValue||!this.initialsValue.trim()||this.initialsValue.length<1)&&this.initialsValue.length<=4}isPadEmpty(e){return!e||!e.signaturePad||e.signaturePad.isEmpty()}confirmSignatureEditsAndTos(){if(!this.isInitialsValid())return;this.signatureModalSubmitted.emit(),this.modalControlService.close(c.G.CompletedSuccessfully);const e=this.initialsValue.trim(),n={color:this.typeInSignatureColor,type:"CAVEAT_REGULAR",sizeInPx:26,weight:"NORMAL_400"};"sig-style-1"==this.signatureStyle&&(n.type="CAVEAT_REGULAR"),"sig-style-2"==this.signatureStyle&&(n.type="SHADOWS_INTO_LIGHT_TWO"),"sig-style-3"==this.signatureStyle&&(n.type="DANCING_SCRIPT"),"sig-style-4"==this.signatureStyle&&(n.type="JUST_ME_AGAIN_DOWN_HERE");const{id:o}=this.input,{partyReference:a}=this.input;this.submitToStore({id:o,partyReference:a,font:n,value:e,type:this.input.type,valueType:"TEXT"})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e),t.Y36(x.y),t.Y36(Nt.gz),t.Y36(v.K0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["initials-modal"]],viewQuery:function(n,o){if(1&n&&t.Gf(si,5),2&n){let a;t.iGM(a=t.CRH())&&(o.signaturePad=a.first)}},features:[t.qOj,t.TTD],decls:39,vars:24,consts:[["product","sign"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"header-icon","rl-icon","toolbar-initial"],["translate",""],["rl-modal-header-widget","right"],[1,"modal-wrapper"],[1,"modal-content-wrapper"],[1,"signature-type-switch"],[1,"switch-button","signature-switch",3,"click"],[3,"key"],[1,"e2e_type-tab",3,"key"],[1,"modal-content"],[3,"submit"],["editSigForm","ngForm"],[1,"form-group"],["id","signature-input","required","","type","text","name","signature-input",1,"party-form-control",3,"ngClass","ngModel","ngModelChange"],["editableInput",""],[1,"char-counter"],[1,"counter-text",3,"ngClass"],[1,"control-wrapper"],[1,"switch-button","switch-color",3,"click"],[1,"rl-icon","color-change"],[1,"switch-button","switch-font",3,"click"],[1,"rl-icon","font-change"],[1,"bottom-buttons"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","modal-content"],["drawSigForm","ngForm"],["id","parentPadContainer",1,"signature-pad-container"],[3,"svgData","input"],["signaturePad",""],[1,"switch-button",3,"click"],[1,"rl-icon","start-again"],[1,"e2e_start-again",3,"key"],["class","terms-link","comLinkNewTab","",3,"comContent","params"],["comLinkNewTab","",1,"terms-link",3,"comContent","params"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal")(1,"rl-modal-header-branded",0)(2,"h1",1),t._UZ(3,"i",2),t.TgZ(4,"span",3),t._uU(5,"initials-modal_heading"),t.qZA()(),t._UZ(6,"rl-modal-header-close",4),t.qZA(),t.TgZ(7,"rl-modal-body")(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8),t.NdJ("click",function(){return o.switchSigType("draw")}),t._UZ(12,"com",9),t.qZA(),t.TgZ(13,"div",8),t.NdJ("click",function(){return o.switchSigType("type")}),t._UZ(14,"com",10),t.qZA()(),t.TgZ(15,"div",11)(16,"label"),t._UZ(17,"com",9),t.qZA(),t.TgZ(18,"form",12,13),t.NdJ("submit",function(){return o.confirmSignatureEditsAndTos()}),t.TgZ(20,"div",14)(21,"input",15,16),t.NdJ("ngModelChange",function(s){return o.initialsValue=s}),t.qZA(),t.TgZ(23,"div",17)(24,"div",18)(25,"span"),t._uU(26),t.qZA()()(),t.TgZ(27,"div",19)(28,"div",20),t.NdJ("click",function(){return o.switchColor()}),t._UZ(29,"span",21)(30,"com",9),t.qZA(),t.TgZ(31,"div",22),t.NdJ("click",function(){return o.switchFont()}),t._UZ(32,"span",23)(33,"com",9),t.qZA()()(),t.TgZ(34,"div",24)(35,"button",25),t._UZ(36,"com",9),t.qZA()()()(),t.YNc(37,di,20,10,"div",26),t.qZA()()(),t._UZ(38,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(11),t.ekj("active","draw"==o.activeSigType),t.xp6(),t.Q6J("key","initials-modal_select_draw_initials"),t.xp6(),t.ekj("active","type"==o.activeSigType),t.xp6(),t.Q6J("key","initials-modal_select_type_in_initials"),t.xp6(),t.ekj("hidden","draw"==o.activeSigType),t.xp6(2),t.Q6J("key","initials-modal_prompt"),t.xp6(4),t.Udp("color",o.typeInSignatureColor),t.Q6J("ngClass",o.signatureStyle)("ngModel",o.initialsValue),t.xp6(3),t.Q6J("ngClass",t.VKq(22,mi,o.initialsValue.length>4)),t.xp6(2),t.hij("",o.initialsValue.length,"/4"),t.xp6(4),t.Q6J("key","initials-modal_switch_color"),t.xp6(3),t.Q6J("key","initials-modal_switch_font"),t.xp6(2),t.ekj("disabled",!o.isInitialsValid()),t.Q6J("disabled",!o.isInitialsValid()),t.xp6(),t.Q6J("key","signature-modal_confirm"),t.xp6(),t.um2(37,"draw"==o.activeSigType?37:-1))},dependencies:[v.mk,J.w,mt.q,ue,g._Y,g.Fj,g.JJ,g.JL,g.Q7,g.On,g.F,h.Pi,_.zS,k,U,T,_.vP,A,S,b.tH,_e],styles:[".secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}.bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}[_nghost-%COMP%]     rl-modal-header{margin:0}[_nghost-%COMP%]     .rl-modal{padding:0}[_nghost-%COMP%]     .footer-container{margin:0 auto;padding-bottom:16px}.rl-icon.signature2[_ngcontent-%COMP%]{padding-right:8px;font-size:22px}.signature-type-switch[_ngcontent-%COMP%]{display:block}.signature-type-switch[_ngcontent-%COMP%]   .switch-button.signature-switch[_ngcontent-%COMP%]{font-size:16px;width:50%;text-align:center;height:50px;line-height:50px;cursor:pointer;color:#9da0ac;border:1px solid #9DA0AC;box-sizing:border-box;display:inline-block}.signature-type-switch[_ngcontent-%COMP%]   .switch-button.signature-switch.active[_ngcontent-%COMP%]{color:#fff;background-color:#3e3f4c}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;padding:24px 8px;width:100%;max-width:416px;box-sizing:border-box;margin:0 auto;padding:24px 8px 32px!important}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:24px 8px 40px}}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   span.rl-icon.dispute[_ngcontent-%COMP%]{top:6px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;resize:none;outline:none!important;font-size:16px;font-family:Open Sans;background-color:#f7f7f8;font-weight:400;margin-top:8px;padding:10px;border-radius:2px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border:1px solid #e62300}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .custom-text-caption[_ngcontent-%COMP%]{font-size:12px;clear:both}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;position:absolute;right:5px;bottom:5px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{width:100%;padding:0;margin-top:24px;display:flex;justify-content:space-between;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{width:100%;height:48px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse;height:48px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{flex:0 1 50%;height:100%;margin-right:8px;margin-bottom:0}}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:600;font-size:16px;line-height:20px;letter-spacing:.0125em;margin:16px 0 0}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]:first-child{margin-top:0}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .item-ref-label[_ngcontent-%COMP%]{display:block;height:33px;margin:20px 0;line-height:33px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   span.checkbox-check[_ngcontent-%COMP%]{margin-right:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:18px;position:relative}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .rl-icon.dispute[_ngcontent-%COMP%]{position:absolute;top:44px;right:12px;font-size:25px;color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;padding:15px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important;border-radius:2px;outline:0;box-sizing:border-box;background-color:#f7f7f8;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .party-form-control.disabled[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.disabled[_ngcontent-%COMP%]{pointer-events:none}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .party-form-control.invalid[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.invalid[_ngcontent-%COMP%]{box-shadow:0 2px #e62300,inset 1px 1px #e62300,inset -1px 1px #e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control.margin-top[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.margin-top[_ngcontent-%COMP%]{margin-top:6px}.modal-content[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{resize:none;height:120px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:12px;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-ref-label[_ngcontent-%COMP%]{display:block;height:33px;line-height:33px;cursor:pointer;max-width:calc(100% - 60px)}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:24px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   .doc-man-checkbox[_ngcontent-%COMP%]:before{font-size:14px;position:relative}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:14px;display:flex;flex-direction:row;align-items:center}.modal-content.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;display:block;width:100%;margin:0 auto}.modal-content.add-new[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0;color:#e62300;font-size:16px}.modal-content.hidden[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .signature-pad-container[_ngcontent-%COMP%]{margin-bottom:16px;width:100%}.modal-content[_ngcontent-%COMP%]   .signature-pad-container[_ngcontent-%COMP%]   signature-pad[_ngcontent-%COMP%]{display:block;width:100%}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:20px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.party-form-control[_ngcontent-%COMP%]{display:block;width:100%;font-size:22px;line-height:34px;padding:10px 10px 10px 15px;border-radius:2px;background-color:#fff;outline:0;margin-top:0;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{position:relative;height:15px;margin-bottom:16px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]   .counter-text[_ngcontent-%COMP%]{position:absolute;right:0;color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]   .counter-text.over-limit[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .switch-button[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--rl-action-primary-default, #d68021);border:1px solid var(--rl-action-primary-default, #d68021);background-color:#fff;border-radius:54px;padding:13px 12px 12px;height:48px;cursor:pointer;width:100%;display:inline-block;box-sizing:border-box;text-align:center;white-space:nowrap}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .switch-button[_ngcontent-%COMP%]:first-child{margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .switch-button[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{margin-top:-2px;vertical-align:middle}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .switch-button[_ngcontent-%COMP%]   .rl-icon.undo[_ngcontent-%COMP%]{transform:scaleX(-1)}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .sig-style-1[_ngcontent-%COMP%]{font-family:Caveat}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .sig-style-2[_ngcontent-%COMP%]{font-family:Shadows Into Light Two}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .sig-style-3[_ngcontent-%COMP%]{font-family:Dancing Script}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .sig-style-4[_ngcontent-%COMP%]{font-family:Just Me Again Down Here}.modal-content[_ngcontent-%COMP%]   .cancel-left[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .cancel-top[_ngcontent-%COMP%]{margin-bottom:8px;display:block}.modal-content[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{position:relative;bottom:1px;right:2px}.terms-link[_ngcontent-%COMP%]{font-style:normal;font-weight:400;font-size:11px;line-height:15px;align-items:center;letter-spacing:.0125em;margin:8px 0 0}.terms-link[_ngcontent-%COMP%]     a{text-decoration:none}@media screen and (min-width: 480px){.modal-dialog[_ngcontent-%COMP%]{padding:22px 0 0}.modal-wrapper[_ngcontent-%COMP%]   .cancel-top[_ngcontent-%COMP%]{display:none}.modal-wrapper[_ngcontent-%COMP%]   .cancel-left[_ngcontent-%COMP%]{display:block}}@media screen and (min-width: 768px){.switch-button[_ngcontent-%COMP%]{display:inline-block;width:180px}}.rl-icon.toolbar-initial[_ngcontent-%COMP%]{font-size:14px;padding-right:8px}"],data:{animation:[P.Ic,P.i_]}})}return i})();var et=u(9912),j=u(7865);let Me=(()=>{class i{constructor(e,n,o){this.translate=e,this.el=n,this.renderer=o}ngOnInit(){this.translate.get(this.placeholder,this.params).subscribe(e=>{this.renderer.setAttribute(this.el.nativeElement,"placeholder",this.extraText?e+" "+this.extraText:e)})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(h.sK),t.Y36(t.SBq),t.Y36(t.Qsj))};static#e=this.\u0275dir=t.lG2({type:i,selectors:[["","comPlaceholder",""]],inputs:{params:"params",placeholder:[t.lbL.None,"comPlaceholder","placeholder"],extraText:"extraText"}})}return i})(),pi=(()=>{class i{constructor(e,n,o){this.translate=e,this.el=n,this.renderer=o}ngOnInit(){this.translate.get(this.value).subscribe(e=>{this.renderer.setAttribute(this.el.nativeElement,"value",e)})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(h.sK),t.Y36(t.SBq),t.Y36(t.Qsj))};static#e=this.\u0275dir=t.lG2({type:i,selectors:[["","comValue",""]],inputs:{value:[t.lbL.None,"comValue","value"]}})}return i})();var z=u(5765);function ui(i,r){if(1&i&&(t.TgZ(0,"h5",8),t._UZ(1,"com",7),t.qZA()),2&i){const e=t.oxw();t.xp6(),t.Q6J("key",e.modalTextDefinitions.reasonLabel.key)("params",e.modalTextDefinitions.reasonLabel.params)}}function _i(i,r){if(1&i&&(t.TgZ(0,"option",16),t._UZ(1,"com",17),t.qZA()),2&i){const e=r.$implicit;t.Q6J("comValue",e.value),t.xp6(),t.Q6J("key",e.translation_key)}}function hi(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"select",15),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.selectedReason=o)}),t.SjG(1,_i,2,2,"option",16,t.x6l),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("ngModel",e.selectedReason),t.xp6(),t.wJu(e.actionReasons)}}function Ci(i,r){1&i&&t._UZ(0,"span",23)}const fe=i=>({"over-limit":i});function Mi(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",18)(1,"div")(2,"textarea",19),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.customMessage=o)}),t.qZA(),t.TgZ(3,"div",20)(4,"span"),t._uU(5),t.qZA()(),t.YNc(6,Ci,1,0,"span",21),t.qZA(),t.TgZ(7,"div",22),t._UZ(8,"com",17),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.ekj("invalid",(null==e.customMessage?null:e.customMessage.length)>2048),t.Q6J("ngModel",e.customMessage)("comPlaceholder","cancel-signing-modal_textarea-placeholder"),t.xp6(),t.Q6J("ngClass",t.VKq(9,fe,(null==e.customMessage?null:e.customMessage.length)>2048)),t.xp6(2),t.hij("",e.customMessage.length?e.customMessage.length:0,"/2049"),t.xp6(),t.um2(6,(null==e.customMessage?null:e.customMessage.length)>2048?6:-1),t.xp6(),t.Q6J("ngClass",t.VKq(11,fe,(null==e.customMessage?null:e.customMessage.length)>2048)),t.xp6(),t.Q6J("key","cancel-signing-modal_text-to-long")}}const ye=(i,r)=>({key:i,params:r});let Ft=(()=>{class i{constructor(e,n,o,a,s,l){this.store=e,this.alertService=n,this.translate=o,this.signService=a,this.messageService=s,this.modalControlService=l,this.onResolve=new t.vpe,this.actionInProgress=!1,this.selectedReason="none-selected",this.customMessage=""}ngOnInit(){this.actionReasons.forEach((e,n)=>{this.translate.get(e.translation_key).subscribe(o=>{this.actionReasons[n].translated=o})})}resolveAction(){const e=this.resolveReason();this.actionInProgress=!0,this.action(e).subscribe(n=>{(200==n||201==n)&&(this.alertService.setAlertMessage({message:this.modalTextDefinitions.alertSuccess.key,type:"success"}),this.actionInProgress=!1,this.reloadDocument(),this.hideModal())},n=>{!n.binderStatus||"SIGN_COMPLETED"!==n.binderStatus&&"IN_PREPARATION"!==n.binderStatus?(this.actionInProgress=!1,this.alertService.setAlertMessage({message:"document-action-modal_error-occured",type:"danger"})):(this.actionInProgress=!1,"SIGN_COMPLETED"===n.binderStatus&&this.alertService.addNotification({message:this.modalTextDefinitions.binderStatusConflict.key,type:"notification",autoClose:!0}),this.reloadDocument(),this.hideModal())})}reloadDocument(){const e=this.store.getState(),{binder:n}=e,o=(0,m.IB)(e);this.signService.getBinder(n.id,{fetchPages:!(0==o.length||"DECLINE_SIGNATURE"==this.typeOfAction),pagesSelectedToFetch:o,saveStore:!1},n).subscribe(s=>{this.store.dispatch((0,L.yf)(s)),this.messageService.sendEvent({eventName:"DECLINE_SIGNATURE"==this.typeOfAction?"SIGNER_DECLINED":"SIGNING_CANCELLED",binder:s,category:"SignEvent"}),$("html,body").animate({scrollTop:0},"slow")},()=>setTimeout(()=>location.reload(),5e3))}resolveReason(){if("none-selected"==this.selectedReason)return{reasonKey:this.selectedReason,message:""};if("other"==this.selectedReason)return{reasonKey:this.selectedReason,message:this.customMessage.replace(/"/g,"'")};const e=this.actionReasons.find(n=>n.value==this.selectedReason);return{reasonKey:this.selectedReason,message:e.translated}}hideModal(){this.actionInProgress||this.modalControlService.close(c.G.CompletedSuccessfully)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(R.c),t.Y36(h.sK),t.Y36(F.f),t.Y36(V.e),t.Y36(c.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["document-action-modal"]],inputs:{actionReasons:"actionReasons",typeOfAction:"typeOfAction",modalTextDefinitions:"modalTextDefinitions",action:"action"},outputs:{onResolve:"onResolve"},decls:22,vars:25,consts:[["fakePath","documentActionModal","rl-test","cancel-decline-sign"],["product","sign"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"header-icon","rl-icon","pencil"],["rl-modal-header-widget","right"],[1,"modal-dialog","modal-content"],[1,"dialog-headings","strong"],[3,"key","params"],[1,"dialog-headings"],["class","dialog-headings"],["name","reason","id","reason",3,"ngModel"],["class","custom-message"],[1,"bottom-buttons"],[1,"btn","btn-secondary",3,"click"],[3,"btnType","btnClass","defaultTranslation","loadingTranslation","isLoading","isDisabled","onClick"],["name","reason","id","reason",3,"ngModel","ngModelChange"],[3,"comValue"],[3,"key"],[1,"custom-message"],["name","custom-message","cols","20","rows","10",3,"ngModel","comPlaceholder","ngModelChange"],[1,"char-counter",3,"ngClass"],["class","rl-icon dispute"],[1,"text-length-error",3,"ngClass"],[1,"rl-icon","dispute"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._UZ(3,"i",3),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t._UZ(7,"rl-modal-header-close",4),t.qZA(),t.TgZ(8,"rl-modal-body")(9,"div",5)(10,"h2",6),t._UZ(11,"com",7),t.qZA(),t.TgZ(12,"h5",8),t._UZ(13,"com",7),t.qZA(),t.YNc(14,ui,2,2,"h5",9)(15,hi,3,1,"select",10)(16,Mi,9,13,"div",11),t.TgZ(17,"div",12)(18,"button",13),t.NdJ("click",function(){return o.hideModal()}),t._UZ(19,"com",7),t.qZA(),t.TgZ(20,"custom-button",14),t.NdJ("onClick",function(){return o.resolveAction()}),t.qZA()()()(),t._UZ(21,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(5),t.Oqu(t.xi3(6,16,o.modalTextDefinitions.modalHeader.key,o.modalTextDefinitions.modalHeader.params)),t.xp6(6),t.Q6J("key",o.modalTextDefinitions.heading.key)("params",o.modalTextDefinitions.heading.params),t.xp6(2),t.Q6J("key",o.modalTextDefinitions.explanation.key)("params",o.modalTextDefinitions.explanation.params),t.xp6(),t.um2(14,null!=o.modalTextDefinitions.reasonLabel&&o.modalTextDefinitions.reasonLabel.key?14:-1),t.xp6(),t.um2(15,0!=o.actionReasons.length?15:-1),t.xp6(),t.um2(16,"other"==o.selectedReason?16:-1),t.xp6(3),t.Q6J("key",o.modalTextDefinitions.secondaryCta.key)("params",o.modalTextDefinitions.secondaryCta.params),t.xp6(),t.Q6J("btnType","button")("btnClass","btn btn-primary e2e_primary-cta")("defaultTranslation",t.WLB(19,ye,o.modalTextDefinitions.primaryCta.key,o.modalTextDefinitions.primaryCta.params))("loadingTranslation",t.WLB(22,ye,o.modalTextDefinitions.primaryOngoingCta.key,o.modalTextDefinitions.primaryOngoingCta.params))("isLoading",o.actionInProgress)("isDisabled","other"==o.selectedReason&&o.customMessage.length>2048))},dependencies:[v.mk,J.w,Me,pi,g.YN,g.Kr,g.Fj,g.EJ,g.JJ,g.On,_.zS,k,U,T,_.vP,A,S,z.x,b.tH,O.$m,h.X$],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}[_nghost-%COMP%]     .footer-container{margin:0 auto;padding-bottom:16px}.modal-background[_ngcontent-%COMP%]{touch-action:auto;position:fixed;inset:0;z-index:7;width:100%;height:100%;border-radius:3px;background-color:#3339;transition:opacity .2s;opacity:0;visibility:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch;overflow-x:hidden;display:flex;align-items:center;justify-content:center;flex-direction:column}.modal-background.modal-show[_ngcontent-%COMP%], .modal-background.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.outer-wrapper[_ngcontent-%COMP%]{padding:16px;width:100%;box-sizing:border-box;margin:auto}.modal-wrapper[_ngcontent-%COMP%]{z-index:8;overflow-x:hidden;overflow-y:auto;background-color:#fff;border-radius:8px;width:100%;min-height:auto;height:auto;margin:0 auto;height:100%}@media screen and (min-width: 480px){.modal-wrapper[_ngcontent-%COMP%]{max-width:448px}}@media screen and (min-width: 768px){.modal-wrapper[_ngcontent-%COMP%]{max-width:560px}}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{font-weight:600;line-height:56px;height:56px;text-align:center;padding:0 40px;font-size:18px;background-color:#f2f1f1;position:relative}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{position:absolute;left:0;font-size:21px;margin-left:16px;cursor:pointer;color:#696a78}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{padding-right:8px}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{font-size:24px;top:-3px;position:relative}.modal-wrapper[_ngcontent-%COMP%]   .cancel-left[_ngcontent-%COMP%]{display:none}.modal-wrapper[_ngcontent-%COMP%]   .cancel-top[_ngcontent-%COMP%]{margin-bottom:24px;display:block}.modal-dialog[_ngcontent-%COMP%]{background-color:#fff;padding:15px 19px}.modal-dialog[_ngcontent-%COMP%]   .signature-heading[_ngcontent-%COMP%], .modal-dialog[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{display:block;margin-top:8px;margin-right:auto;margin-left:auto;font-size:22px;font-weight:300;text-align:center}@media (max-width: 480px){.modal-dialog[_ngcontent-%COMP%]   .signature-heading[_ngcontent-%COMP%], .modal-dialog[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{margin-top:17px}}.modal-dialog[_ngcontent-%COMP%]   .sig-cta-wrapper[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{margin-right:20px}@media screen and (min-width: 768px){.modal-dialog[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]{display:flex}.modal-dialog[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{width:100%}.modal-dialog[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]:first-child{padding-right:20px}.modal-dialog[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}.modal-dialog[_ngcontent-%COMP%]   .dialog-headings[_ngcontent-%COMP%]:first-child{margin-top:0;font-size:16px;font-weight:600}.modal-dialog[_ngcontent-%COMP%]   .dialog-headings[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:0;font-size:16px;font-weight:400}@media (min-width: 480px){.modal-dialog[_ngcontent-%COMP%]{padding:28px 56px}}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;padding:24px 8px;width:100%;max-width:416px;box-sizing:border-box;margin:0 auto;padding:24px 8px 0!important}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:24px 8px 40px}}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   span.rl-icon.dispute[_ngcontent-%COMP%]{top:6px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;resize:none;outline:none!important;font-size:16px;font-family:Open Sans;background-color:#f7f7f8;font-weight:400;margin-top:8px;padding:10px;border-radius:2px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border:1px solid #e62300}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .custom-text-caption[_ngcontent-%COMP%]{font-size:12px;clear:both}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;position:absolute;right:5px;bottom:5px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{width:100%;padding:0;margin-top:24px;display:flex;justify-content:space-between;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{width:100%;height:48px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse;height:48px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{flex:0 1 50%;height:100%;margin-right:8px;margin-bottom:0}}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:600;font-size:16px;line-height:20px;letter-spacing:.0125em;margin:16px 0 0}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]:first-child{margin-top:0}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .item-ref-label[_ngcontent-%COMP%]{display:block;height:33px;margin:20px 0;line-height:33px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   span.checkbox-check[_ngcontent-%COMP%]{margin-right:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:18px;position:relative}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .rl-icon.dispute[_ngcontent-%COMP%]{position:absolute;top:44px;right:12px;font-size:25px;color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;padding:15px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important;border-radius:2px;outline:0;box-sizing:border-box;background-color:#f7f7f8;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .party-form-control.disabled[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.disabled[_ngcontent-%COMP%]{pointer-events:none}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .party-form-control.invalid[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.invalid[_ngcontent-%COMP%]{box-shadow:0 2px #e62300,inset 1px 1px #e62300,inset -1px 1px #e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control.margin-top[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.margin-top[_ngcontent-%COMP%]{margin-top:6px}.modal-content[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{resize:none;height:120px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:12px;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-ref-label[_ngcontent-%COMP%]{display:block;height:33px;line-height:33px;cursor:pointer;max-width:calc(100% - 60px)}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:24px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   .doc-man-checkbox[_ngcontent-%COMP%]:before{font-size:14px;position:relative}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:14px;display:flex;flex-direction:row;align-items:center}.modal-content.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;display:block;width:100%;margin:0 auto}.modal-content.add-new[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0;color:#e62300;font-size:16px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{margin-top:16px}.modal-content[_ngcontent-%COMP%]   .csm-main-heading[_ngcontent-%COMP%]{line-height:30px;width:auto;margin-top:7px;margin-left:2%;padding-top:0;float:none;text-align:center;font-size:22px;font-weight:300}.modal-content[_ngcontent-%COMP%]   .csm-main-heading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;padding-right:8px;position:relative;top:5px}@media (max-width: 530px){.modal-content[_ngcontent-%COMP%]   .csm-main-heading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin:0 auto 5px}}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-top:30px}.modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{-webkit-appearance:menulist;margin-top:16px;border-radius:4px;height:50px;display:block;width:100%;padding:8px 12px;font-size:16px;line-height:normal;color:#333;background-color:#fff;border:1px solid #cccccc;background-image:linear-gradient(#fff 0,#f3f3f3);outline:none}.modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border:1px solid rgba(0,144,221,.53)}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{margin-top:16px}@media screen and (min-width: 768px){.modal-content[_ngcontent-%COMP%]   .csm-ctas[_ngcontent-%COMP%]{margin-top:0}}.modal-content[_ngcontent-%COMP%]   .csm-ctas[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .csm-ctas[_ngcontent-%COMP%]     custom-button .btn{width:100%}.modal-content[_ngcontent-%COMP%]   .csm-ctas[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{padding-left:35px;padding-right:35px}.modal-content[_ngcontent-%COMP%]   .csm-ctas[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .csm-ctas[_ngcontent-%COMP%]     custom-button .btn{padding-left:40px;padding-right:40px}@media (min-width: 480px){.modal-wrapper[_ngcontent-%COMP%]   .cancel-left[_ngcontent-%COMP%]{display:block}.modal-wrapper[_ngcontent-%COMP%]   .cancel-top[_ngcontent-%COMP%]{display:none}}@media (min-width: 768px){.modal-dialog[_ngcontent-%COMP%]   .send-invitations[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-dialog[_ngcontent-%COMP%]   .send-invitations[_ngcontent-%COMP%]     custom-button .btn{width:auto}.modal-dialog[_ngcontent-%COMP%]   .send-invitations[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%], .modal-dialog[_ngcontent-%COMP%]   .send-invitations[_ngcontent-%COMP%]     custom-button .btn.btn-secondary{margin-top:0;margin-right:24px}}"],data:{animation:[P.Ic,P.i_]}})}return i})(),Pe=(()=>{class i{constructor(e,n,o){this.store=e,this.signService=n,this.payService=o,this.closeModal=new t.vpe,this.onCancellationConfirmed=new t.vpe,this.cancelReasons=[{value:"none-selected",translation_key:"cancel-signing-modal_select-value-1"},{value:"error-contract",translation_key:"cancel-signing-modal_select-value-2"},{value:"changed-decision",translation_key:"cancel-signing-modal_select-value-3"},{value:"party-changed-decision",translation_key:"cancel-signing-modal_select-value-4"},{value:"other",translation_key:"cancel-signing-modal_select-value-5"}],this.modalTextDefinitions={modalHeader:{key:"cancel-signing-modal_modal-header"},heading:{key:"cancel-signing-modal_main-heading"},explanation:{key:"cancel-signing-modal_explanation"},reasonLabel:{key:"cancel-signing-modal_label-reason"},primaryCta:{key:"cancel-signing-modal_primary-cta"},primaryOngoingCta:{key:"cancel-signing-modal_cancelling"},secondaryCta:{key:"cancel-signing-modal_secondary-cta"},alertSuccess:{key:"cancel-signing-modal_cancelled-successfully-alert"},binderStatusConflict:{key:"cancel-signing-modal_binder-status-conflict"}},this.typeOfAction="CANCEL_SIGNING",this.doCancel=this.doCancel.bind(this)}doCancel(e){const n=this.store.getState(),o=n.binder.id,{paymentAgreement:a}=n;return this.onCancellationConfirmed.emit(),a&&"pending"==a.status?this.signService.cancelSigning(o,e.reasonKey,e.message).pipe((0,et.z)(s=>this.payService.setPaymentAgreementStatus(a.externalId,"draft").pipe((0,B.U)(()=>s)))):this.signService.cancelSigning(o,e.reasonKey,e.message)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(F.f),t.Y36(j.T))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["cancel-signing-modal"]],inputs:{show:"show"},outputs:{closeModal:"closeModal",onCancellationConfirmed:"onCancellationConfirmed"},decls:1,vars:4,consts:[[3,"actionReasons","modalTextDefinitions","action","typeOfAction"]],template:function(n,o){1&n&&t._UZ(0,"document-action-modal",0),2&n&&t.Q6J("actionReasons",o.cancelReasons)("modalTextDefinitions",o.modalTextDefinitions)("action",o.doCancel)("typeOfAction",o.typeOfAction)},dependencies:[Ft],data:{animation:[P.O4]}})}return i})(),fi=(()=>{class i extends Pe{constructor(e,n,o){super(e,n,o),this.store=e,this.signService=n,this.payService=o,this.modalTextDefinitions={modalHeader:{key:"remove-signature-modal_modal-header"},heading:{key:"remove-signature-modal_main-heading"},explanation:{key:"remove-signature-modal_explanation"},primaryCta:{key:"remove-signature-modal_primary-cta"},primaryOngoingCta:{key:"remove-signature-modal_cancelling"},secondaryCta:{key:"remove-signature-modal_secondary-cta"},alertSuccess:{key:"Your signature has been removed."},binderStatusConflict:{key:"cancel-signing-modal_binder-status-conflict"}},this.cancelReasons=[]}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(F.f),t.Y36(j.T))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["remove-signature-modal"]],features:[t.qOj],decls:1,vars:4,consts:[[3,"actionReasons","modalTextDefinitions","action","typeOfAction"]],template:function(n,o){1&n&&t._UZ(0,"document-action-modal",0),2&n&&t.Q6J("actionReasons",o.cancelReasons)("modalTextDefinitions",o.modalTextDefinitions)("action",o.doCancel)("typeOfAction",o.typeOfAction)},dependencies:[Ft],data:{animation:[P.O4]}})}return i})(),yi=(()=>{class i{constructor(e,n){this.store=e,this.signService=n,this.closeModal=new t.vpe,this.declineConfirmed=new t.vpe,this.declineReasons=[{value:"none-selected",translation_key:"decline-to-sign-modal_select-value-1"},{value:"error-contract",translation_key:"decline-to-sign-modal_select-value-2"},{value:"additional-information-required",translation_key:"decline-to-sign-modal_select-value-3"},{value:"other",translation_key:"decline-to-sign-modal_select-value-4"}],this.modalTextDefinitions={modalHeader:{key:"decline-to-sign-modal_modal-header"},heading:{key:"decline-to-sign-modal_main-heading"},explanation:{key:"decline-to-sign-modal_explanation"},reasonLabel:{key:"decline-to-sign-modal_label-reason",params:{name:this.getOwnerName()}},primaryCta:{key:"decline-to-sign-modal_primary-cta"},primaryOngoingCta:{key:"decline-to-sign-modal_declining"},secondaryCta:{key:"decline-to-sign-modal_secondary-cta"},alertSuccess:{key:"decline-to-sign-modal_alert-success"}},this.typeOfAction="DECLINE_SIGNATURE",this.doDecline=this.doDecline.bind(this)}ngOnChanges(e){e.docOwnerName&&(this.modalTextDefinitions.reasonLabel.params.name=this.getOwnerName())}getOwnerName(){return this.docOwnerName}doDecline(e){const n=this.store.getState().binder.id;return this.declineConfirmed.emit(),this.signService.declineSigning(n,e.reasonKey,e.message)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(F.f))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["decline-to-sign-modal"]],inputs:{docOwnerName:"docOwnerName",show:"show"},outputs:{closeModal:"closeModal",declineConfirmed:"declineConfirmed"},features:[t.TTD],decls:1,vars:4,consts:[[3,"actionReasons","modalTextDefinitions","action","typeOfAction"]],template:function(n,o){1&n&&t._UZ(0,"document-action-modal",0),2&n&&t.Q6J("actionReasons",o.declineReasons)("modalTextDefinitions",o.modalTextDefinitions)("action",o.doDecline)("typeOfAction",o.typeOfAction)},dependencies:[Ft],data:{animation:[P.O4]}})}return i})();var nt=u(6539);function Pi(i,r){1&i&&(t.TgZ(0,"span",28),t._UZ(1,"span",29)(2,"com",8),t.qZA()),2&i&&(t.xp6(2),t.Q6J("key","Manage-modal_manage-signers-status-declined"))}function xi(i,r){1&i&&(t.TgZ(0,"span",30),t._UZ(1,"span",31)(2,"com",8),t.qZA()),2&i&&(t.xp6(2),t.Q6J("key","Manage-modal_manage-signers-status-waiting"))}function bi(i,r){1&i&&(t.TgZ(0,"span",30),t._UZ(1,"span",32)(2,"com",8),t.qZA()),2&i&&(t.xp6(2),t.Q6J("key","Manage-modal_manage-signers-status-viewed"))}function Oi(i,r){1&i&&(t.TgZ(0,"span",30),t._UZ(1,"span",33)(2,"com",8),t.qZA()),2&i&&(t.xp6(2),t.Q6J("key","Manage-modal_manage-signers-status-signed"))}function vi(i,r){1&i&&(t.TgZ(0,"span",30),t._UZ(1,"span",34)(2,"com",8),t.qZA()),2&i&&(t.xp6(2),t.Q6J("key","Manage-modal_manage-signers-status-verified"))}function wi(i,r){1&i&&(t.TgZ(0,"span",35),t._UZ(1,"span",32)(2,"com",8),t.qZA()),2&i&&(t.xp6(2),t.Q6J("key","Manage-modal_manage-signers-status-viewed"))}function Ai(i,r){1&i&&(t.TgZ(0,"span",36),t._UZ(1,"span",33)(2,"com",8),t.qZA()),2&i&&(t.xp6(2),t.Q6J("key","Manage-modal_manage-signers-status-signed"))}function Ti(i,r){1&i&&(t.TgZ(0,"span",37),t._UZ(1,"span",38)(2,"com",8),t.qZA()),2&i&&(t.xp6(2),t.Q6J("key","Manage-modal_manage-signers-status-paid"))}function ki(i,r){1&i&&(t.TgZ(0,"span",39),t._UZ(1,"span",38)(2,"com",8),t.qZA()),2&i&&(t.xp6(2),t.Q6J("key","Manage-modal_manage-signers-status-collected"))}function Si(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18)(4,"span"),t._uU(5),t.qZA()(),t.TgZ(6,"div",19),t.YNc(7,Pi,3,1,"span",20)(8,xi,3,1,"span",21)(9,bi,3,1,"span",21)(10,Oi,3,1,"span",21)(11,vi,3,1,"span",21)(12,wi,3,1,"span",22)(13,Ai,3,1,"span",23)(14,Ti,3,1,"span",24)(15,ki,3,1,"span",25),t.qZA()(),t.TgZ(16,"div",26)(17,"div",27),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.sendReminder(a))}),t._UZ(18,"com",8),t.qZA()()()()}if(2&i){const e=r.$implicit,n=t.oxw();t.Udp("border",n.getPartyBorder(e)),t.Q6J("ngClass",n.getColorClass(e)),t.xp6(5),t.Oqu(e.email),t.xp6(2),t.um2(7,"DECLINED"==e.status?7:-1),t.xp6(),t.um2(8,"INVITED"==e.status?8:-1),t.xp6(),t.um2(9,e.roles.includes("VIEWER")||"VIEWED"!=e.status?-1:9),t.xp6(),t.um2(10,"SIGNED"==e.status&&(e.roles.includes("PAYEE")&&!n.paymentAgreement.identityVerified||e.roles.includes("PAYER")&&!n.paymentAgreement.paid)?10:-1),t.xp6(),t.um2(11,e.roles.includes("PAYEE")&&n.paymentAgreement.identityVerified?11:-1),t.xp6(),t.um2(12,e.roles.includes("VIEWER")&&"VIEWED"==e.status?12:-1),t.xp6(),t.um2(13,"SIGNED"!=e.status||e.roles.includes("PAYER")||e.roles.includes("PAYEE")?-1:13),t.xp6(),t.um2(14,n.paymentAgreement.paid&&e.roles.includes("PAYER")?14:-1),t.xp6(),t.um2(15,n.paymentAgreement.collected&&e.roles.includes("PAYEE")?15:-1),t.xp6(2),t.ekj("disabled",n.isReminderDisabled(e)),t.xp6(),t.Q6J("key","Manage-modal_manage-signers-send-reminder")}}let Zi=(()=>{class i{constructor(e,n,o,a,s,l){this.store=e,this.signService=n,this.alertService=o,this.documentEl=a,this.modalControlService=s,this.messageService=l,this.parties=[],this.inputs=[],this.paymentAgreement={paid:!1,identityVerified:!1,collected:!1},this.reminders=[],this.subscriptions=[],this.actionInProgress=!1;const d=this.store.getState();this.binder=this.store.getState().binder,this.binder&&this.setData(d);let p=this.store.subscribe(M=>{this.setData(M)});this.subscriptions.push(p)}setData(e){this.binder=e.binder,this.inputs=(0,m.sG)(e),this.parties=(0,m.yZ)(e).filter(n=>(0,m.jn)(n,"SIGNER"))}ngOnDestroy(){this.subscriptions.forEach(e=>e())}cancelBtnClick(){this.modalControlService.close(c.G.UserTerminated,{nextModal:"cancelSigningModal"})}clickModalBody(e){e.stopPropagation(),this.parties.forEach(n=>{n.showActionDropdown=!1})}sendReminder(e){if(this.isReminderDisabled(e))return!1;this.reminders.push(e.id),this.actionInProgress=!0,this.signService.sendReminder([e],this.binder.id).subscribe({complete:()=>{this.alertService.addSuccessAlert({message:{key:"Manage-modal_manage-signers-reminder-sent",params:{name:e.legalName}}}),this.reloadBinder(),this.actionInProgress=!1},error:()=>{this.alertService.addDangerAlert({message:{key:"Manage-modal_manage-signers-reminder-error",params:{name:e.legalName}}}),this.actionInProgress=!1}})}reloadBinder(){const e=this.store.getState(),{binder:n}=e;this.signService.getBinder(n.id,{fetchPages:!1,saveStore:!0},n).subscribe(o=>{this.messageService.sendEvent({eventName:"SIGNER_REMINDER_SENT",binder:o,category:"SignEvent"})},()=>setTimeout(()=>location.reload(),5e3))}removeViewer(e,n){e.stopPropagation(),n.showActionDropdown=!1,this.signService.removeViewer(n.id,this.binder.id).subscribe({complete:()=>{this.store.dispatch((0,nt.sQ)({id:n.id}))},error:()=>{this.alertService.setAlertMessage({message:"Manage-modal_manage-signers-remove-error",type:"danger"})}})}getColorClass(e){return(0,m.jn)(e,"VIEWER")?{ready:"VIEWED"==e.status,waiting:"INVITED"==e.status}:{ready:"SIGNED"==e.status,waiting:"INVITED"==e.status||"VIEWED"==e.status,declined:"DECLINED"==e.status}}getPartyColor(e){return e.metaData.style.background}getPartyBorder(e){return`1px solid ${e.metaData.style.background}`}isReminderDisabled(e){return!!((0,m.jn)(e,"OWNER")||this.reminders.includes(e.id)||(0,m.jn)(e,"VIEWER")&&"VIEWED"==e.status)||"SIGNED"===e.status}close(){this.modalControlService.close(c.G.UserTerminated)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(F.f),t.Y36(R.c),t.Y36(v.K0),t.Y36(c.e),t.Y36(V.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["manage-modal"]],inputs:{signingFinished:"signingFinished"},decls:22,vars:4,consts:[["fakePath","manage","rl-test","manage-modal"],["product","sign"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"header-icon","rl-icon","profile"],["translate",""],["rl-modal-header-widget","right"],[1,"modal-dialog","modal-content"],["rl-modal-body-part","heroText","rl-typography","bold",1,"bold-700"],[3,"key"],[1,"parties-container"],[1,"tip"],["key","Manage-modal_manage-signers-tip"],[1,"start-over"],[1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],[1,"party",3,"ngClass"],[1,"party-container"],[1,"details"],[1,"party-email"],[1,"party-status"],["class","declined"],["class","waiting"],["class","ready 1"],["class","ready 2"],["class","ready 3"],["class","ready 4"],[1,"party-buttons"],[1,"reminder-btn",3,"click"],[1,"declined"],[1,"rl-icon","red-cancel"],[1,"waiting"],[1,"rl-icon","clock2"],[1,"rl-icon","eye"],[1,"rl-icon","signed"],[1,"rl-icon","verified-icon"],[1,"ready","1"],[1,"ready","2"],[1,"ready","3"],[1,"rl-icon","card"],[1,"ready","4"],["class","party",3,"ngClass","border"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._UZ(3,"i",3),t.TgZ(4,"span",4),t._uU(5,"Manage-modal_manage-signers-heading"),t.qZA()(),t._UZ(6,"rl-modal-header-close",5),t.qZA(),t.TgZ(7,"rl-modal-body")(8,"div",6)(9,"p",7),t._UZ(10,"com",8),t.qZA(),t.TgZ(11,"div",9),t.SjG(12,Si,19,16,"div",40,t.x6l),t.TgZ(14,"section",10),t._UZ(15,"com",11),t.qZA()(),t.TgZ(16,"div",12)(17,"button",13),t.NdJ("click",function(){return o.close()}),t._UZ(18,"com",8),t.qZA(),t.TgZ(19,"button",14),t.NdJ("click",function(){return o.cancelBtnClick()}),t._UZ(20,"com",8),t.qZA()()()(),t._UZ(21,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(10),t.Q6J("key","Manage-modal_manage-signers-subheading"),t.xp6(2),t.wJu(o.parties),t.xp6(6),t.Q6J("key","Manage-modal_manage-signers-done"),t.xp6(),t.Q6J("disabled",o.signingFinished),t.xp6(),t.Q6J("key","Manage-modal_manage-signers-cancel-invites"))},dependencies:[v.mk,J.w,h.Pi,q,_.zS,k,U,T,_.vP,A,S,b.tH,O.$m],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}.modal-dialog[_ngcontent-%COMP%]{margin-top:24px}.rl-icon.profile[_ngcontent-%COMP%]{padding-right:8px;font-size:22px}.start-over[_ngcontent-%COMP%]{background-color:#fff;border-radius:0 0 8px 8px;display:flex;flex-direction:column}.start-over[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:0;margin-left:0;margin-bottom:8px}.parties-container[_ngcontent-%COMP%]{background:#fff;padding-bottom:12px}.parties-container[_ngcontent-%COMP%]   .party-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.parties-container[_ngcontent-%COMP%]   .party-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding-right:24px;min-width:0}.parties-container[_ngcontent-%COMP%]   .reminder[_ngcontent-%COMP%], .parties-container[_ngcontent-%COMP%]   .reminder-mobile[_ngcontent-%COMP%]{font-size:12px;color:#d68021;cursor:pointer}.parties-container[_ngcontent-%COMP%]   .reminder[_ngcontent-%COMP%]:hover, .parties-container[_ngcontent-%COMP%]   .reminder-mobile[_ngcontent-%COMP%]:hover{color:#e89338}.parties-container[_ngcontent-%COMP%]   .reminder.reminder-send-again[_ngcontent-%COMP%], .parties-container[_ngcontent-%COMP%]   .reminder-mobile.reminder-send-again[_ngcontent-%COMP%]{color:#900;cursor:auto}.parties-container[_ngcontent-%COMP%]   .reminder.reminder-send-again[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child, .parties-container[_ngcontent-%COMP%]   .reminder-mobile.reminder-send-again[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{cursor:pointer;color:#d68021}.parties-container[_ngcontent-%COMP%]   .reminder.reminder-send-again[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child:hover, .parties-container[_ngcontent-%COMP%]   .reminder-mobile.reminder-send-again[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child:hover{color:#e89338}.parties-container[_ngcontent-%COMP%]   .party[_ngcontent-%COMP%]{height:155px;box-sizing:border-box;border-radius:4px;padding:16px;background-color:#fff;position:relative;border-width:1px 1px 1px 8px!important}@media screen and (min-width: 480px){.parties-container[_ngcontent-%COMP%]   .party[_ngcontent-%COMP%]{padding:16px}}.parties-container[_ngcontent-%COMP%]   .party[_ngcontent-%COMP%]:not(:last-child){margin-bottom:16px}.parties-container[_ngcontent-%COMP%]   .party.ready[_ngcontent-%COMP%]   .party-status[_ngcontent-%COMP%]{color:#2fba6c}.parties-container[_ngcontent-%COMP%]   .party.waiting[_ngcontent-%COMP%]   .party-status[_ngcontent-%COMP%]{color:#f07800}.parties-container[_ngcontent-%COMP%]   .party.declined[_ngcontent-%COMP%]   .party-status[_ngcontent-%COMP%]{color:#e62300}.parties-container[_ngcontent-%COMP%]   .party-status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}.parties-container[_ngcontent-%COMP%]   .party-status[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{margin-bottom:5px}.parties-container[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]{height:100%;width:8px;position:absolute;border-radius:4px 0 0 4px;left:0;top:0}.parties-container[_ngcontent-%COMP%]   .party-email[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:600;font-size:16px;line-height:20px;padding-bottom:16px}@media screen and (min-width: 480px){.parties-container[_ngcontent-%COMP%]   .party-email[_ngcontent-%COMP%]{font-size:16px}}.parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]{font-size:16px;line-height:20px;color:#696a78;margin-top:16px}.parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .reminder-btn[_ngcontent-%COMP%], .parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .delete-btn-container[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;white-space:nowrap}.parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .reminder-btn[_ngcontent-%COMP%]:first-child, .parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .delete-btn-container[_ngcontent-%COMP%]:first-child{cursor:pointer;padding:12px;border:1px solid #696A78;border-radius:4px}.parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .reminder-btn.disabled[_ngcontent-%COMP%], .parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .delete-btn-container.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.3}.sig-cta-wrapper[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{margin-right:20px}@media screen and (min-width: 480px){.parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:row;align-items:center}.start-over[_ngcontent-%COMP%]{flex-direction:column}.start-over[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.start-over[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{margin-bottom:8px}}@media (min-width: 768px){.alert-body[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{margin:10px 10px 0 30px}.alert-body[_ngcontent-%COMP%]   .alert-close[_ngcontent-%COMP%]{margin:10px 30px 0 10px}}"],data:{animation:[P.Ic,P.i_]}})}return i})();function Ei(i,r){1&i&&(t.TgZ(0,"p",14),t._UZ(1,"com",8),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","manage-viewers-modal_walkthrough"))}function Ii(i,r){1&i&&(t.TgZ(0,"p",14),t._UZ(1,"com",8),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","manage-viewers-modal_walkthrough-no-parties"))}function Di(i,r){1&i&&(t.TgZ(0,"span",27),t._UZ(1,"span",28)(2,"com",8),t.qZA()),2&i&&(t.xp6(2),t.Q6J("key","manage-viewers-modal_status-viewed"))}function Ni(i,r){1&i&&(t.TgZ(0,"span",29),t._UZ(1,"span",30)(2,"com",8),t.qZA()),2&i&&(t.xp6(2),t.Q6J("key","manage-viewers-modal_status-not-viewed"))}function Ri(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18)(4,"span"),t._uU(5),t.qZA()(),t.TgZ(6,"div",19),t.YNc(7,Di,3,1,"span",20)(8,Ni,3,1,"span",21),t.qZA()(),t.TgZ(9,"div",22)(10,"div",23),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.sendReminder(a))}),t._UZ(11,"com",8),t.qZA(),t.TgZ(12,"div",24)(13,"span",25),t.NdJ("click",function(o){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.removeViewer(o,s))}),t.qZA()()()(),t.TgZ(14,"div",26)(15,"span",25),t.NdJ("click",function(o){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.removeViewer(o,s))}),t.qZA()()()}if(2&i){const e=r.$implicit,n=t.oxw();t.Udp("border",n.getPartyBorder(e)),t.Q6J("ngClass",n.getColorClass(e)),t.xp6(5),t.Oqu(e.email),t.xp6(2),t.um2(7,"INVITED"!=e.status?7:-1),t.xp6(),t.um2(8,"INVITED"==e.status?8:-1),t.xp6(2),t.ekj("hide","SIGN_IN_PROGRESS"!=n.binder.status)("disabled",n.isReminderDisabled(e)),t.xp6(),t.Q6J("key","Manage-modal_manage-signers-send-reminder")}}let Fi=(()=>{class i{constructor(e,n,o,a,s,l){this.store=e,this.signService=n,this.alertService=o,this.modalControlService=a,this.documentEl=s,this.messageService=l,this.showModal=!0,this.closeModal=new t.vpe,this.startAction=new t.vpe,this.parties=[],this.reminders=[],this.subscriptions=[],this.reminderBtnsDisabled=!1,this.destroy=new w.x;let d=this.store.getState();this.binder=this.store.getState().get("binder"),this.binder&&this.setData(d);let p=this.store.subscribe(M=>{this.setData(M)});this.subscriptions.push(p)}setData(e){this.binder=e.get("binder"),this.parties=(0,m.yZ)(e).filter(n=>(0,m.jn)(n,"VIEWER")),this.reminderBtnsDisabled=e.get("reminderSentToAllViewers")}ngOnInit(){this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(e=>this.onNavigate(e))}onNavigate({data:e}){"back"===e.to&&this.modalControlService.close(c.G.UserNavigatedBack,{nextModal:this.returnRoute})}ngOnDestroy(){this.subscriptions.forEach(e=>e()),this.destroy.next()}removeViewer(e,n){e.stopPropagation(),n.showActionDropdown=!1,this.signService.removeViewer(n.id,this.binder.id).subscribe({complete:()=>{this.store.dispatch((0,nt.sQ)({id:n.id})),this.signService.getBinder(this.binder.id,{fetchPages:!1}).subscribe(o=>{this.messageService.sendEvent({eventName:"VIEWER_REMOVED",binder:o,category:"SignEvent"})})},error:()=>{this.alertService.setAlertMessage({message:"manage-viewers-modal_remove-error",type:"danger"})}})}close(){this.closeModal.emit()}gotoInviteViewersModal(){this.closeModal.emit(),this.startAction.emit("invite-viewers-modal")}getColorClass(e){return(0,m.jn)(e,"VIEWER")?{ready:"VIEWED"==e.status,waiting:"INVITED"==e.status}:{ready:"SIGNED"==e.status,waiting:"INVITED"==e.status||"VIEWED"==e.status,declined:"DECLINED"==e.status}}getPartyColor(e){return e.metaData.style.background}getPartyBorder(e){return`solid ${e.metaData.style.background}`}sendReminder(e){if(this.isReminderDisabled(e))return!1;let n=e.legalName;this.reminders.push(e.id),this.signService.sendReminder([e],this.binder.id).subscribe({complete:()=>{this.alertService.setAlertMessage({message:"manage-viewers-modal_reminder-sent",type:"success",params:{name:n}}),this.reloadBinder()},error:()=>{this.alertService.setAlertMessage({message:"manage-viewers-modal_reminder-error",type:"danger",params:{name:n}})}})}sendReminderToAll(){this.signService.sendReminder(this.parties,this.binder.id).subscribe({complete:()=>{this.store.dispatch((0,H.uI)(!0)),this.reloadBinder(),this.alertService.setAlertMessage({message:"manage-viewers-modal_reminder-sent-to-all",type:"success"})},error:()=>{this.alertService.setAlertMessage({message:"manage-viewers-modal_reminder-error",type:"danger"})}})}reloadBinder(){const e=this.store.getState(),{binder:n}=e;this.signService.getBinder(n.id,{fetchPages:!1,saveStore:!0},n).subscribe(o=>{this.messageService.sendEvent({eventName:"VIEWER_REMINDER_SENT",binder:o,category:"SignEvent"})},()=>setTimeout(()=>location.reload(),5e3))}isReminderDisabled(e){return!(!this.reminderBtnsDisabled&&!this.reminders.includes(e.id))||(0,m.jn)(e,"VIEWER")&&"VIEWED"==e.status}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(F.f),t.Y36(R.c),t.Y36(c.e),t.Y36(v.K0),t.Y36(V.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["manage-viewers-modal"]],inputs:{showModal:"showModal"},outputs:{closeModal:"closeModal",startAction:"startAction"},decls:22,vars:9,consts:[["fakePath","manageViewers","rl-test","manage-viewers-modal"],["product","sign"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"header-icon","rl-icon","share"],["translate",""],["rl-modal-header-widget","right"],[1,"modal-dialog","modal-content"],["rl-modal-body-part","heroText","rl-typography","bold",1,"bold-700"],[3,"key"],["class","walkthrough-text"],[1,"parties-container"],[1,"bottom-buttons"],["rl-test","send-reminder-all",1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"walkthrough-text"],[1,"party",3,"ngClass"],[1,"party-container"],[1,"details"],[1,"party-email"],[1,"party-status"],["class","waiting"],["class","ready"],[1,"party-buttons"],[1,"reminder-btn",3,"click"],[1,"delete-btn-container","delete-btn-desktop"],[1,"rl-icon","trash-bin",3,"click"],[1,"delete-btn-container","delete-btn-mobile"],[1,"waiting"],[1,"rl-icon","doc-viewed"],[1,"ready"],[1,"rl-icon","doc-unviewed"],["class","party",3,"ngClass","border"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._UZ(3,"i",3),t.TgZ(4,"span",4),t._uU(5,"manage-viewers-modal_heading"),t.qZA()(),t._UZ(6,"rl-modal-header-close",5),t.qZA(),t.TgZ(7,"rl-modal-body")(8,"div",6)(9,"p",7),t._UZ(10,"com",8),t.qZA(),t.YNc(11,Ei,2,1,"p",9)(12,Ii,2,1,"p",9),t.TgZ(13,"div",10),t.SjG(14,Ri,16,11,"div",31,t.x6l),t.qZA(),t.TgZ(16,"div",11)(17,"button",12),t.NdJ("click",function(){return o.sendReminderToAll()}),t._UZ(18,"com",8),t.qZA(),t.TgZ(19,"button",13),t.NdJ("click",function(){return o.gotoInviteViewersModal()}),t._UZ(20,"com",8),t.qZA()()()(),t._UZ(21,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(10),t.Q6J("key","manage-viewers-modal_subheading"),t.xp6(),t.um2(11,0!=o.parties.length?11:-1),t.xp6(),t.um2(12,0==o.parties.length?12:-1),t.xp6(2),t.wJu(o.parties),t.xp6(3),t.ekj("disabled",o.reminderBtnsDisabled)("hide","SIGN_IN_PROGRESS"!=o.binder.status||0==o.parties.length),t.xp6(),t.Q6J("key","manage-viewers-modal_action-invite-all"),t.xp6(2),t.Q6J("key","manage-viewers-modal_action-invite-new"))},dependencies:[v.mk,J.w,h.Pi,q,_.zS,k,U,T,_.vP,A,S,b.tH,O.$m],styles:[".modal-dialog[_ngcontent-%COMP%]{margin-top:24px}.rl-icon.profile[_ngcontent-%COMP%]{padding-right:8px;font-size:22px}.start-over[_ngcontent-%COMP%]{background-color:#fff;border-radius:0 0 8px 8px;display:flex;flex-direction:column}.start-over[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:0;margin-left:0;margin-bottom:8px}.parties-container[_ngcontent-%COMP%]   .party[_ngcontent-%COMP%]{height:155px;box-sizing:border-box;border-radius:4px;padding:16px;background-color:#fff;position:relative;border-width:1px 1px 1px 8px!important}@media screen and (min-width: 480px){.parties-container[_ngcontent-%COMP%]   .party-email[_ngcontent-%COMP%]{font-size:16px}}.parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .reminder-btn.disabled[_ngcontent-%COMP%], .parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .delete-btn-container.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.3}.sig-cta-wrapper[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{margin-right:20px}@media screen and (min-width: 480px){.parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:row;align-items:center}.start-over[_ngcontent-%COMP%]{flex-direction:column}.start-over[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.start-over[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{margin-bottom:8px}}@media (min-width: 768px){.alert-body[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{margin:10px 10px 0 30px}.alert-body[_ngcontent-%COMP%]   .alert-close[_ngcontent-%COMP%]{margin:10px 30px 0 10px}}.rl-icon.share[_ngcontent-%COMP%]{font-size:26px;padding-right:8px}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;padding:24px 8px;width:100%;max-width:416px;box-sizing:border-box;margin:0 auto}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:24px 8px 40px}}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   span.rl-icon.dispute[_ngcontent-%COMP%]{top:6px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;resize:none;outline:none!important;font-size:16px;font-family:Open Sans;background-color:#f7f7f8;font-weight:400;margin-top:8px;padding:10px;border-radius:2px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border:1px solid #e62300}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .custom-text-caption[_ngcontent-%COMP%]{font-size:12px;clear:both}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;position:absolute;right:5px;bottom:5px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{width:100%;padding:0;margin-top:24px;display:flex;justify-content:space-between;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{width:100%;height:48px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse;height:48px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{flex:0 1 50%;height:100%;margin-right:8px;margin-bottom:0}}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:600;font-size:16px;line-height:20px;letter-spacing:.0125em;margin:16px 0 0}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]:first-child{margin-top:0}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .item-ref-label[_ngcontent-%COMP%]{display:block;height:33px;margin:20px 0;line-height:33px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   span.checkbox-check[_ngcontent-%COMP%]{margin-right:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:18px;position:relative}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .rl-icon.dispute[_ngcontent-%COMP%]{position:absolute;top:44px;right:12px;font-size:25px;color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;padding:15px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important;border-radius:2px;outline:0;box-sizing:border-box;background-color:#f7f7f8;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .party-form-control.disabled[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.disabled[_ngcontent-%COMP%]{pointer-events:none}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .party-form-control.invalid[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.invalid[_ngcontent-%COMP%]{box-shadow:0 2px #e62300,inset 1px 1px #e62300,inset -1px 1px #e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control.margin-top[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.margin-top[_ngcontent-%COMP%]{margin-top:6px}.modal-content[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{resize:none;height:120px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:12px;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-ref-label[_ngcontent-%COMP%]{display:block;height:33px;line-height:33px;cursor:pointer;max-width:calc(100% - 60px)}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:24px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   .doc-man-checkbox[_ngcontent-%COMP%]:before{font-size:14px;position:relative}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:14px;display:flex;flex-direction:row;align-items:center}.modal-content.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;display:block;width:100%;margin:0 auto}.modal-content.add-new[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0;color:#e62300;font-size:16px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding-top:24px}}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:column-reverse;height:auto}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{margin-top:8px}.modal-content[_ngcontent-%COMP%]   .walkthrough-text[_ngcontent-%COMP%]{text-align:center;line-height:20px;font-size:16px;font-weight:400;margin-top:0;margin-bottom:24px}.parties-container[_ngcontent-%COMP%]{background:#fff;padding-bottom:12px}.parties-container[_ngcontent-%COMP%]   .party-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.parties-container[_ngcontent-%COMP%]   .party-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding-right:24px;min-width:0}.parties-container[_ngcontent-%COMP%]   .reminder[_ngcontent-%COMP%], .parties-container[_ngcontent-%COMP%]   .reminder-mobile[_ngcontent-%COMP%]{font-size:12px;color:#d68021;cursor:pointer}.parties-container[_ngcontent-%COMP%]   .reminder[_ngcontent-%COMP%]:hover, .parties-container[_ngcontent-%COMP%]   .reminder-mobile[_ngcontent-%COMP%]:hover{color:#e89338}.parties-container[_ngcontent-%COMP%]   .reminder.reminder-send-again[_ngcontent-%COMP%], .parties-container[_ngcontent-%COMP%]   .reminder-mobile.reminder-send-again[_ngcontent-%COMP%]{color:#900;cursor:auto}.parties-container[_ngcontent-%COMP%]   .reminder.reminder-send-again[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child, .parties-container[_ngcontent-%COMP%]   .reminder-mobile.reminder-send-again[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{cursor:pointer;color:#d68021}.parties-container[_ngcontent-%COMP%]   .reminder.reminder-send-again[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child:hover, .parties-container[_ngcontent-%COMP%]   .reminder-mobile.reminder-send-again[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child:hover{color:#e89338}.parties-container[_ngcontent-%COMP%]   .party[_ngcontent-%COMP%]{border-radius:4px;padding:16px;background-color:#fff;position:relative;border-width:1px 1px 1px 8px!important}@media screen and (min-width: 480px){.parties-container[_ngcontent-%COMP%]   .party[_ngcontent-%COMP%]{padding:16px}}.parties-container[_ngcontent-%COMP%]   .party[_ngcontent-%COMP%]:not(:last-child){margin-bottom:16px}.parties-container[_ngcontent-%COMP%]   .party.ready[_ngcontent-%COMP%]   .party-status[_ngcontent-%COMP%]{color:#2fba6c}.parties-container[_ngcontent-%COMP%]   .party.waiting[_ngcontent-%COMP%]   .party-status[_ngcontent-%COMP%]{color:#f07800}.parties-container[_ngcontent-%COMP%]   .party.declined[_ngcontent-%COMP%]   .party-status[_ngcontent-%COMP%]{color:#e62300}.parties-container[_ngcontent-%COMP%]   .party-status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}.parties-container[_ngcontent-%COMP%]   .party-status[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{margin-bottom:5px}.parties-container[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]{height:100%;width:8px;position:absolute;border-radius:4px 0 0 4px;left:0;top:0}.parties-container[_ngcontent-%COMP%]   .party-email[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:600;font-size:16px;line-height:20px;padding-bottom:16px}@media screen and (min-width: 480px){.parties-container[_ngcontent-%COMP%]   .party-email[_ngcontent-%COMP%]{padding-bottom:0;font-size:16px}}.parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]{font-size:16px;line-height:20px;color:#696a78;margin-top:16px}.parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .reminder-btn[_ngcontent-%COMP%], .parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .delete-btn-container[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;white-space:nowrap}.parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .reminder-btn[_ngcontent-%COMP%]:first-child, .parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .delete-btn-container[_ngcontent-%COMP%]:first-child{cursor:pointer;padding:12px;border:1px solid #696A78;border-radius:4px}.parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .reminder-btn.disabled[_ngcontent-%COMP%], .parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .delete-btn-container.disabled[_ngcontent-%COMP%]{opacity:.3}.party[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.party[_ngcontent-%COMP%]   .rl-icon.trash-bin[_ngcontent-%COMP%]{font-size:20px}.party[_ngcontent-%COMP%]   .delete-btn-container[_ngcontent-%COMP%]{line-height:20px;color:#696a78;cursor:pointer}.party[_ngcontent-%COMP%]   .party-container[_ngcontent-%COMP%]{overflow:hidden}.party[_ngcontent-%COMP%]   .party-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .delete-btn-desktop[_ngcontent-%COMP%]{display:none}.btn-group[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{display:block;width:100%;margin:0 0 8px}@media screen and (min-width: 480px){.party[_ngcontent-%COMP%]{display:block}.party[_ngcontent-%COMP%]   .delete-btn-mobile[_ngcontent-%COMP%]{display:none}.party[_ngcontent-%COMP%]   .party-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]   .delete-btn-desktop[_ngcontent-%COMP%]{display:block;margin-left:16px}.btn-group[_ngcontent-%COMP%]{display:flex;flex-direction:row}.btn-group[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{margin:0 8px 0 0}}.hide[_ngcontent-%COMP%]{display:none!important}.bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}.modal-background[_ngcontent-%COMP%]{touch-action:auto;position:fixed;inset:0;z-index:7;width:100%;height:100%;border-radius:3px;background-color:#3339;transition:opacity .2s;opacity:0;visibility:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch;overflow-x:hidden;display:flex;align-items:center;justify-content:center;flex-direction:column}.modal-background.modal-show[_ngcontent-%COMP%], .modal-background.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.outer-wrapper[_ngcontent-%COMP%]{padding:16px;width:100%;box-sizing:border-box;margin:auto}.modal-wrapper[_ngcontent-%COMP%]{z-index:8;overflow-x:hidden;overflow-y:auto;background-color:#fff;border-radius:8px;width:100%;min-height:auto;height:auto;margin:0 auto}@media screen and (min-width: 480px){.modal-wrapper[_ngcontent-%COMP%]{max-width:448px}}@media screen and (min-width: 768px){.modal-wrapper[_ngcontent-%COMP%]{max-width:560px}}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{font-weight:600;line-height:56px;height:56px;text-align:center;padding:0 40px;font-size:18px;background-color:#f2f1f1;position:relative}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{position:absolute;left:0;font-size:21px;margin-left:16px;cursor:pointer;color:#696a78}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{padding-right:8px}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{font-size:21px;top:-3px;position:relative}.modal-wrapper[_ngcontent-%COMP%]   .start-over[_ngcontent-%COMP%]{background-color:#fff;border-radius:0 0 8px 8px;display:flex;flex-direction:column}.modal-wrapper[_ngcontent-%COMP%]   .start-over[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:0;margin-left:0}@media screen and (min-width: 480px){.modal-wrapper[_ngcontent-%COMP%]   .start-over[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:auto}.modal-wrapper[_ngcontent-%COMP%]   .start-over[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{margin-bottom:0!important}}.modal-dialog[_ngcontent-%COMP%]{box-sizing:border-box;background:#fff;padding:24px 8px 0}.modal-dialog[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{font-weight:600;line-height:56px;height:56px;text-align:center;padding:0 40px;font-size:18px;background-color:#f2f1f1;position:relative}.modal-dialog[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{position:absolute;left:0;font-size:21px;margin-left:16px;cursor:pointer;color:#696a78}.modal-dialog[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{padding-right:8px}.modal-dialog[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{font-size:21px;top:-3px;position:relative}@media screen and (min-width: 480px){.parties-container[_ngcontent-%COMP%]   .party-container[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between}.parties-container[_ngcontent-%COMP%]   .party[_ngcontent-%COMP%]{height:auto}.parties-container[_ngcontent-%COMP%]   .party-buttons[_ngcontent-%COMP%]{justify-content:flex-end;flex:1;margin-top:0;display:flex;flex-direction:row;align-items:center}.modal-wrapper[_ngcontent-%COMP%]   .start-over[_ngcontent-%COMP%]{flex-direction:row}.modal-wrapper[_ngcontent-%COMP%]   .start-over[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.modal-wrapper[_ngcontent-%COMP%]   .start-over[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{margin-right:8px}}@media (min-width: 768px){.modal-wrapper[_ngcontent-%COMP%]{height:auto;min-height:0;border-radius:8px}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.alert-body[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{margin:10px 10px 0 30px}.alert-body[_ngcontent-%COMP%]   .alert-close[_ngcontent-%COMP%]{margin:10px 30px 0 10px}}"],data:{animation:[P.Ic,P.i_]}})}return i})();var Ut=u(4300),gt=u(5616),Ui=u(7455),it=u(8037),Ct=u(3246);function qt(i,r){i._forEachChild(r)}function Tt(i){return r=>this.submitted?i(r):null}const Mt=function qi(i){return class extends i{get submitted(){return this._submitted}constructor(...e){super(...e),this._submitted=!1,this.setValidators(this.validator)}markAsNotSubmitted(){this._submitted=!1,this.updateValueAndValidity({emitEvent:!1,onlySelf:!1})}markAsSubmitted(){this._submitted=!0,this.updateValueAndValidity({emitEvent:!1,onlySelf:!1}),this.valueChanges.pipe((0,dt.q)(1)).subscribe(()=>this.markAsNotSubmitted())}setValidators(e){null===e?super.setValidators(null):Array.isArray(e)?super.setValidators(e.map(Tt,this)):super.setValidators(Tt.call(this,e))}}}(g.p4),Jt=function Ji(i){return class extends i{get submitted(){return this._submitted}constructor(...e){super(...e),this._submitted=!1,this.setValidators(this.validator)}markAsNotSubmitted(e){if(this._submitted=!1,!e||!e.onlySelf){const n=o=>{o.markAsNotSubmitted&&o.markAsNotSubmitted({onlySelf:!1}),qt(o,n)};qt(this,n)}this.updateValueAndValidity({emitEvent:!1,onlySelf:!1})}markAsSubmitted(e){this._submitted=!0,(!e||!e.onlySelf)&&qt(this,o=>{o.markAsSubmitted&&o.markAsSubmitted({onlySelf:!1})}),this.updateValueAndValidity({emitEvent:!1,onlySelf:!1})}setValidators(e){null===e?super.setValidators(null):Array.isArray(e)?super.setValidators(e.map(Tt,this)):super.setValidators(Tt.call(this,e))}}}(g.nJ);var rt=u(2277);const zi=["label"],Hi=["messages"],Bi=[[["","data-label",""]],[["","data-control",""]],[["","data-messages",""]]],Li=["[data-label]","[data-control]","[data-messages]"],kt="rl-input";let zt=(()=>{class i{get controlClassnames(){return(0,I.PH)(kt,"control",this.state)}get dirty(){return this.ngControl&&this.ngControl.dirty}get disabled(){return this.ngControl&&this.ngControl.disabled}get invalid(){return this.ngControl&&this.ngControl.invalid&&(this.dirty||this.touched)}get labelClassnames(){return(0,I.PH)(kt,"label",this.state)}get messagesClassnames(){return(0,I.PH)(kt,"messages",this.state)}get messagesID(){return`${this.id}-messages`}get pending(){return this.ngControl&&this.ngControl.pending}get pristine(){return this.ngControl&&this.ngControl.pristine}get rootClassnames(){return(0,I.PH)(kt,this.state)}get state(){return{dirty:this.dirty,disabled:this.disabled,invalid:this.invalid,pending:this.pending,pristine:this.pristine,touched:this.touched}}get touched(){return this.ngControl&&this.ngControl.touched}constructor(e){e&&(e.valueAccessor=this,this.ngControl=e)}checkID(e){if((this.labelRef||this.messagesRef)&&!e)throw new TypeError(`The input "control-id" is required when ${this.constructor.name} is used with a label or description`)}ngOnChanges({id:e}){e&&this.checkID(e.currentValue)}ngOnInit(){this.checkID(this.id)}showErrorMessage(e,n=[],o=this.ngControl){if(o){const{dirty:a,errors:s,touched:l}=o;return!(!s||!s[e]||!a&&!l||n.find(d=>!!s[d]))}return!1}registerOnChange(e){}registerOnTouched(e){}setDisabledState(e){}writeValue(e){}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(g.a5,10))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rlng-input"]],contentQueries:function(n,o,a){if(1&n&&(t.Suo(a,zi,5),t.Suo(a,Hi,5)),2&n){let s;t.iGM(s=t.CRH())&&(o.labelRef=s.first),t.iGM(s=t.CRH())&&(o.messagesRef=s.first)}},inputs:{id:[t.lbL.None,"control-id","id"]},features:[t.TTD],ngContentSelectors:Li,decls:7,vars:10,consts:[["rl-typography","bold",3,"htmlFor"],["rl-typography","","aria-live","polite",3,"id"]],template:function(n,o){1&n&&(t.F$t(Bi),t.TgZ(0,"div")(1,"label",0),t.Hsn(2),t.qZA(),t.TgZ(3,"div"),t.Hsn(4,1),t.qZA(),t.TgZ(5,"div",1),t.Hsn(6,2),t.qZA()()),2&n&&(t.Tol(o.rootClassnames),t.xp6(),t.Tol(o.labelClassnames),t.Q6J("htmlFor",o.id),t.xp6(2),t.Tol(o.controlClassnames),t.xp6(2),t.Tol(o.messagesClassnames),t.Q6J("id",o.messagesID))},styles:[".rl-input__label[_ngcontent-%COMP%]{display:block;margin:0 0 3px}.rl-input__messages[_ngcontent-%COMP%]{display:block;margin-top:3px}"]})}return i})();var St=u(3594),Gi=u(5400);const Vi=["input"],Qi=i=>({oversize:i}),Yi=(i,r)=>({count:i,max:r});function Wi(i,r){if(1&i&&(t.TgZ(0,"span",1),t.ALo(1,"async"),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"async"),t.qZA()),2&i){const e=t.oxw();t.Tol(e.bem("counter",t.VKq(10,Qi,t.lcZ(1,3,e.maxlengthExceeded$)))),t.xp6(2),t.Oqu(t.xi3(3,5,e.maxlength>0?"textarea_component.counter_with_limit":"textarea_component.counter",t.WLB(12,Yi,t.lcZ(4,8,e.charCount$),e.maxlength)))}}const $i=["*"];let Ki=(()=>{class i{static#t=this.DEFAULT_MAX_LENGTH=0;set maxlength(e){this._maxlength=e>0?e:0}get maxlength(){return this._maxlength}get rootClassnames(){return this.bem({[`color-${this.color}`]:!0,"has-focus":this.hasFocus})}constructor(e){this.control=e,this.color="secondary",this.showCounter=!1,this.bem=(0,I.aP)("rl-textarea"),this.hasFocus=!1,this.destroy=new w.x,this.charCount=new Gi.t(1),this._maxlength=i.DEFAULT_MAX_LENGTH,this.charCount$=this.charCount.pipe(),this.charCount.next(0),this.maxlengthExceeded$=this.charCount$.pipe((0,B.U)(n=>this.maxlengthExceeded(n)))}ngAfterContentInit(){void 0!==this.textareaRef?.nativeElement?.textLength&&((0,K.R)(this.textareaRef.nativeElement,"input").pipe((0,C.R)(this.destroy),(0,B.U)(()=>this.textareaRef.nativeElement.textLength)).subscribe(e=>this.charCount.next(e)),(0,K.R)(this.textareaRef.nativeElement,"blur").pipe((0,C.R)(this.destroy)).subscribe(()=>this.hasFocus=!1),(0,K.R)(this.textareaRef.nativeElement,"focus").pipe((0,C.R)(this.destroy)).subscribe(()=>this.hasFocus=!0)),this.control?.control?.valueChanges.pipe((0,C.R)(this.destroy),(0,B.U)(e=>e?.length||0)).subscribe(e=>this.charCount.next(e)),this.charCount.next(this.textareaRef?.nativeElement?.textLength??this.control?.control?.value?.length),this.textareaRef?.nativeElement?.hasAttribute("maxlength")&&(this._maxlength=parseInt(this.textareaRef.nativeElement.getAttribute("maxlength"),10),isNaN(this._maxlength)&&(this._maxlength=i.DEFAULT_MAX_LENGTH))}ngOnDestroy(){this.destroy.next()}maxlengthExceeded(e){const n=this.maxlength;return n>0&&e>n}static#e=this.\u0275fac=function(n){return new(n||i)(t.Y36(g.a5,8))};static#n=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-textarea"]],contentQueries:function(n,o,a){if(1&n&&t.Suo(a,Vi,5),2&n){let s;t.iGM(s=t.CRH())&&(o.textareaRef=s.first)}},inputs:{color:"color",maxlength:"maxlength",showCounter:"showCounter"},ngContentSelectors:$i,decls:4,vars:5,consts:[["rl-typography","small",3,"class"],["rl-typography","small"]],template:function(n,o){1&n&&(t.F$t(),t.TgZ(0,"div")(1,"div"),t.Hsn(2),t.qZA(),t.YNc(3,Wi,5,15,"span",0),t.qZA()),2&n&&(t.Tol(o.rootClassnames),t.xp6(),t.Tol(o.bem("container")),t.xp6(2),t.um2(3,o.showCounter?3:-1))},dependencies:[b.tH,v.Ov,h.X$],styles:[".bold-600{font-weight:600}.bold-700{font-weight:700}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.centered{margin:0 auto}.pull-left{float:left}.pull-right{float:right}ul.list-unstyled{list-style:none}.noselect{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.rl-textarea{background-color:#f7f7f8;box-shadow:0 2px #ccd1d9,inset -1px 1px #ccd1d9,inset 1px 1px #ccd1d9;padding:8px;text-align:right}.rl-textarea--color-alert,.rl-textarea--color-error{box-shadow:0 2px #e62300,inset -1px 1px #ccd1d9,inset 1px 1px #ccd1d9;color:#e62300}.rl-textarea--color-happy{box-shadow:0 2px #00a68a,inset -1px 1px #ccd1d9,inset 1px 1px #ccd1d9;color:#00a68a}.rl-textarea--color-primary{box-shadow:0 2px #d68021,inset -1px 1px #ccd1d9,inset 1px 1px #ccd1d9;color:#d68021}.rl-textarea--color-secondary{color:#3e3f4c}.rl-textarea--has-focus{box-shadow:0 2px #f3c59f,inset -1px 1px #ccd1d9,inset 1px 1px #ccd1d9}.rl-textarea__container textarea{color:#3e3f4c;font-family:Open Sans,sans-serif;font-style:normal;font-weight:400;font-size:16px;line-height:normal;background-color:transparent;border:none;display:block;outline:none;padding:0;margin:0;max-width:100%;width:100%}.rl-textarea__counter{color:#696a78}.rl-textarea__counter--oversize{color:#e62300}\n"],encapsulation:2})}return i})();const ji=["legalName","personId","email"],Xi=["cog"],ta=["component"];function ea(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",6,7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onCogClick.emit(o.party))}),t.ALo(3,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Gre("",e.bem("cog")," rl-icon settings"),t.s9C("title",t.lcZ(3,4,"party.edit"))}}const Ht="rl-party";function xe(i){const r=parseInt(i.substring(0,2),16).toString(10);return i.length>2?[r,...xe(i.substring(2))]:[r]}function na(i){if("rgb"===i.substring(0,3).toLowerCase()){const r=i.replace(/[^\d,]/,""),e=r.split(",");return 4===e.length?(e[3]=(.2*parseFloat(e[3])).toFixed(2),`rgba(${e.join(",")})`):`rgba(${r},0.2)`}return"#"===i.charAt(0)?`rgba(${xe(i.substring(1)).join(",")},0.2)`:"inherit"}let ht=(()=>{class i{get ariaRole(){return this.showRadio?"radio":null}get ariaChecked(){return this.showRadio?!!this.checked:null}get displayValue(){return this._displayValue}get inputClassnames(){return(0,I.PH)(Ht,"input",{isRadio:this.showRadio})}get isPII(){return this._isPII}get radioClassnames(){return(0,I.PH)(Ht,"radio",{checked:this.checked,visible:this.showRadio})}get tabIndex(){return this.checked?0:-1}constructor(e){this.document=e,this.displayProperty="legalName",this.showRadio=!1,this.checked=!1,this.showCog=!1,this.onCogClick=new t.vpe,this.onClick=new t.vpe,this.bem=(0,I.aP)(Ht),this.destroy=new w.x,this._isPII=!1,this.click=n=>this.handleClick(n)}handleClick(e){(!this.cogElement||!this.cogElement.nativeElement||!this.cogElement.nativeElement.contains(e.target))&&this.onClick.emit(this.party)}ngAfterViewInit(){this.color&&this.setCustomColor(this.color)}ngOnChanges({color:e,displayProperty:n,defaultDisplayValue:o,isPIIInput:a,party:s}){e&&(e.currentValue&&this.element?this.setCustomColor(e.currentValue):this.removeCustomColor()),(n||o||s)&&this.setDisplayValue(),(n||o||s||a)&&(this._isPII=this.valueIsPII())}ngOnDestroy(){this.destroy.next()}removeCustomColor(){this.element&&(this.element.nativeElement.style.removeProperty("--party-color"),this.element.nativeElement.style.removeProperty("--party-translucent-color"))}setCustomColor(e){this.element&&(this.element.nativeElement.style.setProperty("--party-color",e),this.element.nativeElement.style.setProperty("--party-translucent-color",na(e)))}setDisplayValue(){this._displayValue=this.party&&this.party[this.displayProperty]||this.defaultDisplayValue}valueIsPII(){return void 0===this.isPIIInput?!!this.party?.[this.displayProperty]&&ji.includes(this.displayProperty):this.isPIIInput}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(v.K0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-party"]],viewQuery:function(n,o){if(1&n&&(t.Gf(Xi,5),t.Gf(ta,5,t.SBq)),2&n){let a;t.iGM(a=t.CRH())&&(o.cogElement=a.first),t.iGM(a=t.CRH())&&(o.element=a.first)}},inputs:{party:"party",displayProperty:"displayProperty",defaultDisplayValue:"defaultDisplayValue",isPIIInput:[t.lbL.None,"is-pii","isPIIInput"],showRadio:"showRadio",checked:"checked",color:"color",showCog:"showCog"},outputs:{onCogClick:"onCogClick",onClick:"toggle"},features:[t.TTD],decls:8,vars:13,consts:[[3,"click"],["component",""],["role","presentation"],["prepend",""],["input",""],["rl-test","editParty","type","button",3,"class","title"],["rl-test","editParty","type","button",3,"title","click"],["append","","cog",""]],template:function(n,o){1&n&&(t.TgZ(0,"rl-text-input",0,1),t.NdJ("click",function(s){return o.click(s)}),t._UZ(2,"i",2,3),t.TgZ(4,"span",null,4),t._uU(6),t.qZA(),t.YNc(7,ea,4,6,"button",5),t.qZA()),2&n&&(t.Tol(o.bem(void 0)),t.uIk("aria-checked",o.ariaChecked)("aria-label",o.displayValue)("role",o.ariaRole)("tabindex",o.tabIndex),t.xp6(2),t.Tol(o.radioClassnames),t.xp6(2),t.Tol(o.inputClassnames),t.uIk("data-pii",o.isPII?"value":"none"),t.xp6(2),t.Oqu(o.displayValue),t.xp6(),t.um2(7,o.showCog?7:-1))},dependencies:[St.t,O.$m,h.X$],styles:['.bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.rl-party[_ngcontent-%COMP%]{--party-color: #CCD1D9;--party-translucent-color: rgba(204, 209, 217, .25);background-color:transparent;border:1px solid var(--party-color);border-left-width:8px;border-radius:4px;box-shadow:none;min-height:46px;position:relative;transition:background-color .15s ease-in-out}.rl-party[role=radio][_ngcontent-%COMP%]:focus, .rl-party[role=radio][_ngcontent-%COMP%]:hover{background-color:var(--party-translucent-color)}.rl-party[role=radio][_ngcontent-%COMP%]:focus{outline:none}.rl-party[role=radio][_ngcontent-%COMP%], .rl-party__input--isRadio[_ngcontent-%COMP%]{cursor:pointer}.rl-party__radio--visible[_ngcontent-%COMP%]{border:1px solid #373737;border-radius:50%;box-sizing:border-box;display:block;height:16px;margin:0 -6px 0 16px;width:16px}.rl-party__radio--checked[_ngcontent-%COMP%]:after{background-color:#373737;border-radius:50%;content:"";display:block;height:12px;left:50%;position:relative;top:50%;transform:translate(-50%,-50%);width:12px}.rl-party__input[_ngcontent-%COMP%]{align-self:center;cursor:inherit;font-weight:600;overflow:hidden;text-overflow:ellipsis}.rl-party__cog[_ngcontent-%COMP%]{background-color:transparent;border:none;border-radius:50%;color:#3e3f4c;cursor:pointer;font-size:24px;padding:0;margin-right:16px;outline:none;transform:rotate(0) scale(1);transition:transform .5s cubic-bezier(.34,1.56,.64,1)}@keyframes _ngcontent-%COMP%_active{0%{box-shadow:0 0 #3e3f4c66}99%{box-shadow:0 0 0 20px transparent}to{box-shadow:none}}.rl-party__cog[_ngcontent-%COMP%]:hover, .rl-party__cog[_ngcontent-%COMP%]:focus{animation:_ngcontent-%COMP%_active .5s 1;transform:rotate(45deg) scale(1.2)}']})}return i})();var Zt=u(6036);function oa(i,r){1&i&&t._UZ(0,"img",24)}function ia(i,r){1&i&&t._UZ(0,"span",25)}function aa(i,r){1&i&&(t.TgZ(0,"div",6)(1,"div",26),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",27),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"invite-collaborators-modal_docs-ready-to-send-1")," "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"invite-collaborators-modal_docs-ready-to-send-description")," "))}function ra(i,r){1&i&&(t.TgZ(0,"div",6)(1,"div",26),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",27),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"invite-collaborators-modal_docs-ready-to-send-other")," "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"invite-collaborators-modal_docs-ready-to-send-description")," "))}function sa(i,r){if(1&i&&(t.TgZ(0,"span",31),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(),t.Oqu(1===e.documentCount?"invite-collaborators-modal_document-name":"invite-collaborators-modal_document-names")}}const la=(i,r)=>({document:i,documents:r});function ca(i,r){if(1&i&&(t.TgZ(0,"rlng-input",28,29)(2,"span",30),t.YNc(3,sa,2,1,"span",31),t.TgZ(4,"span",32),t._uU(5,"invite-collaborators-modal_document-a11y-label"),t.qZA()(),t.TgZ(6,"rl-text-input",33),t._UZ(7,"input",34,17)(9,"div",35,36),t.qZA(),t.TgZ(11,"div",18,19)(13,"div",20),t._uU(14,"invite-collaborators-modal_document-name-required"),t.qZA()()()),2&i){const e=r.$implicit,n=r.$index,o=t.MAs(1),a=t.oxw();t.MGl("control-id","document-",n,"")("rl-test","invite-collaborators-document invite-collaborators-document-",n,""),t.Q6J("formControl",e),t.xp6(2),t.MGl("rl-test","invite-collaborators-document-name-label invite-collaborators-document-name-label-",n,""),t.xp6(),t.um2(3,0===n?3:-1),t.xp6(),t.Q6J("translateParams",t.WLB(15,la,n,a.documentCount)),t.xp6(2),t.Q6J("color",o.invalid?"error":"secondary"),t.xp6(),t.ekj("disabled",!a.canChangeDocumentNames),t.MGl("rl-test","invite-collaborators-document-name invite-collaborators-document-name-",n,""),t.Q6J("formControl",e)("id",o.id),t.uIk("aria-describedby",o.messagesID),t.xp6(2),t.Q6J("hidden",!o.invalid),t.xp6(4),t.Q6J("hidden",!o.showErrorMessage("required"))}}function da(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-party",37),t.NdJ("onCogClick",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.cogClicked(o))}),t.qZA()}if(2&i){const e=r.$implicit,n=r.$index,o=t.oxw();t.Tol(o.bem("party")),t.MGl("rl-test","invite-collaborators-collaborator invite-collaborators-collaborator-",n,""),t.Q6J("color",null==e?null:e.metaData.style.background)("party",e)("showCog",o.binderIsInPreparation)("showRadio",!1)}}const ma=()=>({key:"invite-collaborators-modal_sending-invitations"});let ga=(()=>{class i{constructor(){this.canChangeDocumentNames=!0,this.binderIsInPreparation=!1,this.documents=[],this.parties=[],this.loading=!1,this.sendClick=new t.vpe,this.partyEditClick=new t.vpe,this.messageSave=new t.vpe,this.bem=(0,I.aP)("invite-collaborators-modal"),this.messageMaxLength=600,this.invitedDocuments=[],this._invitableParties=[]}get documentCount(){return this.invitedDocuments.length}get documentControls(){const e=this.formGroup.get("documents");return Object.keys(e.controls).map(n=>e.controls[n])}get invitableParties(){return this._invitableParties}static getInvitableParties(e){return e.filter(n=>!(0,m.jn)(n,"OWNER")&&(0,m.Df)(n,"SIGNER","PAYER"))}static getSignableDocuments(e){return e.filter(n=>n.signable&&n.inputs.length>0)}static setupDocumentFormGroup(e,n){const o=new Jt({});return e.forEach(a=>{const s=new Mt({disabled:!n,value:a.name},{validators:[g.kI.required]});o.addControl(a.id,s)}),o}ngOnInit(){this._invitableParties=i.getInvitableParties(this.parties);const e=this._invitableParties.some(o=>(0,m.jn)(o,"PAYER"));this.invitedDocuments=e?this.documents:i.getSignableDocuments(this.documents);const n=i.setupDocumentFormGroup(this.invitedDocuments,this.canChangeDocumentNames);this.formGroup=new Jt({documents:n,message:new Mt("",{validators:[g.kI.maxLength(this.messageMaxLength)]})}),this.formGroup.get("message").setValue(this.initialMessage)}sendClicked(){if(!this.loading&&(this.documentControls.forEach(e=>e.setValue(e.value.trim())),this.formGroup.markAllAsTouched(),this.formGroup.markAsSubmitted(),this.formGroup.valid)){const e=this.invitedDocuments.map(n=>{const o=this.formGroup.get(`documents.${n.id}`);return o.value===n.name?void 0:{...n,name:o.value}}).filter(n=>!!n);this.sendClick.emit({changedDocuments:e,message:this.formGroup.get("message").value})}}cogClicked(e){this.messageSave.emit(this.formGroup.get("message").value),this.partyEditClick.emit(e)}clearInviteMessage(){this.messageSave.emit(null)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-invite-collaborators-modal"]],inputs:{canChangeDocumentNames:"canChangeDocumentNames",binderIsInPreparation:"binderIsInPreparation",documents:"documents",parties:"parties",loading:"loading",initialMessage:"initialMessage",brandConfig:"brandConfig",brandingLevel:"brandingLevel",signIconColor:"signIconColor"},outputs:{sendClick:"sendClick",partyEditClick:"partyEditClick",messageSave:"messageSave"},decls:42,vars:26,consts:[["fakePath","inviteCollaborators","rl-test","invite-collaborators"],["rl-modal-title","","rl-typography","heading","rl-test","invite-collaborators-header"],["role","presentation"],["translate",""],["rl-modal-header-widget","right",3,"click"],["rl-modal-body-part","heroText"],["rl-modal-body-part","container"],["class","sign-icon modal-default-icon-color","src","images/rocketsign-logo.svg"],["class","default-icon sign-icon rl-icon swivel-icon modal-default-icon-color"],["rl-modal-body-part","container",3,"formGroup","ngSubmit"],["data-label","","rl-test","invite-collaborators-send-to-label","translate",""],["control-id","message","formControlName","message"],["messageInput",""],["data-label","","rl-test","invite-collaborators-message-label","translate",""],["label",""],["data-control","",3,"color","maxlength","showCounter"],["data-control","","rows","5","formControlName","message","rl-test","invite-collaborators-message",3,"id","placeholder"],["input",""],["data-messages","","rl-typography","error"],["messages",""],["translate","",3,"hidden"],["rl-typography","small","translate",""],["rl-modal-body-part","actionsContainer"],["btnClass","btn btn-primary","btnType","submit","rl-modal-body-part","primaryAction","rl-test","invite-collaborators-cta",3,"isLoading","loadingTranslation"],["src","images/rocketsign-logo.svg",1,"sign-icon","modal-default-icon-color"],[1,"default-icon","sign-icon","rl-icon","swivel-icon","modal-default-icon-color"],["rl-modal-description","",1,"bold-700"],["rl-modal-body-part","regularContent"],[3,"control-id","formControl","rl-test"],["inputComponent",""],["data-label","",3,"rl-test"],["rl-inclusively-hidden","assistiveOnly","translate",""],["rl-inclusively-hidden","visualOnly","translate","",3,"translateParams"],["data-control","",3,"color"],["required","",3,"formControl","id","rl-test"],["role","presentation",1,"rl-icon","alert-info",3,"hidden"],["append",""],["data-control","","displayProperty","email",3,"color","party","showCog","showRadio","rl-test","onCogClick"],["data-control","","displayProperty","email",3,"class","color","party","showCog","showRadio","rl-test"]],template:function(n,o){if(1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header")(2,"h1",1),t._UZ(3,"i",2),t.TgZ(4,"span",3),t._uU(5,"invite-collaborators-modal_heading"),t.qZA()(),t.TgZ(6,"rl-modal-header-close",4),t.NdJ("click",function(){return o.clearInviteMessage()}),t.qZA()(),t.TgZ(7,"rl-modal-body")(8,"div",5)(9,"div",6),t.YNc(10,oa,1,0,"img",7)(11,ia,1,0,"span",8)(12,aa,7,6,"div",6)(13,ra,7,6,"div",6),t.qZA()(),t.TgZ(14,"form",9),t.NdJ("ngSubmit",function(){return o.sendClicked()}),t.SjG(15,ca,15,18,"rlng-input",28,t.x6l),t.TgZ(17,"rlng-input")(18,"span",10),t._uU(19,"invite-collaborators-modal_send-to"),t.qZA(),t.SjG(20,da,1,7,"rl-party",38,t.x6l),t.qZA(),t.TgZ(22,"rlng-input",11,12)(24,"span",13,14),t._uU(26,"invite-collaborators-modal_add-message"),t.qZA(),t.TgZ(27,"rl-textarea",15),t._UZ(28,"textarea",16,17),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"div",18,19)(33,"div",20),t._uU(34,"invite-collaborators-modal_text-too-long"),t.qZA()()(),t.TgZ(35,"p",21),t._uU(36,"invite-collaborators-modal_custom-text-caption"),t.qZA(),t.TgZ(37,"div",22)(38,"custom-button",23),t._uU(39),t.ALo(40,"translate"),t.qZA()()()(),t._UZ(41,"rl-modal-footer"),t.qZA()),2&n){const a=t.MAs(23);t.xp6(3),t.Gre("rl-icon email-input ",o.bem("header-icon"),""),t.xp6(7),t.um2(10,1==o.brandingLevel?10:-1),t.xp6(),t.um2(11,1!=o.brandingLevel?11:-1),t.xp6(),t.um2(12,1===o.documents.length?12:-1),t.xp6(),t.um2(13,o.documents.length>1?13:-1),t.xp6(),t.Q6J("formGroup",o.formGroup),t.xp6(),t.wJu(o.documentControls),t.xp6(5),t.wJu(o.invitableParties),t.xp6(7),t.Q6J("color",a.invalid?"error":"secondary")("maxlength",o.messageMaxLength)("showCounter",!0),t.xp6(),t.s9C("placeholder",t.lcZ(30,21,"invite-collaborators-modal_add-message-placeholder")),t.Q6J("id",a.id),t.xp6(5),t.Q6J("hidden",!a.showErrorMessage("maxlength")),t.xp6(2),t.Tol(o.bem("caption")),t.xp6(3),t.Tol(o.bem("cta")),t.Q6J("isLoading",o.loading)("loadingTranslation",t.DdM(25,ma)),t.xp6(),t.Oqu(t.lcZ(40,23,"invite-collaborators-modal_send-invitations"))}},dependencies:[g._Y,g.Fj,g.JJ,g.JL,g.Q7,g.oH,g.sg,g.u,h.Pi,_t,q,_.zS,k,U,T,_.vP,_.Wb,A,z.x,b.tH,zt,St.t,vt,O.$m,Ki,ht,h.X$],styles:[".header-image[_ngcontent-%COMP%]{max-height:100%;max-width:100%;width:auto;height:auto;position:absolute;inset:0;margin:auto}.sign-icon[_ngcontent-%COMP%]{min-height:40px;margin:0 auto;width:40px;display:block}.default-icon[_ngcontent-%COMP%]{font-size:39px;width:40px;height:40px}.bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.invite-collaborators-modal__header-icon[_ngcontent-%COMP%]{margin-right:.5em}.invite-collaborators-modal__party[_ngcontent-%COMP%]{display:block;margin-bottom:16px}.invite-collaborators-modal__party[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.invite-collaborators-modal__caption[_ngcontent-%COMP%]{margin:0}@media (min-width: 480px){.invite-collaborators-modal__cta[_ngcontent-%COMP%]{grid-column:2/span max(1,2 * 2 - 1)}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.invite-collaborators-modal__cta[_ngcontent-%COMP%]{grid-column:2/span 2}}}.sign-icon[_ngcontent-%COMP%]{min-height:40px}.description[_ngcontent-%COMP%]{margin:16px 0 0}.rl-icon.alert-info[_ngcontent-%COMP%]{position:relative;right:10px}"]})}return i})(),pa=(()=>{class i{constructor(e,n,o,a,s,l,d,p){this.alertService=e,this.modalControlService=n,this.partyService=o,this.payService=a,this.signService=s,this.store=l,this.messageService=d,this.eventTracker=p,this.binderIsInPreparation=!1,this.documents=[],this.loading=!1,this.parties=[],this.destroy=new w.x,this.brandingLevel=3}ngOnInit(){const{documents:e,parties:n,status:o}=this.store.getState().binder;this.brandingLevel=this.store.getState().globalBrandConfig?.brandingLevel||3,this.binderIsInPreparation="IN_PREPARATION"===o,this.documents=e,this.parties=n,this.brandConfig=this.store.getState().brandConfig,this.signIconColor=this.brandConfig?.lookAndFeel.signIconColor;const{inviteMessage:a}=this.store.getState();a&&a.value&&(this.initialMessage=a.value),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(s=>this.onNavigate(s))}ngOnDestroy(){this.destroy.next()}editParty(e){this.modalControlService.navigate("editSignerModal",{party:e})}invite(e){this.loading=!0;const n=(e.message||"").replace(/"/g,"'"),o=this.updateDocuments(e.changedDocuments).pipe((0,gt.b)(()=>this.partyService.ensurePartyRefIntegrity()),(0,gt.b)(()=>this.finalizeAndInvite(n)),(0,Ui.d)());o.subscribe(s=>{this.alertService.addSuccessAlert({message:{key:"invite-collaborators-modal_invitations-sent"}}),this.messageService.sendEvent({eventName:"INVITATIONS_SENT",binder:s,category:"SignEvent"})}),o.pipe((0,gt.b)(s=>this.updatePaymentAgreementAndBinder(s))).subscribe({complete:()=>{this.getUpdatedPaymentAccountForCurrentParty().subscribe({complete:()=>{this.loading=!1,this.modalControlService.navigate("complete")},error:s=>{this.loading=!1,this.alertService.addDangerAlert({message:{key:"invite-collaborators-modal_invitations-error"}}),console?.error("Error updating stripe account",s)}})},error:s=>{this.loading=!1,this.alertService.addDangerAlert({message:{key:"invite-collaborators-modal_invitations-error"}}),console?.error("Error sending invitations",s)}}),this.store.dispatch((0,L.Ww)({value:null}))}getUpdatedPaymentAccountForCurrentParty(){const e=this.store.getState();return e.paymentAccount||!e.paymentAgreement?(0,Y.of)(void 0):this.payService.getExistingPaymentAccount(e.paymentAgreement.brand,(0,m.kT)(e).id).pipe((0,it.h)(void 0))}finishPaymentAgreementSetup(){const{paymentAgreement:e}=this.store.getState();return["proposed","draft"].includes(e?.status)?this.changePaymentAgreementStatusToPending(e):"optional"===e?.status?this.deletePaymentAgreement(e):(0,Y.of)(void 0)}changePaymentAgreementStatusToPending(e){return this.payService.setPaymentAgreementStatus(e.externalId,"pending").pipe((0,it.h)(void 0))}deletePaymentAgreement(e){return this.payService.deletePaymentAgreement(e.externalId).pipe((0,ct.b)({next:()=>{this.eventTracker.paymentAgreementDeleted({paymentAgreementID:e.externalId,status:e.status})}}))}finalize(e,n){return"REVIEW_AND_SHARE"===e.status?(0,Y.of)(e):this.signService.sendFinalisation(n,e).pipe((0,it.h)(e))}onNavigate(e){"editSignerModal"===e.data.to?(this.store.dispatch((0,rt.Q)({party:e.data.party,returnRoute:"inviteCollaboratorsModal"})),this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:"editSignerModal"})):"complete"===e.data.to&&this.modalControlService.close(c.G.CompletedSuccessfully,{nextModal:"complete"})}finalizeAndInvite(e){return this.store.getState$().pipe((0,Ct.j)("binder"),(0,dt.q)(1),(0,gt.b)(n=>"IN_PREPARATION"===n.status?this.finalize(n,e):(0,Y.of)(n)),(0,ct.b)(n=>this.signService.getBinder(n.id,{fetchPages:!1,saveStore:!0})),(0,gt.b)(n=>this.signService.sendInvitations(n.id,e).pipe((0,it.h)(n))))}updateDocuments(e){if(0===e.length)return(0,Y.of)(void 0);const n=this.store.getState().binder.id;return(0,Ut.D)(e.map(o=>this.signService.updateDocument(n,o.id,{name:o.name}))).pipe((0,ct.b)(()=>{e.forEach(o=>this.store.dispatch((0,L.sW)(o)))}),(0,it.h)(void 0))}updatePaymentAgreementAndBinder(e){const n=this.finishPaymentAgreementSetup();return Dt(this.signService.getBinder(e.id,{fetchPages:!1,saveStore:!0}),n).pipe((0,it.h)(void 0))}saveMessage(e){this.store.dispatch((0,L.Ww)({value:e}))}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(R.c),t.Y36(c.e),t.Y36(Zt.p),t.Y36(j.T),t.Y36(F.f),t.Y36(x.y),t.Y36(V.e),t.Y36(tt.a))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-invite-collaborators-connected-modal"]],decls:1,vars:9,consts:[[3,"canChangeDocumentNames","binderIsInPreparation","documents","parties","loading","brandConfig","brandingLevel","signIconColor","initialMessage","sendClick","partyEditClick","messageSave"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-invite-collaborators-modal",0),t.NdJ("sendClick",function(s){return o.invite(s)})("partyEditClick",function(s){return o.editParty(s)})("messageSave",function(s){return o.saveMessage(s)}),t.qZA()),2&n&&t.Q6J("canChangeDocumentNames",o.binderIsInPreparation)("binderIsInPreparation",o.binderIsInPreparation)("documents",o.documents)("parties",o.parties)("loading",o.loading)("brandConfig",o.brandConfig)("brandingLevel",o.brandingLevel)("signIconColor",o.signIconColor)("initialMessage",o.initialMessage)},dependencies:[ga],encapsulation:2})}return i})();var ua=u(385);let W=(()=>{class i{get tabIndex(){return this._tabIndex}set tabIndex(e){this._tabIndex=e||0}constructor(e,n,o){this.elementRef=e,this.modalControlService=n,this.translateService=o,this.destroy=new w.x,this._tabIndex=0}ngOnDestroy(){this.destroy.next()}ngOnInit(){(0,K.R)(this.elementRef.nativeElement,"click").pipe((0,C.R)(this.destroy)).subscribe(()=>{this.modalControlService.navigate("back")}),this.translateService.get("modal-widget-modal-header-back_title").pipe((0,dt.q)(1)).subscribe(e=>this.title=e)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.SBq),t.Y36(c.e),t.Y36(h.sK))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-modal-header-back"]],hostVars:2,hostBindings:function(n,o){2&n&&t.Ikx("tabindex",o._tabIndex)("title",o.title)},inputs:{tabIndex:"tabIndex"},decls:1,vars:0,consts:[["rl-test","modal-back",1,"rl-icon","back","rl-modal-header-back"]],template:function(n,o){1&n&&t._UZ(0,"div",0)},dependencies:[O.$m],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}[_nghost-%COMP%]{cursor:pointer;display:block;height:30px;position:relative;width:30px}.rl-modal-header-back[_ngcontent-%COMP%]{color:#696a78;font-size:24px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}"]})}return i})();function _a(i,r){1&i&&t._UZ(0,"rl-modal-header-back",2)}function ha(i,r){1&i&&(t.TgZ(0,"div",25),t._UZ(1,"com",10),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","invite-viewers-modal_invalid-name"))}function Ca(i,r){1&i&&(t.TgZ(0,"div",25),t._UZ(1,"com",10),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","invite-viewers-modal_invalid-email"))}function Ma(i,r){1&i&&(t.TgZ(0,"div",25),t._UZ(1,"com",10),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","invite-viewers-modal_viewer-signer"))}function fa(i,r){1&i&&(t.TgZ(0,"div",25),t._UZ(1,"com",10),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","invite-viewers-modal_viewer-invited"))}function ya(i,r){1&i&&(t.TgZ(0,"div",25),t._UZ(1,"com",10),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","invite-viewers-modal_invalid-email-owner"))}function Pa(i,r){if(1&i&&t.YNc(0,Ca,2,1,"div",26)(1,Ma,2,1,"div",26)(2,fa,2,1,"div",26)(3,ya,2,1,"div",26),2&i){const e=t.oxw();t.um2(0,e.isEmailValid()||e.isViewerOwner()?-1:0),t.xp6(),t.um2(1,e.isViewerSigner()?1:-1),t.xp6(),t.um2(2,e.isViewerAlreadyInvited()?2:-1),t.xp6(),t.um2(3,e.isViewerOwner()?3:-1)}}function xa(i,r){1&i&&t._UZ(0,"span",27)}const ba=()=>({updateOn:"submit"}),be=i=>({"over-limit":i}),Oa=()=>({key:"invite-viewers-modal_send-invitations"}),va=()=>({key:"invite-viewers-modal_sending-invitations"});let wa=(()=>{class i{constructor(e,n,o,a,s,l,d,p,M){this.translate=e,this.alertService=n,this.signService=o,this.modalControlService=a,this.validationService=s,this.store=l,this.documentEl=d,this.translatePipe=p,this.messageService=M,this.actionInProgress=!1,this.actionAttempted=!1,this.viewerName="",this.viewerEmail="",this.customMessage="",this.customMessageLength=0,this.binderHasViewers=!1,this.subscriptions=[],this.destroy=new w.x,this.closeModal=new t.vpe,this.startAction=new t.vpe,this.binder=this.store.getState().binder;const y=this.store.subscribe(D=>{this.binder=D.binder});this.subscriptions.push(y)}onClick(){this.showModal&&this.close()}ngOnInit(){this.binderHasViewers=!!this.binder.parties.find(e=>e.roles.includes("VIEWER")),this.ownerParty=(0,m.oJ)(this.binder,"OWNER"),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(e=>this.onNavigate(e))}ngOnDestroy(){this.subscriptions.forEach(e=>e()),this.destroy.next()}onNavigate(e){this.modalControlService.close(c.G.UserNavigatedBack)}sendInvitations(){if(this.actionAttempted=!0,!this.isFormValid())return;this.actionInProgress=!0;const e={legalName:this.viewerName,email:this.viewerEmail};this.signService.sendNewViewer(e,this.binder.id,this.messageOrDefault(this.customMessage)).subscribe({complete:()=>{this.onSuccess(e.legalName)},error:()=>{this.onError()}})}messageOrDefault(e){return e||this.translatePipe.transform("invite-viewers-modal_placeholder-message")}onSuccess(e){this.signService.getBinder(this.store.getState().binder.id,{fetchPages:!1}).subscribe(n=>{this.messageService.sendEvent({eventName:"VIEWER_INVITED",binder:n,category:"SignEvent"}),this.actionInProgress=!1,this.goBack(),this.alertService.setAlertMessage({message:"invite-collaborators-modal_invitations-sent",type:"success",params:{viewerName:e}})})}onError(){this.actionInProgress=!1,this.close(),this.alertService.setAlertMessage({message:"invite-collaborators-modal_invitations-error",type:"danger"})}isFormValid(){return this.isNameValid()&&this.isEmailValid()&&this.isMessageValid()&&!this.isViewerAlreadyInvited()&&!this.isViewerSigner()&&!this.isViewerOwner()}isNameValid(){return this.viewerName.trim().length>0}isEmailValid(){return this.validationService.emailValidation(this.viewerEmail)}isViewerOwner(){return this.ownerParty.email.toLowerCase()==this.viewerEmail.toLowerCase()}isViewerSigner(){const e=this.viewerEmail.toLowerCase();return this.binder.parties.some(n=>n.roles.includes("SIGNER")&&n.email?.toLowerCase()==e)}isViewerAlreadyInvited(){const e=this.viewerEmail.toLowerCase();return this.binder.parties.some(n=>n.roles.includes("VIEWER")&&n.email?.toLowerCase()==e)}isMessageValid(){return this.customMessage.length<=600}getDocumentName(){return this.binder.documents[0]?this.binder.documents[0].name:""}close(){this.actionInProgress||this.closeModal.emit()}goBack(){this.actionInProgress||this.modalControlService.navigate("back")}updateCounter(e){this.customMessageLength=e.target.value.length}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(h.sK),t.Y36(R.c),t.Y36(F.f),t.Y36(c.e),t.Y36(ua.R),t.Y36(x.y),t.Y36(v.K0),t.Y36(h.X$),t.Y36(V.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["invite-viewers-modal"]],hostBindings:function(n,o){1&n&&t.NdJ("click",function(s){return o.onClick(s)},!1,t.evT)},inputs:{showModal:"showModal"},outputs:{closeModal:"closeModal",startAction:"startAction"},features:[t._Bn([h.X$])],decls:43,vars:40,consts:[["fakePath","inviteViewers","rl-test","invite-viewers-modal"],["product","sign"],["rl-modal-header-widget","left"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"header-icon","rl-icon","share"],["translate",""],["rl-modal-header-widget","right"],[1,"modal-dialog","modal-content"],[1,"content-container"],[1,"walkthrough-text"],[3,"key"],[1,"walkthrough-text","walkthrough-secondary"],[3,"ngFormOptions","submit"],["form","ngForm"],[1,"form-group"],["rl-test","viewer-name","name","viewer-name",1,"party-form-control",3,"ngModel","ngModelChange"],["class","validation-error","rl-test","error-message"],["rl-test","viewer-email","name","viewer-email","trim","blur",1,"party-form-control",3,"ngModel","ngModelChange"],[1,"custom-message"],["rl-test","viewer-message","name","custom-message","cols","20","rows","10",3,"ngModel","placeholder","ngModelChange","keyup"],["class","rl-icon dispute"],[1,"char-counter",3,"ngClass"],["rl-test","error-message",1,"text-length-error",3,"ngClass"],[1,"bottom-buttons"],[3,"btnType","btnClass","defaultTranslation","loadingTranslation","isLoading"],["rl-test","error-message",1,"validation-error"],["rl-test","error-message","class","validation-error"],[1,"rl-icon","dispute"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1),t.YNc(2,_a,1,0,"rl-modal-header-back",2),t.TgZ(3,"h1",3),t._UZ(4,"i",4),t.TgZ(5,"span",5),t._uU(6,"invite-viewers-modal_heading"),t.qZA()(),t._UZ(7,"rl-modal-header-close",6),t.qZA(),t.TgZ(8,"rl-modal-body")(9,"div",7)(10,"div",8)(11,"p",9),t._UZ(12,"com",10),t.qZA(),t.TgZ(13,"p",11),t._UZ(14,"com",10),t.qZA(),t.TgZ(15,"form",12,13),t.NdJ("submit",function(){return o.sendInvitations(),!1}),t.TgZ(17,"div",14)(18,"label"),t._UZ(19,"com",10),t.qZA(),t.TgZ(20,"input",15),t.NdJ("ngModelChange",function(s){return o.viewerName=s}),t.qZA(),t.YNc(21,ha,2,1,"div",16),t.qZA(),t.TgZ(22,"div",14)(23,"label"),t._UZ(24,"com",10),t.qZA(),t.TgZ(25,"input",17),t.NdJ("ngModelChange",function(s){return o.viewerEmail=s}),t.qZA(),t.YNc(26,Pa,4,4),t.qZA(),t.TgZ(27,"div",18)(28,"label"),t._UZ(29,"com",10),t.qZA(),t.TgZ(30,"div")(31,"textarea",19),t.NdJ("ngModelChange",function(s){return o.customMessage=s})("keyup",function(s){return o.updateCounter(s)}),t.ALo(32,"translate"),t._uU(33,"              "),t.qZA(),t.YNc(34,xa,1,0,"span",20),t.TgZ(35,"div",21)(36,"span"),t._uU(37),t.qZA()()(),t.TgZ(38,"div",22),t._UZ(39,"com",10),t.qZA()(),t.TgZ(40,"div",23),t._UZ(41,"custom-button",24),t.qZA()()()()(),t._UZ(42,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(2),t.um2(2,o.binderHasViewers?2:-1),t.xp6(8),t.ekj("form-submitted",o.actionAttempted),t.xp6(2),t.Q6J("key","invite-viewers-walkthrough"),t.xp6(2),t.Q6J("key","invite-viewers-walkthrough-more"),t.xp6(),t.Q6J("ngFormOptions",t.DdM(33,ba)),t.xp6(4),t.Q6J("key","invite-viewers-modal_send-to-name"),t.xp6(),t.ekj("invalid-form-control",!o.isNameValid()),t.Q6J("ngModel",o.viewerName),t.xp6(),t.um2(21,o.isNameValid()?-1:21),t.xp6(3),t.Q6J("key","invite-viewers-modal_send-to-email"),t.xp6(),t.ekj("invalid-form-control",o.actionAttempted&&(!o.isEmailValid()||o.isViewerOwner()||o.isViewerSigner()||o.isViewerAlreadyInvited())),t.Q6J("ngModel",o.viewerEmail),t.xp6(),t.um2(26,o.actionAttempted?26:-1),t.xp6(3),t.Q6J("key","invite-viewers-modal_add-message"),t.xp6(2),t.ekj("invalid",!o.isMessageValid()),t.Q6J("ngModel",o.customMessage)("placeholder",t.lcZ(32,31,"invite-viewers-modal_placeholder-message")),t.xp6(3),t.um2(34,o.isMessageValid()?-1:34),t.xp6(),t.Q6J("ngClass",t.VKq(34,be,!o.isMessageValid())),t.xp6(2),t.hij("",o.customMessageLength,"/600"),t.xp6(),t.Q6J("ngClass",t.VKq(36,be,!o.isMessageValid())),t.xp6(),t.Q6J("key","invite-viewers-modal_text-to-long"),t.xp6(2),t.Q6J("btnType","submit")("btnClass","btn btn-primary")("defaultTranslation",t.DdM(38,Oa))("loadingTranslation",t.DdM(39,va))("isLoading",o.actionInProgress))},dependencies:[v.mk,J.w,g._Y,g.Fj,g.JJ,g.JL,g.On,g.F,h.Pi,_.zS,k,U,T,W,_.vP,A,S,z.x,b.tH,O.$m,h.X$],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}.modal-background[_ngcontent-%COMP%]{touch-action:auto;position:fixed;inset:0;z-index:7;width:100%;height:100%;border-radius:3px;background-color:#3339;transition:opacity .2s;opacity:0;visibility:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch;overflow-x:hidden;display:flex;align-items:center;justify-content:center;flex-direction:column;opacity:1;visibility:visible}.modal-background.modal-show[_ngcontent-%COMP%], .modal-background.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.outer-wrapper[_ngcontent-%COMP%]{padding:16px;width:100%;box-sizing:border-box;margin:auto}.rl-icon.share[_ngcontent-%COMP%]{padding-right:8px;font-size:26px}.rl-icon.back[_ngcontent-%COMP%]{position:absolute;font-size:24px;top:0}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;padding:24px 8px;width:100%;max-width:416px;box-sizing:border-box;margin:0 auto;padding:24px 8px 0!important}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:24px 8px 40px}}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   span.rl-icon.dispute[_ngcontent-%COMP%]{top:6px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;resize:none;outline:none!important;font-size:16px;font-family:Open Sans;background-color:#f7f7f8;font-weight:400;margin-top:8px;padding:10px;border-radius:2px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border:1px solid #e62300}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .custom-text-caption[_ngcontent-%COMP%]{font-size:12px;clear:both}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;position:absolute;right:5px;bottom:5px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{width:100%;padding:0;margin-top:24px;display:flex;justify-content:space-between;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{width:100%;height:48px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse;height:48px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{flex:0 1 50%;height:100%;margin-right:8px;margin-bottom:0}}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:600;font-size:16px;line-height:20px;letter-spacing:.0125em;margin:16px 0 0}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]:first-child{margin-top:0}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .item-ref-label[_ngcontent-%COMP%]{display:block;height:33px;margin:20px 0;line-height:33px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   span.checkbox-check[_ngcontent-%COMP%]{margin-right:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:18px;position:relative}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .rl-icon.dispute[_ngcontent-%COMP%]{position:absolute;top:44px;right:12px;font-size:25px;color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;padding:15px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important;border-radius:2px;outline:0;box-sizing:border-box;background-color:#f7f7f8;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .party-form-control.disabled[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.disabled[_ngcontent-%COMP%]{pointer-events:none}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .party-form-control.invalid[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.invalid[_ngcontent-%COMP%]{box-shadow:0 2px #e62300,inset 1px 1px #e62300,inset -1px 1px #e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control.margin-top[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.margin-top[_ngcontent-%COMP%]{margin-top:6px}.modal-content[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{resize:none;height:120px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:12px;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-ref-label[_ngcontent-%COMP%]{display:block;height:33px;line-height:33px;cursor:pointer;max-width:calc(100% - 60px)}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:24px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   .doc-man-checkbox[_ngcontent-%COMP%]:before{font-size:14px;position:relative}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:14px;display:flex;flex-direction:row;align-items:center}.modal-content.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;display:block;width:100%;margin:0 auto}.modal-content.add-new[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0;color:#e62300;font-size:16px}.modal-content[_ngcontent-%COMP%]   .walkthrough-text[_ngcontent-%COMP%]{text-align:center;line-height:20px;font-size:16px;font-weight:600;color:#3e3f4c;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .walkthrough-secondary[_ngcontent-%COMP%]{font-weight:400;font-size:16px;margin-bottom:24px;color:#333}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{margin-top:8px}.modal-content[_ngcontent-%COMP%]   .validation-error[_ngcontent-%COMP%]{display:none;font-size:12px;margin-bottom:10px;color:#e62300;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .invalid-form-control.ng-touched[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .form-submitted[_ngcontent-%COMP%]   .invalid-form-control[_ngcontent-%COMP%]{border-color:#e62300}.modal-content[_ngcontent-%COMP%]   .invalid-form-control.ng-touched[_ngcontent-%COMP%] + .validation-error[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .form-submitted[_ngcontent-%COMP%]   .invalid-form-control[_ngcontent-%COMP%] + .validation-error[_ngcontent-%COMP%]{display:block}.modal-dialog[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:relative;font-size:16px;padding-left:15px;top:5px}.modal-dialog[_ngcontent-%COMP%]   .panel-heading[_ngcontent-%COMP%]{font-size:18px;color:#333;border-bottom:1px solid #ffffff;display:table;height:40px;width:100%;font-weight:600}.modal-dialog[_ngcontent-%COMP%]   .panel-heading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;padding-left:15px}.modal-dialog[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:88px}.inactive[_ngcontent-%COMP%]{display:none}"],data:{animation:[P.Ic,P.i_,P.y0]}})}return i})();var Oe=u(3317),ve=u(2106);const we=i=>function Aa(i){const n=new RegExp("^(?!-)[_+a-zA-Z0-9./-]+@(?!-)(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})$");return i&&i.length>3&&n.test(i)}(i.value)?null:{email:!0};let Ta=(()=>{class i{constructor(){this.validate=we}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275dir=t.lG2({type:i,selectors:[["","emailValidator",""]],features:[t._Bn([{provide:g.Cf,useExisting:i,multi:!0}])]})}return i})();function Za(i,r){const e={uniquePartyEmail:"email address is already in use"};return r?n=>function ka(i,r){return i.every(e=>e.reference===r.reference||e.email.toLowerCase()!==r.email.toLowerCase())}(i,{reference:r.reference,email:n.value})?null:{...e}:n=>function Sa(i,r){return i.every(e=>e.email.toLowerCase()!==r.toLowerCase())}(i,n.value)?null:{...e}}function Lt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var r=16*Math.random()|0;return("x"==i?r:3&r|8).toString(16)})}function Ea(i,r){if(1&i&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&i){const e=r.$implicit,n=r.$index,o=t.oxw(),a=t.MAs(2);t.Q6J("hidden",!a.showErrorMessage(e,o.nameNamedErrors.slice(0,n))),t.xp6(),t.Oqu(o.nameErrorMessages[e])}}function Ia(i,r){if(1&i&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&i){const e=r.$implicit,n=r.$index,o=t.oxw(),a=t.MAs(16);t.Q6J("hidden",!a.showErrorMessage(e,o.emailNamedErrors.slice(0,n))),t.xp6(),t.Oqu(o.emailErrorMessages[e])}}let Na=(()=>{class i{constructor(e){this.isPII=!0,this.controlContainer=e,this.bem=(0,I.aP)("rl-party-edit-form"),this.destroy=new w.x,this.emailChange=new t.vpe,this.emailNamedErrors=[];const n=new Array(8);for(let o=0;o<n.length;o+=1)n[o]=(16*Math.random()|0).toString(16);this.id=n.join(""),this.nameChange=new t.vpe,this.nameNamedErrors=[]}ngOnChanges({email:e,emailErrorMessages:n,idPrefix:o,name:a,nameErrorMessages:s}){o&&(o.currentValue?(this.emailID=`${o}email`,this.nameID=`${o}name`):this.setDefaultIDs()),e&&this.emailControl.setValue(e.currentValue||""),a&&this.nameControl.setValue(a.currentValue||""),n&&(this.emailNamedErrors=n.currentValue?Object.keys(n.currentValue):[]),s&&(this.nameNamedErrors=s.currentValue?Object.keys(s.currentValue):[])}ngOnDestroy(){this.destroy.next()}ngOnInit(){this.setupFormGroup(),this.setDefaultIDs()}setDefaultIDs(){this.emailID=`party-${this.id}-email`,this.nameID=`party-${this.id}-name`}setupFormGroup(){const e=this.controlContainer?this.controlContainer.control:void 0;e&&(this.emailControl=e.get("email"),this.nameControl=e.get("name")),this.emailControl=this.emailControl||new g.p4(this.email||"",{validators:[g.kI.email,g.kI.required]}),this.nameControl=this.nameControl||new g.p4(this.name||"",{validators:[g.kI.required]}),this.formGroup=new g.nJ({email:this.emailControl,name:this.nameControl},{asyncValidators:e&&e.asyncValidator||null,validators:e&&e.validator||null,updateOn:e&&e.updateOn||"blur"});const n=(o,a,s)=>{o.valueChanges.pipe((0,C.R)(this.destroy),(0,Oe.x)()).subscribe(l=>{s.emit(l),e&&e.contains(a)&&e.patchValue({[a]:l},{onlySelf:!1})})};n(this.emailControl,"email",this.emailChange),n(this.nameControl,"name",this.nameChange)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(g.gN,8))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-party-edit-form"]],inputs:{email:"email",emailErrorMessages:"emailErrorMessages",idPrefix:"idPrefix",isPII:"isPII",name:"name",nameErrorMessages:"nameErrorMessages"},outputs:{emailChange:"emailChange",nameChange:"nameChange"},features:[t.TTD],decls:29,vars:25,consts:[[3,"formGroup"],["formControlName","name","rl-test","party-edit-form-name",3,"control-id"],["name",""],["data-label","","rl-test","party-edit-form-name-label","translate",""],["label",""],["data-control","",3,"color"],["autocomplete","name","name","name","rl-test","party-edit-form-name-input","formControlName","name",3,"id"],["input",""],["role","presentation",3,"hidden"],["append",""],["data-messages","","rl-typography","error",3,"id"],["messages",""],["formControlName","email","rl-test","party-edit-form-email",3,"control-id"],["email",""],["data-label","","rl-test","party-edit-form-email-label","translate",""],["autocomplete","email","type","email","name","email","trim","blur","rl-test","party-edit-form-email-input","formControlName","email","inputmode","email",3,"id"],[3,"hidden"]],template:function(n,o){if(1&n&&(t.ynx(0,0),t.TgZ(1,"rlng-input",1,2)(3,"div",3,4),t._uU(5,"party-edit-form.name-label"),t.qZA(),t.TgZ(6,"rl-text-input",5),t._UZ(7,"input",6,7)(9,"i",8,9),t.qZA(),t.TgZ(11,"div",10,11),t.SjG(13,Ea,2,2,"div",16,t.x6l),t.qZA()(),t.TgZ(15,"rlng-input",12,13)(17,"div",14,4),t._uU(19,"party-edit-form.email-label"),t.qZA(),t.TgZ(20,"rl-text-input",5),t._UZ(21,"input",15,7)(23,"i",8,9),t.qZA(),t.TgZ(25,"div",10,11),t.SjG(27,Ia,2,2,"div",16,t.x6l),t.qZA()(),t.BQk()),2&n){const a=t.MAs(2),s=t.MAs(16);t.Q6J("formGroup",o.formGroup),t.xp6(),t.Tol(o.bem("name")),t.Q6J("control-id",o.nameID),t.xp6(5),t.Q6J("color",a.invalid?"error":"secondary"),t.xp6(),t.Q6J("id",a.id),t.uIk("aria-describedby",a.messagesID)("data-pii",o.isPII?"value":"none"),t.xp6(2),t.Gre("rl-icon alert-info ",o.bem("alert-icon"),""),t.Q6J("hidden",!a.invalid),t.xp6(2),t.Q6J("id",a.messagesID),t.xp6(2),t.wJu(o.nameNamedErrors),t.xp6(2),t.Tol(o.bem("email")),t.Q6J("control-id",o.emailID),t.xp6(5),t.Q6J("color",s.invalid?"error":"secondary"),t.xp6(),t.Q6J("id",a.id),t.uIk("aria-describedby",s.messagesID)("data-pii",o.isPII?"value":"none"),t.xp6(2),t.Gre("rl-icon alert-info ",o.bem("alert-icon"),""),t.Q6J("hidden",!s.invalid),t.xp6(2),t.Q6J("id",s.messagesID),t.xp6(2),t.wJu(o.emailNamedErrors)}},dependencies:[g.Fj,g.JJ,g.JL,g.sg,g.u,h.Pi,b.tH,zt,St.t,O.$m],styles:[".rl-party-edit-form__alert-icon[_ngcontent-%COMP%]{font-size:16px;margin:0 12px 0 0}"]})}return i})();function Ra(i,r){if(1&i&&(t.TgZ(0,"div",13),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.Tol(e.bem("hero-text")),t.xp6(),t.Oqu(t.lcZ(2,3,e.heroKey))}}function Fa(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteParty.emit())}),t._UZ(1,"i",4),t._uU(2),t.ALo(3,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.xp6(),t.Gre("rl-icon trash-bin ",e.bem("delete-icon"),""),t.xp6(),t.hij(" ",t.lcZ(3,4,"edit-party-modal.delete")," ")}}const Ua=i=>({backgroundColor:i}),qa=i=>({required:i}),Ja=(i,r,e)=>({required:i,email:r,uniquePartyEmail:e});let Ha=(()=>{class i{constructor(e){this.translateService=e,this.allParties=[],this.canDelete=!1,this.canEditEmail=!0,this.deleteParty=new t.vpe,this.saveParty=new t.vpe,this.destroy=new w.x,this.bem=(0,I.aP)("rl-edit-party"),this.heading="",this.heroKey="",this.isNewParty=!0,this.partyColor="";const n=/^\s+$/,o=new Mt("",{validators:[g.kI.required,s=>n.test(s.value)?{required:"A value is required"}:null]}),a=new Mt("");this.formGroup=new Jt({name:o,email:a})}ngOnChanges({allParties:e,canEditEmail:n}){e&&!e.firstChange&&(this.allParties=e.currentValue??[],this.addEmailValidators()),n&&(this.canEditEmail=!!n.currentValue,this.setupEmailChangeability())}ngOnInit(){this.setupParty(),this.setupEmailChangeability(),this.setupLanguage().subscribe(()=>this.getHeading())}ngOnDestroy(){this.destroy.next()}onSubmit(){if(this.formGroup.markAllAsTouched(),this.formGroup.markAsSubmitted(),this.formGroup.valid){const e=this.party?.id??Lt(),n=this.party?.reference??Lt(),o={isTemporary:!0,roles:[],...this.party,id:e,email:this.formGroup.get("email").value,legalName:this.formGroup.get("name").value,reference:n};this.saveParty.emit(o)}}setupEmailChangeability(){const e=this.formGroup.get("email");this.canEditEmail?e.enable():e.disable()}setupLanguage(){if("edit-party-modal-signers"===this.language){const e=this.translateService.currentLang,n=this.translateService.getTranslation(e).pipe((0,C.R)(this.destroy));return n.subscribe(o=>{this.translateService.setTranslation(e,{"edit-party-modal":o["edit-party-modal-signers"]},!0),this.destroy.pipe((0,dt.q)(1)).subscribe(()=>{this.translateService.setTranslation(e,{"edit-party-modal":o["edit-party-modal"]},!0)})}),n.pipe((0,it.h)(void 0))}return(0,Y.of)(void 0)}setupParty(){this.isNewParty=!this.party,this.addEmailValidators(),this.formGroup.get("name").setValue(this.party?.legalName??""),this.formGroup.get("email").setValue(this.party?.email??""),this.heroKey=this.isNewParty?"edit-party-modal.hero-text-new":"edit-party-modal.hero-text-edit",this.partyColor=this.party?.metaData?.style?.background||this.nextPartyColor||"transparent"}addEmailValidators(){this.formGroup.get("email").setValidators([g.kI.required,we,Za(this.allParties,this.isNewParty?void 0:this.party)])}getHeading(){(this.isNewParty?this.translateService.get("edit-party-modal.new-party-heading"):Dt((0,Y.of)(this.party.legalName??""),this.formGroup.get("name").valueChanges).pipe((0,C.R)(this.destroy),(0,B.U)(n=>n.trim()),(0,Oe.x)(),(0,et.z)(n=>this.translateService.get("edit-party-modal.edit-party-heading",{name:(n||this.party.legalName)??""})))).subscribe(n=>{this.heading=n})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(h.sK))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-edit-party-modal"]],inputs:{allParties:"allParties",canDelete:"canDelete",canEditEmail:"canEditEmail",language:"language",party:"party",nextPartyColor:"nextPartyColor"},outputs:{deleteParty:"deleteParty",saveParty:"saveParty"},features:[t.TTD],decls:24,vars:35,consts:[["fakePath","editParty","rl-test","edit-party"],["product","sign"],["rl-modal-header-widget","left"],["rl-modal-title","","rl-typography","heading"],["role","presentation"],["rl-modal-header-widget","right"],["role","presentation",3,"ngStyle"],["rl-modal-body-part","heroText","rl-typography","bold",3,"class"],["rl-modal-body-part","container",3,"formGroup","ngSubmit"],["rl-modal-body-part","container",3,"nameErrorMessages","emailErrorMessages"],["class","btn btn-secondary","rl-modal-body-part","tertiaryButton","rl-test","deleteButton","type","button"],["rl-modal-body-part","actionsContainer"],["rl-modal-body-part","primaryAction","rl-test","submitButton","type","submit",1,"btn","btn-primary"],["rl-modal-body-part","heroText","rl-typography","bold"],["rl-modal-body-part","tertiaryButton","rl-test","deleteButton","type","button",1,"btn","btn-secondary",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1),t._UZ(2,"rl-modal-header-back",2),t.TgZ(3,"h1",3),t._UZ(4,"i",4),t._uU(5),t.qZA(),t._UZ(6,"rl-modal-header-close",5),t.qZA(),t.TgZ(7,"rl-modal-body")(8,"div"),t._UZ(9,"div",6),t.YNc(10,Ra,3,5,"div",7),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"form",8),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t._UZ(13,"rl-party-edit-form",9),t.ALo(14,"translate"),t.ALo(15,"translate"),t.ALo(16,"translate"),t.ALo(17,"translate"),t.YNc(18,Fa,4,6,"button",10),t.TgZ(19,"div",11)(20,"button",12),t._uU(21),t.ALo(22,"translate"),t.qZA()()()(),t._UZ(23,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(3),t.Tol(o.bem("title")),t.xp6(),t.Gre("rl-icon ",o.isNewParty?"addsigner":"settings",""),t.xp6(),t.hij(" ",o.heading," "),t.xp6(4),t.Tol(o.bem("party-bar")),t.Q6J("ngStyle",t.VKq(27,Ua,o.partyColor)),t.xp6(),t.um2(10,t.lcZ(11,15,o.heroKey)?10:-1),t.xp6(2),t.Q6J("formGroup",o.formGroup),t.xp6(),t.Q6J("nameErrorMessages",t.VKq(29,qa,t.lcZ(14,17,"edit-party-modal.name-required")))("emailErrorMessages",t.kEZ(31,Ja,t.lcZ(15,19,"edit-party-modal.email-required"),t.lcZ(16,21,"edit-party-modal.email-required"),t.lcZ(17,23,"edit-party-modal.email-already-in-use"))),t.xp6(5),t.um2(18,o.canDelete?18:-1),t.xp6(3),t.Oqu(t.lcZ(22,25,o.isNewParty?"edit-party-modal.submit-new":"edit-party-modal.submit-edit")))},dependencies:[v.PC,g._Y,g.JL,g.sg,q,_.zS,k,U,T,W,_.vP,A,S,b.tH,O.$m,Na,h.X$],styles:[".rl-edit-party__title[_ngcontent-%COMP%]{margin:auto .5em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.rl-edit-party__party-bar[_ngcontent-%COMP%]{background-color:transparent;border-bottom-left-radius:4px;border-bottom-right-radius:4px;height:4px;width:100%}.rl-edit-party__delete-icon[_ngcontent-%COMP%]{padding-right:.3em;vertical-align:text-top}"]})}return i})(),Ba=(()=>{class i{constructor(e,n){this.modalControlService=e,this.store=n,this.destroy=new w.x,this.allParties=[],this.canDelete=!1,this.canEdit=!0}ngOnInit(){const e=this.store.getState$().pipe((0,C.R)(this.destroy));e.pipe((0,Ct.j)("binder")).subscribe(n=>this.useBinder(n)),e.pipe((0,Ct.j)("partyRoute")).subscribe(n=>this.usePartyRoute(n)),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(n=>this.onNavigate(n))}ngOnDestroy(){this.destroy.next(),this.store.dispatch((0,rt.Z)())}deleteParty(){this.canDelete&&(this.store.dispatch((0,nt.sQ)(this.party)),this.modalControlService.navigate("back"))}saveParty(e){const n=this.party?(0,nt.CE)(e):(0,nt.Q1)(e);if(this.store.dispatch(n),"edit-party-modal-signers"===this.language){const{binder:o}=this.store.getState(),s=(0,m.sG)({binder:o}).filter(l=>l.isFresh).pop();if(s){const l={...s,partyReference:e.reference};this.store.dispatch((0,L.yM)(l))}}this.modalControlService.navigate("back")}onNavigate({data:e}){"back"===e.to&&this.modalControlService.close(c.G.UserNavigatedBack,{nextModal:this.returnRoute})}useBinder(e){this.allParties=e.parties,this.nextPartyColor=(0,ve.Cv)({binder:e})}usePartyRoute(e){this.canDelete=!!e.party&&!(0,m.jn)(e.party,"OWNER")&&"inviteCollaboratorsModal"!==e?.returnRoute,this.canEdit=!(0,m.jn)(e.party,"OWNER"),this.party=e.party,this.returnRoute=e.returnRoute}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e),t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-edit-party-modal-connected"]],inputs:{language:"language"},decls:1,vars:6,consts:[[3,"allParties","canDelete","canEditEmail","language","nextPartyColor","party","deleteParty","saveParty"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-edit-party-modal",0),t.NdJ("deleteParty",function(){return o.deleteParty()})("saveParty",function(s){return o.saveParty(s)}),t.qZA()),2&n&&t.Q6J("allParties",o.allParties)("canDelete",o.canDelete)("canEditEmail",o.canEdit)("language",o.language)("nextPartyColor",o.nextPartyColor)("party",o.party)},dependencies:[Ha],encapsulation:2})}return i})();var Ae=u(4520);let La=(()=>{class i{constructor(){this.destroy=new w.x}ngAfterContentInit(){const e=this.partyElements.toArray().map(o=>o.nativeElement.querySelector('[role="radio"]')),n=this.parties.toArray();for(let o=0;o<n.length;o+=1)null!==e[o]&&(0,K.R)(e[o],"keydown").pipe((0,C.R)(this.destroy),(0,B.U)(({key:a})=>"ArrowUp"===a||"ArrowLeft"===a?0===o?n.length-1:o-1:"ArrowDown"===a||"ArrowRight"===a?o===n.length-1?0:o+1:-1),(0,Ae.h)(a=>a>=0)).subscribe(a=>{n[a].onClick.emit(n[a].party),e[a].focus()})}ngOnDestroy(){this.destroy.next()}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275dir=t.lG2({type:i,selectors:[["","rl-party-group",""]],contentQueries:function(n,o,a){if(1&n&&(t.Suo(a,ht,5),t.Suo(a,ht,5,t.SBq)),2&n){let s;t.iGM(s=t.CRH())&&(o.parties=s),t.iGM(s=t.CRH())&&(o.partyElements=s)}}})}return i})();function Ga(i,r){1&i&&(t._UZ(0,"i",13),t.TgZ(1,"span",14),t._uU(2,"edit-input-modal_add-date-header"),t.qZA())}function Va(i,r){1&i&&(t._UZ(0,"i",15),t.TgZ(1,"span",14),t._uU(2,"edit-input-modal_select-signer-header"),t.qZA())}function Qa(i,r){1&i&&(t._UZ(0,"i",16),t.TgZ(1,"span",14),t._uU(2,"edit-input-modal_add-initials-header"),t.qZA())}function Ya(i,r){1&i&&(t._UZ(0,"i",17),t.TgZ(1,"span",14),t._uU(2,"edit-input-modal_edit-custom-text-header"),t.qZA())}function Wa(i,r){1&i&&(t.TgZ(0,"h4",18),t._UZ(1,"com",19),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","edit-input-modal_date-heading"))}function $a(i,r){1&i&&(t.TgZ(0,"h4",18),t._UZ(1,"com",19),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","edit-input-modal_signature-heading"))}function Ka(i,r){1&i&&(t.TgZ(0,"h4",18),t._UZ(1,"com",19),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","edit-input-modal_initials-heading"))}function ja(i,r){1&i&&(t.TgZ(0,"h4",18),t._UZ(1,"com",19),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","edit-input-modal_question-heading"))}const Xa=i=>({number:i});function tr(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"li")(1,"rl-party",20),t.NdJ("onCogClick",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.openEditModal(o))})("toggle",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.selectParty(o))}),t.ALo(2,"translate"),t.qZA()()}if(2&i){const e=r.$implicit,n=t.oxw();t.xp6(),t.Q6J("checked",(null==e?null:e.reference)===(null==n.selectedParty?null:n.selectedParty.reference))("color",null==e?null:e.metaData.style.background)("defaultDisplayValue",t.xi3(2,6,"edit-input-modal_party-name-placeholder",t.VKq(9,Xa,null==e?null:e.missingLegalNameIndex)))("party",e)("showCog","IN_PREPARATION"==(null==n.binder?null:n.binder.status))("showRadio",!0)}}function er(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleEditSignerModal())}),t._UZ(1,"span",22)(2,"com",19),t.qZA()}2&i&&(t.xp6(2),t.Q6J("key","edit-input-modal_add-new-signer"))}function nr(i,r){1&i&&t._UZ(0,"span",29)}const Te=i=>({"over-limit":i});function or(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",23)(1,"div",24),t._UZ(2,"com",19),t.qZA(),t.TgZ(3,"div")(4,"textarea",25),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.prompt=o)}),t._uU(5,"            "),t.qZA(),t.YNc(6,nr,1,0,"span",26),t.TgZ(7,"div",27)(8,"span"),t._uU(9),t.qZA()()(),t.TgZ(10,"div",28),t._UZ(11,"com",19),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("key","edit-input-modal_edit-custom-text-label"),t.xp6(2),t.ekj("invalid",e.checkPromptLengthError()),t.Q6J("comPlaceholder","edit-input-modal_edit-custom-text-prompt")("ngModel",e.prompt),t.xp6(2),t.um2(6,e.checkPromptLengthError()?6:-1),t.xp6(),t.Q6J("ngClass",t.VKq(10,Te,e.checkPromptLengthError())),t.xp6(2),t.hij("",e.prompt.length,"/150"),t.xp6(),t.Q6J("ngClass",t.VKq(12,Te,e.checkPromptLengthError())),t.xp6(),t.Q6J("key","edit-input-modal_text-to-long")}}function ir(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",30)(1,"input",31),t.NdJ("change",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.input.optional=!o.input.optional)}),t.qZA(),t.TgZ(2,"label",32),t._UZ(3,"span",33)(4,"com",19),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(),t.Q6J("checked",!e.input.optional),t.xp6(3),t.Q6J("key","edit-input-required-text")}}const ar=()=>({key:"edit-input-modal_select-signer"}),rr=()=>({key:"edit-input-modal_saving"});function sr(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"custom-button",34),t.NdJ("onClick",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updatePlaceholderInput())}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("btnType","button")("btnClass","btn btn-primary")("defaultTranslation",t.DdM(5,ar))("loadingTranslation",t.DdM(6,rr))("isLoading",e.actionInProgress)}}function lr(i,r){1&i&&t._UZ(0,"com",19),2&i&&t.Q6J("key","edit-input-modal_continue")}function cr(i,r){1&i&&t._UZ(0,"com",19),2&i&&t.Q6J("key","edit-input-modal_select-signer")}function dr(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updateInputAndCloseModal())}),t.YNc(1,lr,1,1,"com",19)(2,cr,1,1,"com",19),t.qZA()}if(2&i){const e=t.oxw();t.ekj("disabled",e.checkPromptLengthError()&&"CUSTOM_TEXT"==(null==e.input?null:e.input.type)),t.Q6J("disabled",e.checkPromptLengthError()&&"CUSTOM_TEXT"==(null==e.input?null:e.input.type)),t.xp6(),t.um2(1,"SIGNATURE_TEXT"!=(null==e.input?null:e.input.type)?1:-1),t.xp6(),t.um2(2,"SIGNATURE_TEXT"==(null==e.input?null:e.input.type)?2:-1)}}let mr=(()=>{class i{constructor(e,n,o,a,s){this.store=e,this.documentEl=n,this.partyService=o,this.signService=a,this.alertService=s,this.hideModal=new t.vpe,this.editParty=new t.vpe,this.showNewSignerModal=!1,this.parties=[],this.subscriptions=[],this.actionInProgress=!1;const l=this.store.getState();this.setupComponent(l);const d=this.store.subscribe(p=>{this.setupComponent(p)});this.subscriptions.push(d)}onkeydown(e){13==e.which&&!this.showNewSignerModal&&"CUSTOM_TEXT"!=this.input.type&&this.hideModal.emit()}setupComponent(e){this.currentParty=(0,m.kT)(e),this.binder=e.binder,this.parties=(0,m.CH)(this.binder,"OWNER","SIGNER","PAYEE","PAYER").concat((0,m.NL)(this.binder)),this.input=this.getCurrentInput()}ngOnInit(){this.input=this.getCurrentInput(),this.selectedParty=this.getSelectedParty(),this.prompt=this.input.prompt||"",this.binder.parties.forEach(e=>{if(e.isTemporary&&!(0,m.jn)(e,"SIGNER")){const n=JSON.parse(JSON.stringify(e));n.roles.push("SIGNER"),this.store.dispatch((0,nt.CE)(n))}})}ngOnDestroy(){this.subscriptions.forEach(e=>e())}getCurrentInput(){return(0,m.uM)(this.store.getState())}updateInputAndCloseModal(){this.updateInputInStore(),this.hideModal.emit()}updateInputInStore(){const e={...this.input,partyReference:this.selectedParty.reference,legalName:this.selectedParty.legalName,style:this.selectedParty.metaData.style,optional:this.input.optional,modalOpened:!0,isFresh:!1};"CUSTOM_TEXT"==this.input.type&&(e.prompt=this.prompt.length?this.prompt.replace(/"/g,"'"):""),this.store.dispatch(L.yM(e))}updatePlaceholderInput(){this.updateInputInStore(),this.actionInProgress=!0,this.partyService.ensurePartyRefIntegrity().subscribe(()=>this.onUpdateSucces(),()=>this.onUpdateError())}onUpdateSucces(){this.actionInProgress=!1,this.alertService.setAlertMessage({message:"edit-input-modal_changes-saved",type:"success"}),this.store.dispatch(L.yM({...this.input,active:!1,isFresh:!1})),this.hideModal.emit()}onUpdateError(){this.alertService.setAlertMessage({message:"edit-input-modal_changes-error",type:"danger"})}getSelectedParty(){return this.selectedParty&&this.selectedParty.reference?this.selectedParty:this.input&&this.input.partyReference&&this.partyAssignedToInputExists()?this.binder.parties.find(e=>e.reference==this.input.partyReference):(0,m.oJ)(this.binder,"OWNER")}partyAssignedToInputExists(){return!!this.binder.parties.find(e=>e.reference==this.input.partyReference)}selectParty(e){this.selectedParty=e}toggleEditSignerModal(){this.store.dispatch((0,rt.Q)({party:void 0,returnRoute:"editInputModal"})),this.editParty.emit()}openEditModal(e){this.store.dispatch((0,rt.Q)({party:e,returnRoute:"editInputModal"})),this.editParty.emit()}checkPromptLengthError(){return!!this.prompt&&this.prompt.length>150}close(){this.store.dispatch(this.input.isFresh?L.Ag({...this.input}):L.jq({id:this.input.id})),this.hideModal.emit()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(v.K0),t.Y36(Zt.p),t.Y36(F.f),t.Y36(R.c))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["edit-input-modal"]],hostBindings:function(n,o){1&n&&t.NdJ("keydown",function(s){return o.onkeydown(s)},!1,t.evT)},outputs:{hideModal:"hideModal",editParty:"editParty"},decls:24,vars:13,consts:[["fakePath","editInput","rl-test","edit-input-modal"],["product","sign"],["rl-modal-title","","rl-typography","heading"],["rl-modal-header-widget","right"],[1,"modal-wrapper","modal-content"],["class","modal-content-heading"],["rl-party-group","",1,"parties-list"],["rl-test","add-new-signer","class","btn btn-secondary btn-block add-new-signer"],["class","custom-message"],["class","required-button"],[1,"bottom-buttons"],[3,"btnType","btnClass","defaultTranslation","loadingTranslation","isLoading"],["class","btn btn-primary",3,"disabled"],["role","presentation",1,"header-icon","rl-icon","toolbar-calendar"],["translate",""],["role","presentation",1,"header-icon","rl-icon","user-input"],["role","presentation",1,"header-icon","rl-icon","toolbar-initial"],["role","presentation",1,"header-icon","rl-icon","toolbar-textbox"],[1,"modal-content-heading"],[3,"key"],[3,"checked","color","defaultDisplayValue","party","showCog","showRadio","onCogClick","toggle"],["rl-test","add-new-signer",1,"btn","btn-secondary","btn-block","add-new-signer",3,"click"],[1,"rl-icon","add"],[1,"custom-message"],[1,"custom-message-label"],["name","custom-message","cols","20","rows","10",3,"comPlaceholder","ngModel","ngModelChange"],["class","rl-icon dispute"],[1,"char-counter",3,"ngClass"],[1,"text-length-error",3,"ngClass"],[1,"rl-icon","dispute"],[1,"required-button"],["type","checkbox","id","input-required","name","input-required",3,"checked","change"],["for","input-required",1,"required-label"],[1,"rl-icon","checkbox-check","doc-man-checkbox"],[3,"btnType","btnClass","defaultTranslation","loadingTranslation","isLoading","onClick"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t.YNc(3,Ga,3,0)(4,Va,3,0)(5,Qa,3,0)(6,Ya,3,0),t.qZA(),t._UZ(7,"rl-modal-header-close",3),t.qZA(),t.TgZ(8,"rl-modal-body")(9,"div",4),t.YNc(10,Wa,2,1,"h4",5)(11,$a,2,1,"h4",5)(12,Ka,2,1,"h4",5)(13,ja,2,1,"h4",5),t.TgZ(14,"ul",6),t.SjG(15,tr,3,11,"li",null,t.x6l),t.qZA(),t.YNc(17,er,3,1,"button",7)(18,or,12,14,"div",8)(19,ir,5,2,"div",9),t.TgZ(20,"div",10),t.YNc(21,sr,1,7,"custom-button",11)(22,dr,3,5,"button",12),t.qZA()()(),t._UZ(23,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(3),t.um2(3,"DATE_SIGNED"==(null==o.input?null:o.input.type)?3:-1),t.xp6(),t.um2(4,"SIGNATURE_TEXT"==(null==o.input?null:o.input.type)?4:-1),t.xp6(),t.um2(5,"INITIALS"==(null==o.input?null:o.input.type)?5:-1),t.xp6(),t.um2(6,"CUSTOM_TEXT"==(null==o.input?null:o.input.type)?6:-1),t.xp6(4),t.um2(10,"DATE_SIGNED"==(null==o.input?null:o.input.type)?10:-1),t.xp6(),t.um2(11,"SIGNATURE_TEXT"==(null==o.input?null:o.input.type)?11:-1),t.xp6(),t.um2(12,"INITIALS"==(null==o.input?null:o.input.type)?12:-1),t.xp6(),t.um2(13,"CUSTOM_TEXT"==(null==o.input?null:o.input.type)?13:-1),t.xp6(2),t.wJu(o.parties),t.xp6(2),t.um2(17,o.parties.length<100?17:-1),t.xp6(),t.um2(18,"CUSTOM_TEXT"==(null==o.input?null:o.input.type)?18:-1),t.xp6(),t.um2(19,"CUSTOM_TEXT"==(null==o.input?null:o.input.type)||"INITIALS"==(null==o.input?null:o.input.type)?19:-1),t.xp6(2),t.um2(21,"PLACEHOLDER"==(null==o.input?null:o.input.position.type)?21:-1),t.xp6(),t.um2(22,"PLACEHOLDER"!=(null==o.input?null:o.input.position.type)?22:-1))},dependencies:[v.mk,J.w,Me,g.Fj,g.JJ,g.On,h.Pi,_.zS,k,U,T,_.vP,A,S,z.x,b.tH,O.$m,La,ht,h.X$],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}input[type=checkbox][_ngcontent-%COMP%]{display:none}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   .checkbox-check[_ngcontent-%COMP%]{width:22px;height:22px;font-size:14px;float:left;color:transparent;display:flex;align-items:center;justify-content:center;border:1px solid #cccccc}input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   .checkbox-check[_ngcontent-%COMP%]{color:#fff;background-color:#d68021}input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   .checkbox-check.doc-man-checkbox[_ngcontent-%COMP%]{background-color:var(--rl-action-primary-default, #d68021)}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   .checkbox-check.show-error[_ngcontent-%COMP%]{border-color:#e62300}.modal-background[_ngcontent-%COMP%]{touch-action:auto;position:fixed;inset:0;z-index:7;width:100%;height:100%;border-radius:3px;background-color:#3339;transition:opacity .2s;opacity:0;visibility:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch;overflow-x:hidden;display:flex;align-items:center;justify-content:center;flex-direction:column;opacity:1;visibility:visible}.modal-background.modal-show[_ngcontent-%COMP%], .modal-background.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.outer-wrapper[_ngcontent-%COMP%]{padding:16px;width:100%;box-sizing:border-box;margin:auto}.slide-wrapper[_ngcontent-%COMP%]{overflow:auto;width:100%}.rl-icon.header-icon[_ngcontent-%COMP%]{padding-right:8px;font-size:21px}.rl-icon.header-icon.toolbar-textbox[_ngcontent-%COMP%]{font-size:26px}.rl-icon.header-icon.toolbar-initial[_ngcontent-%COMP%]{font-size:16px}.rl-icon.header-icon.toolbar-calendar[_ngcontent-%COMP%]{font-size:24px}.rl-icon.edit-signer[_ngcontent-%COMP%]{top:-3px;color:#000;position:relative}.rl-icon.text[_ngcontent-%COMP%]{font-size:20px;margin-right:5px}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;padding:24px 8px;width:100%;max-width:416px;box-sizing:border-box;margin:0 auto;padding:24px 8px 0!important}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:24px 8px 40px}}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   span.rl-icon.dispute[_ngcontent-%COMP%]{top:6px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;resize:none;outline:none!important;font-size:16px;font-family:Open Sans;background-color:#f7f7f8;font-weight:400;margin-top:8px;padding:10px;border-radius:2px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border:1px solid #e62300}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .custom-text-caption[_ngcontent-%COMP%]{font-size:12px;clear:both}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;position:absolute;right:5px;bottom:5px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{width:100%;padding:0;margin-top:24px;display:flex;justify-content:space-between;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{width:100%;height:48px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse;height:48px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{flex:0 1 50%;height:100%;margin-right:8px;margin-bottom:0}}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:600;font-size:16px;line-height:20px;letter-spacing:.0125em;margin:16px 0 0}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]:first-child{margin-top:0}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .item-ref-label[_ngcontent-%COMP%]{display:block;height:33px;margin:20px 0;line-height:33px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   span.checkbox-check[_ngcontent-%COMP%]{margin-right:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:18px;position:relative}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .rl-icon.dispute[_ngcontent-%COMP%]{position:absolute;top:44px;right:12px;font-size:25px;color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;padding:15px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important;border-radius:2px;outline:0;box-sizing:border-box;background-color:#f7f7f8;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .party-form-control.disabled[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.disabled[_ngcontent-%COMP%]{pointer-events:none}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .party-form-control.invalid[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.invalid[_ngcontent-%COMP%]{box-shadow:0 2px #e62300,inset 1px 1px #e62300,inset -1px 1px #e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control.margin-top[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.margin-top[_ngcontent-%COMP%]{margin-top:6px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:12px;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .party-ref-label[_ngcontent-%COMP%]{display:block;height:33px;line-height:33px;cursor:pointer;max-width:calc(100% - 60px)}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:24px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   .doc-man-checkbox[_ngcontent-%COMP%]:before{font-size:14px;position:relative}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:14px;display:flex;flex-direction:row;align-items:center}.modal-content[_ngcontent-%COMP%]   .question-box[_ngcontent-%COMP%]{border-bottom:1px solid #C5C5C5;padding-top:10px;padding-bottom:10px;width:100%}.modal-content[_ngcontent-%COMP%]   .question-box[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{cursor:pointer}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .parties-list[_ngcontent-%COMP%]{padding-left:0;list-style:none;margin:0}.modal-content[_ngcontent-%COMP%]   .custom-message-label[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:8px;font-size:16px;font-weight:400}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{margin-top:0}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{margin-top:0;height:88px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{bottom:10px}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{color:#3e3f4c;border:1px solid #3E3F4C;padding:10px 30px 10px 17px;text-align:left;display:block;font-weight:400;font-size:16px}.modal-content[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{font-size:20px}.modal-content[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]   .rl-icon.delete[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-weight:400}.modal-content[_ngcontent-%COMP%]   .btn-secondary.add-new-signer[_ngcontent-%COMP%]{padding:12px 30px 12px 17px;text-align:center}.modal-content[_ngcontent-%COMP%]   .btn-secondary.add-new-signer[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{vertical-align:bottom}.modal-content[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{display:block;width:100%}.modal-content[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{resize:none;height:120px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;margin-bottom:0;float:right}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content.add-new[_ngcontent-%COMP%]{padding-top:10px}.modal-content.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;display:block;width:100%;margin:0 auto}.modal-content.add-new[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none;cursor:default}.modal-content.add-new[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%]:hover{background-color:transparent}.modal-content.add-new[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0;color:#e62300;font-size:16px}.inactive[_ngcontent-%COMP%]{display:none}.error-red[_ngcontent-%COMP%]{color:#e62300}rl-party[_ngcontent-%COMP%]{display:block;margin-bottom:16px}"],data:{animation:[P.i_,P.Ic,P.y0]}})}return i})();var ot=u(9265);function gr(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"li")(1,"rl-party",12),t.NdJ("onCogClick",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editParty(o))})("toggle",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.selectParty(o))}),t.qZA()()}if(2&i){const e=r.$implicit,n=r.$index,o=t.oxw();t.xp6(),t.MGl("rl-test","payment-payer-party-",n,""),t.Q6J("color",e.metaData.style.background)("checked",e.reference===(null==o.selectedParty?null:o.selectedParty.reference))("party",e)("showCog",!0)("showRadio",!0)}}let ur=(()=>{class i{constructor(e,n){this.modalControlService=e,this.store=n,this.bem=(0,I.aP)("rl-payment-paying-modal"),this.destroy=new w.x,this.parties=[]}addNewParty(){this.modalControlService.navigate("newParty")}editParty(e){this.modalControlService.navigate("editParty",{party:e})}getSelectedParty(e,n){return n?e.find(o=>o.id===n)||this.getSelectedParty(e):1===e.length?e[0]:void 0}next(){const{paymentAgreementTemp:e}=this.store.getState();this.store.dispatch((0,ot.S$)(this.selectedParty.id)),e.payeeID===this.selectedParty.id&&this.store.dispatch((0,ot.IZ)(void 0)),this.modalControlService.navigate("next")}ngOnDestroy(){this.destroy.next(),this.selectedParty=void 0}ngOnInit(){this.store.getState$().pipe((0,C.R)(this.destroy)).subscribe(e=>this.stateChanged(e)),this.modalControlService.close$.pipe((0,C.R)(this.destroy)).subscribe(e=>this.onClose(e)),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(e=>this.onNavigate(e))}onClose(e){e.data.reason!==c.G.UserNavigatedNext&&this.store.dispatch((0,ot.hQ)())}onNavigate(e){"editParty"===e.data.to?(this.store.dispatch((0,rt.Q)({party:e.data.party,returnRoute:"paymentPayerModal"})),this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:"editParty"})):"newParty"===e.data.to?(this.store.dispatch((0,rt.Q)({party:void 0,returnRoute:"paymentPayerModal"})),this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:"editParty"})):"next"===e.data.to?this.store.getState().paymentAgreementTemp.payeeID?this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:"paymentDetails"}):this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:"selectPayee"}):"back"===e.data.to&&this.modalControlService.close(c.G.UserNavigatedBack)}selectParty(e){this.selectedParty=e}stateChanged(e){this.parties=e.binder.parties.filter(n=>e.paymentAgreementTemp.payeeID!==n.id),this.selectedParty=this.getSelectedParty(this.parties,e.paymentAgreementTemp.payerID)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e),t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-paying-modal"]],decls:22,vars:17,consts:[["fakePath","payment/createAgreement/payer","rl-test","payment-select-payer"],["product","wallet"],["rl-modal-header-widget","left"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"rl-icon","card"],["rl-modal-header-widget","right"],["rl-modal-body-part","heroText","rl-modal-description","","translate","",1,"bold-700"],["rl-modal-body-part","container"],["rl-modal-body-part","actionsContainer"],["btnClass","btn btn-primary","rl-modal-body-part","primaryAction","rl-test","payment-payer-next",3,"isDisabled","onClick"],["rl-modal-body-part","secondaryAction","rl-test","payment-payer-add",1,"btn","btn-secondary",3,"click"],["role","presentation"],[3,"color","checked","party","rl-test","showCog","showRadio","onCogClick","toggle"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1),t._UZ(2,"rl-modal-header-back",2),t.TgZ(3,"h1",3),t._UZ(4,"i",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"rl-modal-header-close",5),t.qZA(),t.TgZ(8,"rl-modal-body")(9,"p",6),t._uU(10,"payment-payer-modal.primary-text"),t.qZA(),t.TgZ(11,"ul",7),t.SjG(12,gr,2,6,"li",null,t.x6l),t.qZA(),t.TgZ(14,"div",8)(15,"custom-button",9),t.NdJ("onClick",function(){return o.next()}),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"button",10),t.NdJ("click",function(){return o.addNewParty()}),t._UZ(19,"i",11),t._uU(20),t.ALo(21,"translate"),t.qZA()()()()),2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,11,"payment-payer-modal.heading")," "),t.xp6(4),t.Tol(o.bem("hero")),t.xp6(2),t.Tol(o.bem("party-list")),t.xp6(),t.wJu(o.parties),t.xp6(3),t.Q6J("isDisabled",!o.selectedParty),t.xp6(),t.Oqu(t.lcZ(17,13,"payment-payer-modal.next")),t.xp6(3),t.Gre("rl-icon add ",o.bem("add-icon"),""),t.xp6(),t.hij(" ",t.lcZ(21,15,"payment-payer-modal.add-new-payer"),""))},dependencies:[h.Pi,q,_.zS,k,T,W,_.vP,_.Wb,A,S,z.x,b.tH,O.$m,ht,h.X$],styles:[".rl-payment-paying-modal__hero[_ngcontent-%COMP%]{text-align:center}.rl-payment-paying-modal__party-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.rl-payment-paying-modal__add-icon[_ngcontent-%COMP%]{padding-right:.3em;vertical-align:text-top}rl-party[_ngcontent-%COMP%]{display:block}"]})}return i})(),_r=(()=>{class i{constructor(e,n){this.modalControlService=e,this.store=n,this.bem=(0,I.aP)("rl-select-role-modal"),this.destroy=new w.x}handleChange(e){this.selectedOption=e.target.id}next(){const e=(0,m.kT)(this.store.getState()).id;"payeeRole"===this.selectedOption?this.store.dispatch((0,ot.IZ)(e)):"payerRole"===this.selectedOption&&this.store.dispatch((0,ot.S$)(e)),this.modalControlService.navigate(this.selectedOption)}ngOnDestroy(){this.destroy.next(),this.selectedOption=void 0}ngOnInit(){this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(e=>this.onNavigate(e))}onNavigate(e){this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:this.selectedOption})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e),t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-select-role-modal"]],decls:33,vars:35,consts:[["fakePath","payment/createAgreement/yourRole","rl-test","payment-select-role"],["product","wallet"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"rl-icon","card"],["rl-modal-header-widget","right"],["rl-modal-body-part","heroText","rl-modal-description","","translate","",1,"bold-700"],["id","payeeRole","rl-test","payment-select-payee-role","type","radio","radioVariant","secondary",3,"checked","change"],["payeeRole",""],["id","payerRole","rl-test","payment-select-payer-role","type","radio","radioVariant","secondary",3,"checked","change"],["payerRole",""],["id","otherRole","rl-test","payment-select-other-role","type","radio","radioVariant","secondary",3,"checked","change"],["otherRole",""],["rl-modal-body-part","actionsContainer"],["btnClass","btn btn-primary","rl-modal-body-part","primaryAction","rl-test","payment-select-role-next",3,"isDisabled","onClick"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._UZ(3,"i",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"rl-modal-header-close",4),t.qZA(),t.TgZ(7,"rl-modal-body")(8,"p",5),t._uU(9," payment-select-role.primary-text"),t.qZA(),t.TgZ(10,"div")(11,"label")(12,"rl-input",6,7),t.NdJ("change",function(s){return o.handleChange(s)}),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"label")(18,"rl-input",8,9),t.NdJ("change",function(s){return o.handleChange(s)}),t.qZA(),t.TgZ(20,"p"),t._uU(21),t.ALo(22,"translate"),t.qZA()(),t.TgZ(23,"label")(24,"rl-input",10,11),t.NdJ("change",function(s){return o.handleChange(s)}),t.qZA(),t.TgZ(26,"p"),t._uU(27),t.ALo(28,"translate"),t.qZA()()(),t.TgZ(29,"div",12)(30,"custom-button",13),t.NdJ("onClick",function(){return o.next()}),t._uU(31),t.ALo(32,"translate"),t.qZA()()()()),2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,25,"payment-select-role.heading")," "),t.xp6(4),t.Tol(o.bem("hero")),t.xp6(2),t.Tol(o.bem("roleContainer")),t.xp6(),t.Tol(o.bem("inputContainer")),t.xp6(),t.Tol(o.bem("radio")),t.Q6J("checked","payeeRole"===o.selectedOption),t.xp6(3),t.hij(" ",t.lcZ(16,27,"payment-select-role.payee-role")," "),t.xp6(2),t.Tol(o.bem("inputContainer")),t.xp6(),t.Tol(o.bem("radio")),t.Q6J("checked","payerRole"===o.selectedOption),t.xp6(3),t.hij(" ",t.lcZ(22,29,"payment-select-role.payer-role")," "),t.xp6(2),t.Tol(o.bem("inputContainer")),t.xp6(),t.Tol(o.bem("radio")),t.Q6J("checked","otherRole"===o.selectedOption),t.xp6(3),t.hij(" ",t.lcZ(28,31,"payment-select-role.other-role")," "),t.xp6(3),t.Q6J("isDisabled",!o.selectedOption),t.xp6(),t.hij(" ",t.lcZ(32,33,"payment-select-role.next"),""))},dependencies:[h.Pi,q,_.zS,k,T,_.vP,_.Wb,A,S,z.x,b.tH,O.$m,h.X$],styles:[".rl-select-role-modal__hero[_ngcontent-%COMP%]{text-align:center;font-size:20px;font-weight:600}.rl-select-role-modal__roleContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:0px}.rl-select-role-modal__inputContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:15px}.rl-select-role-modal__radio[_ngcontent-%COMP%]{font-size:62.5%}"]})}return i})();function hr(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"li")(1,"rl-party",12),t.NdJ("onCogClick",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editParty(o))})("toggle",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.selectParty(o))}),t.qZA()()}if(2&i){const e=r.$implicit,n=r.$index,o=t.oxw();t.xp6(),t.MGl("rl-test","payment-payee-party-",n,""),t.Q6J("color",e.metaData.style.background)("checked",e.reference===(null==o.selectedParty?null:o.selectedParty.reference))("party",e)("showCog",!0)("showRadio",!0)}}let Mr=(()=>{class i{constructor(e,n){this.modalControlService=e,this.store=n,this.bem=(0,I.aP)("rl-payment-recipient-modal"),this.destroy=new w.x,this.parties=[]}addNewParty(){this.modalControlService.navigate("newParty")}editParty(e){this.modalControlService.navigate("editParty",{party:e})}getSelectedParty(e,n){return n?e.find(o=>o.id===n)||this.getSelectedParty(e):1===e.length?e[0]:void 0}next(){this.store.dispatch((0,ot.IZ)(this.selectedParty.id)),this.modalControlService.navigate("next")}ngOnDestroy(){this.destroy.next(),this.selectedParty=void 0}ngOnInit(){const e=this.store.subscribe(n=>{this.stateChanged(n)});this.destroy.pipe((0,dt.q)(1)).subscribe(()=>e()),this.stateChanged(this.store.getState()),this.modalControlService.close$.pipe((0,C.R)(this.destroy)).subscribe(n=>this.onClose(n)),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(n=>this.onNavigate(n))}onClose(e){e.data.reason!==c.G.UserNavigatedNext&&this.store.dispatch((0,ot.hQ)())}onNavigate(e){"back"===e.data.to?this.modalControlService.close(c.G.UserNavigatedBack):"editParty"===e.data.to?(this.store.dispatch((0,rt.Q)({party:e.data.party,returnRoute:"paymentPayeeModal"})),this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:"editParty"})):"newParty"===e.data.to?(this.store.dispatch((0,rt.Q)({party:void 0,returnRoute:"paymentPayeeModal"})),this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:"editParty"})):"next"===e.data.to&&this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:"next"})}selectParty(e){this.selectedParty=e}stateChanged(e){this.parties=e.binder.parties.filter(n=>e.paymentAgreementTemp.payerID!==n.id),this.selectedParty=this.getSelectedParty(this.parties,e.paymentAgreementTemp.payerID)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e),t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-recipient-modal"]],decls:22,vars:17,consts:[["fakePath","payment/createAgreement/payee","rl-test","payment-select-payee"],["product","wallet"],["rl-modal-header-widget","left"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"rl-icon","card"],["rl-modal-header-widget","right"],["rl-modal-body-part","heroText","rl-modal-description","","translate","",1,"bold-700"],["rl-modal-body-part","container"],["rl-modal-body-part","actionsContainer"],["btnClass","btn btn-primary","rl-modal-body-part","primaryAction","rl-test","payment-payee-next",3,"isDisabled","onClick"],["rl-modal-body-part","secondaryAction","rl-test","payment-payee-add",1,"btn","btn-secondary",3,"click"],["role","presentation"],[3,"color","checked","party","rl-test","showCog","showRadio","onCogClick","toggle"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1),t._UZ(2,"rl-modal-header-back",2),t.TgZ(3,"h1",3),t._UZ(4,"i",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"rl-modal-header-close",5),t.qZA(),t.TgZ(8,"rl-modal-body")(9,"p",6),t._uU(10,"payment-payee-modal.primary-text"),t.qZA(),t.TgZ(11,"ul",7),t.SjG(12,hr,2,6,"li",null,t.x6l),t.qZA(),t.TgZ(14,"div",8)(15,"custom-button",9),t.NdJ("onClick",function(){return o.next()}),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"button",10),t.NdJ("click",function(){return o.addNewParty()}),t._UZ(19,"i",11),t._uU(20),t.ALo(21,"translate"),t.qZA()()()()),2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,11,"payment-payee-modal.heading")," "),t.xp6(4),t.Tol(o.bem("hero")),t.xp6(2),t.Tol(o.bem("party-list")),t.xp6(),t.wJu(o.parties),t.xp6(3),t.Q6J("isDisabled",!o.selectedParty),t.xp6(),t.Oqu(t.lcZ(17,13,"payment-payer-modal.next")),t.xp6(3),t.Gre("rl-icon add ",o.bem("add-icon"),""),t.xp6(),t.hij(" ",t.lcZ(21,15,"payment-payee-modal.add-new-payer"),""))},dependencies:[h.Pi,q,_.zS,k,T,W,_.vP,_.Wb,A,S,z.x,b.tH,O.$m,ht,h.X$],styles:[".rl-payment-recipient-modal__hero[_ngcontent-%COMP%]{text-align:center}.rl-payment-recipient-modal__party-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.rl-payment-recipient-modal__add-icon[_ngcontent-%COMP%]{padding-right:.3em;vertical-align:text-top}rl-party[_ngcontent-%COMP%]{display:block}"]})}return i})(),ke=(()=>{class i{constructor(e,n){this.toggled=!1,this.helper=new Ot.s(e,n)}ngOnInit(){this.helper.setClassnames("tooltip-host")}onTouchStart(e){this.toggled=!this.toggled,this.toggled?this.helper.setClassnames("touched","untouched"):this.helper.setClassnames("untouched","touched")}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.SBq),t.Y36(t.Qsj))};static#e=this.\u0275dir=t.lG2({type:i,selectors:[["","rl-tooltip-host",""]],hostBindings:function(n,o){1&n&&t.NdJ("touchstart",function(s){return o.onTouchStart(s)})}})}return i})();const fr=["*"],Gt="rl-avatar",Se="--custom-avatar-color";let yr=(()=>{class i{get rootClassnames(){return this._rootClassnames}constructor(e){this.elementRef=e,this._rootClassnames=Gt}ngOnChanges({color:e}){e&&this.setCustomColor(e.currentValue)}removeCustomColor(){this._rootClassnames=Gt,this.elementRef.nativeElement.style.removeProperty(Se)}setCustomColor(e){if(!e)return this.removeCustomColor();const n=!(0,b.D5)(e);n?this.elementRef.nativeElement.style.setProperty(Se,e):this.removeCustomColor(),this._rootClassnames=(0,I.PH)(Gt,{[`color-${e}`]:!n})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.SBq))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-avatar"]],inputs:{color:"color"},features:[t.TTD],ngContentSelectors:fr,decls:2,vars:2,consts:[["rl-typography","bold"]],template:function(n,o){1&n&&(t.F$t(),t.TgZ(0,"div",0),t.Hsn(1),t.qZA()),2&n&&t.Tol(o.rootClassnames)},styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.rl-avatar[_ngcontent-%COMP%]{background-color:var(--custom-avatar-color, #3E3F4C);border-radius:50%;box-sizing:border-box;color:#fff;display:block;font-size:24px;height:69px;line-height:69px;text-align:center;width:69px}.rl-avatar--color-alert[_ngcontent-%COMP%], .rl-avatar--color-error[_ngcontent-%COMP%]{background-color:#e62300}.rl-avatar--color-happy[_ngcontent-%COMP%]{background-color:#00a68a}.rl-avatar--color-primary[_ngcontent-%COMP%]{background-color:#d68021}.rl-avatar--color-secondary[_ngcontent-%COMP%]{background-color:#3e3f4c}"]})}return i})(),Pr=(()=>{class i{transform(e){return e?.split(" ").map(n=>n.charAt(0)).join("")}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275pipe=t.Yjl({name:"rlAcronym",type:i,pure:!0})}return i})(),Ze=(()=>{class i{get avatarColor(){return this._color}static getColorFromParty(e){return e?.metaData?.style?.background||""}ngOnChanges({color:e,party:n}){n&&(this._color=i.getColorFromParty(n.currentValue)),e&&(this._color=e.currentValue??i.getColorFromParty(this.party))}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-party-avatar"]],inputs:{color:"color",party:"party"},features:[t.TTD],decls:4,vars:6,consts:[[3,"color"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-avatar",0),t._uU(1),t.ALo(2,"uppercase"),t.ALo(3,"rlAcronym"),t.qZA()),2&n&&(t.Q6J("color",o.avatarColor),t.xp6(),t.Oqu(t.lcZ(2,2,t.lcZ(3,4,null==o.party?null:o.party.legalName))))},dependencies:[yr,v.gd,Pr],encapsulation:2,changeDetection:0})}return i})();const xr=["*"];let br=(()=>{class i{constructor(){this.color="secondary"}ngOnChanges({color:e}){e&&(this.color=(0,b.D5)(e.currentValue)?e.currentValue:"secondary")}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-pill"]],inputs:{color:"color"},features:[t.TTD],ngContentSelectors:xr,decls:1,vars:0,template:function(n,o){1&n&&(t.F$t(),t.Hsn(0))},styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}[_nghost-%COMP%]{color:#3e3f4c;font-family:Open Sans,sans-serif;font-style:normal;font-weight:400;font-size:16px;line-height:normal;background-color:#3e3f4c;border-radius:100vw;display:inline-block;font-weight:600;padding:8px 16px;color:#fff;text-align:center}[color=alert][_nghost-%COMP%], [color=error][_nghost-%COMP%]{background-color:#e62300}[color=happy][_nghost-%COMP%]{background-color:#00a349}[color=primary][_nghost-%COMP%]{background-color:#f07800}"]})}return i})();const Or=["*"];let Ee=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-simple-tooltip"]],ngContentSelectors:Or,decls:4,vars:0,consts:[[1,"tooltip-boundary"],["role","tooltip",1,"tooltip-background"],[1,"tooltip-arrow"]],template:function(n,o){1&n&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1),t.Hsn(2),t.qZA(),t._UZ(3,"div",2),t.qZA())},styles:[".bold-600{font-weight:600}.bold-700{font-weight:700}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.centered{margin:0 auto}.pull-left{float:left}.pull-right{float:right}ul.list-unstyled{list-style:none}.noselect{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.tooltip-host{position:relative}.tooltip-host:hover>rl-simple-tooltip,.tooltip-host.touched>rl-simple-tooltip{display:block}.tooltip-host>rl-simple-tooltip,.tooltip-host.untouched>rl-simple-tooltip{display:none}.tooltip-arrow{flex:0 0 auto;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #333333}.tooltip-boundary{position:absolute;display:flex;justify-content:flex-end;align-items:center;flex-direction:column;pointer-events:none;word-break:break-word;bottom:100%;left:-552px;width:1120px;height:200px}.tooltip-background{flex:0 0 auto;pointer-events:auto;position:sticky;left:0;right:0;color:#fff;background:#333;width:240px;padding:22px;border-radius:7px;white-space:break-spaces}@media not all and (min-resolution: .001dpcm){.tooltip-boundary{bottom:20px;left:-468px}}\n"],encapsulation:2})}return i})();const vr=i=>({docName:i});function wr(i,r){if(1&i&&(t.TgZ(0,"p",26),t._uU(1,"payment-status.hero-confirm"),t.qZA(),t.TgZ(2,"p",27),t._uU(3),t.ALo(4,"translate"),t.qZA()),2&i){const e=t.oxw();t.Tol(e.bem("hero-text")),t.xp6(2),t.Tol(e.bem("handholding")),t.xp6(),t.Oqu(t.xi3(4,5,"payment-status.confirm-handholding",t.VKq(8,vr,e.docName)))}}function Ar(i,r){if(1&i&&(t.TgZ(0,"p",26),t._uU(1,"payment-status.hero"),t.qZA()),2&i){const e=t.oxw();t.Tol(e.bem("hero-text"))}}function Tr(i,r){if(1&i&&(t.TgZ(0,"div",28),t._UZ(1,"rl-party-avatar",29)(2,"div")(3,"rl-party-avatar",30),t.qZA()),2&i){const e=t.oxw();t.Tol(e.bem("avatar-panel")),t.xp6(),t.Q6J("party",e.payer)("title",e.payer.legalName),t.xp6(),t.Gre("rl-icon arrow-forward ",e.bem("avatar-arrows"),""),t.xp6(),t.Q6J("party",e.payee)("title",e.payee.legalName)}}function kr(i,r){if(1&i&&(t.TgZ(0,"td",31)(1,"rl-pill",32),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(e.status)}}function Sr(i,r){if(1&i&&(t.TgZ(0,"td",31)(1,"rl-pill",33),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(e.status)}}function Zr(i,r){if(1&i&&(t.TgZ(0,"tr",6)(1,"th",8),t._uU(2,"payment-status.status-header"),t.qZA(),t.YNc(3,kr,3,1,"td",31)(4,Sr,3,1,"td",31),t.qZA()),2&i){const e=t.oxw();t.xp6(),t.Tol(e.bem("th")),t.xp6(2),t.um2(3,"primary"==e.statusPillColor?3:-1),t.xp6(),t.um2(4,"happy"==e.statusPillColor?4:-1)}}function Er(i,r){if(1&i&&(t.TgZ(0,"tr",7)(1,"th",8),t._uU(2,"payment-status.reference-id-header"),t.qZA(),t.TgZ(3,"td",34),t._uU(4),t.qZA()()),2&i){const e=t.oxw();t.xp6(),t.Tol(e.bem("th")),t.xp6(2),t.uIk("data-pii","value"),t.xp6(),t.Oqu(e.referenceId)}}function Ir(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"custom-button",35),t.NdJ("onClick",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.editClicked.emit())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(),t.Oqu(t.lcZ(2,1,"payment-status.cta-edit")))}function Dr(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"custom-button",36),t.NdJ("onClick",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteClicked.emit())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("isLoading",e.loading),t.xp6(),t.Oqu(t.lcZ(2,2,"payment-status.delete-payment-agreement"))}}function Nr(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"custom-button",37),t.NdJ("onClick",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.askForRefundClicked.emit())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("isLoading",e.loading),t.xp6(),t.Oqu(t.lcZ(2,2,"payment-status.cta-start-refund"))}}let Fr=(()=>{class i{get status(){const{paymentAgreement:e}=this.state,n=(0,m.kT)(this.state);return(0,m.jn)(n,"PAYER")&&"paid"===e?.status?"payment-status.status.paid-payer":"paid"===e?.status?"payment-status.status.paid-payee":`payment-status.status.${e?.status||"unknown"}`}get statusPillColor(){const{paymentAgreement:e}=this.state,n=(0,m.kT)(this.state);return(0,m.jn)(n,"PAYER")&&"paid"===e?.status||"collected"===e?.status||"refunded"===e?.status?"happy":"primary"}get primaryCTATranslationKey(){return this.hasBeenCharged?"payment-status.cta-paid":this.canDeclinePaymentAgreement?"payment-status.cta-accept-proposed":"payment-status.cta-unpaid"}constructor(e){this.translateService=e,this.closeClicked=new t.vpe,this.deleteClicked=new t.vpe,this.editClicked=new t.vpe,this.askForRefundClicked=new t.vpe,this.bem=(0,I.aP)("rl-payment-status-modal"),this.canDeclinePaymentAgreement=!1,this.canDeletePaymentAgreement=!1,this.canAskForRefund=!1,this.canGoBackToInterview=!1,this.hasBeenCharged=!1,this.isInterviewAgreement=!1,this.showStatus=!0}ngOnChanges({state:e}){if(e){const{binder:n,paymentAgreement:o}=this.state;this.docName=n.documents[0]?.name||"document",this.referenceId=o.externalId.substring(0,13),this.getPaymentDetails(),this.showStatus="proposed"!==o.status&&"optional"!==o.status,this.canDeletePaymentAgreement=["proposed","draft"].includes(o.status),this.canDeclinePaymentAgreement="optional"===o.status,this.isInterviewAgreement="optional"===o.status||"proposed"===o.status,this.canGoBackToInterview=this.isInterviewAgreement&&this.state.backToInterviewOptionEnabled,this.hasBeenCharged=!["proposed","draft","pending","optional"].includes(o.status),this.translateService.get(this.primaryCTATranslationKey).subscribe(a=>{this.primaryCTA=a}),this.canAskForRefund="paid"===o.status}}getPaymentDetails(){const e=this.state.paymentAgreement?.payments[0];if(e){const n=e.ins[0].partyId,o=e.outs[0].partyId,{amount:a}=e.ins[0].payment,s=e.fees[0].payment.amount,l=a-s,d=this.state.binder?.parties;d?(this.payee=d.find(p=>p.id===o),this.payer=d.find(p=>p.id===n)):(this.payee=void 0,this.payer=void 0),this.paymentTotal=a/100,this.paymentRate=s/100,this.paymentNet=l/100,this.paymentCurrency=e.outs[0].payment.currency}else this.payee=void 0,this.payer=void 0,this.paymentTotal=void 0,this.paymentRate=void 0,this.paymentNet=void 0,this.paymentCurrency=void 0}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(h.sK))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-status-modal"]],inputs:{loading:"loading",state:"state"},outputs:{closeClicked:"closeClicked",deleteClicked:"deleteClicked",editClicked:"editClicked",askForRefundClicked:"askForRefundClicked"},features:[t.TTD],decls:59,vars:46,consts:[["fakePath","payment/paymentAgreementDetails","rl-test","payment-status"],["product","wallet"],["rl-modal-title","","rl-typography","heading","translate",""],["rl-modal-header-widget","right"],["role","presentation",3,"class"],["rlTable",""],["rlTableRow","secondary","rl-test","payment-status-status-row"],["rlTableRow",""],["rlTableHeader","","translate",""],["rlTableCell","","rl-test","payment-status-from"],["rlTableCell","","rl-test","payment-status-to"],["rlTableCell","","rl-test","payment-status-total"],["rlTableHeader",""],["rl-tooltip-host",""],["role","presentation",1,"icon-fee"],["rl-typography","small"],["translate",""],["rlTableCell","","rl-test","payment-status-rate"],["rlTableRow","primary"],["rlTableCell","","rl-test","payment-status-net"],["color","happy","size","large",3,"bold"],["rl-modal-body-part","actionsContainer"],["rl-modal-body-part","primaryAction","rl-test","payment-status-cta",1,"btn","btn-primary",3,"click"],["btnClass","btn btn-secondary","rl-modal-body-part","secondaryAction","rl-test","payment-status-cta-edit"],["btnClass","btn btn-secondary","rl-modal-body-part","secondaryAction","rl-test","payment-status-delete-payment-agreement",3,"isLoading"],["btnClass","btn btn-secondary","rl-modal-body-part","secondaryAction","rl-test","payment-status-ask-refund",3,"isLoading"],["rl-modal-description","","rl-modal-body-part","heroText","translate","",1,"bold-700"],["rl-modal-description",""],["role","presentation"],["rl-test","payment-status-avatar payment-status-avatar-payer",3,"party","title"],["rl-test","payment-status-avatar payment-status-avatar-payee",3,"party","title"],["rlTableCell","","rl-test","payment-status-status"],["color","primary","translate",""],["color","happy","translate",""],["rlTableCell","","rl-test","reference-id"],["btnClass","btn btn-secondary","rl-modal-body-part","secondaryAction","rl-test","payment-status-cta-edit",3,"onClick"],["btnClass","btn btn-secondary","rl-modal-body-part","secondaryAction","rl-test","payment-status-delete-payment-agreement",3,"isLoading","onClick"],["btnClass","btn btn-secondary","rl-modal-body-part","secondaryAction","rl-test","payment-status-ask-refund",3,"isLoading","onClick"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._uU(3,"payment-status.heading"),t.qZA(),t._UZ(4,"rl-modal-header-close",3),t.qZA(),t.TgZ(5,"rl-modal-body"),t.YNc(6,wr,5,10)(7,Ar,2,2)(8,Tr,4,9,"div",4),t.TgZ(9,"table",5)(10,"tbody"),t.YNc(11,Zr,5,4,"tr",6),t.TgZ(12,"tr",7)(13,"th",8),t._uU(14,"payment-status.from-header"),t.qZA(),t.TgZ(15,"td",9),t._uU(16),t.qZA()(),t.TgZ(17,"tr",7)(18,"th",8),t._uU(19,"payment-status.to-header"),t.qZA(),t.TgZ(20,"td",10),t._uU(21),t.qZA()(),t.TgZ(22,"tr",7)(23,"th",8),t._uU(24,"payment-status.amount-header"),t.qZA(),t.TgZ(25,"td",11),t._uU(26),t.ALo(27,"currency"),t.qZA()(),t.YNc(28,Er,5,4,"tr",7),t.TgZ(29,"tr",7)(30,"th",12),t._uU(31),t.ALo(32,"translate"),t.TgZ(33,"span",13)(34,"div",14),t._uU(35,"?"),t.qZA(),t.TgZ(36,"rl-simple-tooltip",15)(37,"b",16),t._uU(38,"payment-status.wallet-rate-tooltip-1"),t.qZA(),t.TgZ(39,"p",16),t._uU(40,"payment-status.wallet-rate-tooltip-2"),t.qZA(),t.TgZ(41,"p",16),t._uU(42,"payment-status.wallet-rate-tooltip-3"),t.qZA()()()(),t.TgZ(43,"td",17),t._uU(44),t.ALo(45,"currency"),t.qZA()(),t.TgZ(46,"tr",18)(47,"th",8),t._uU(48,"payment-status.net-header"),t.qZA(),t.TgZ(49,"td",19)(50,"rl-typography",20),t._uU(51),t.ALo(52,"currency"),t.qZA()()()()(),t.TgZ(53,"div",21)(54,"button",22),t.NdJ("click",function(){return o.closeClicked.emit()}),t._uU(55),t.qZA(),t.YNc(56,Ir,3,3,"custom-button",23)(57,Dr,3,4,"custom-button",24)(58,Nr,3,4,"custom-button",25),t.qZA()()()),2&n&&(t.xp6(6),t.um2(6,o.isInterviewAgreement?6:7),t.xp6(2),t.um2(8,o.payer&&o.payee?8:-1),t.xp6(),t.Tol(o.bem("table")),t.xp6(2),t.um2(11,o.showStatus?11:-1),t.xp6(2),t.Tol(o.bem("th")),t.xp6(2),t.uIk("data-pii","value"),t.xp6(),t.Oqu(null==o.payer?null:o.payer.legalName),t.xp6(2),t.Tol(o.bem("th")),t.xp6(2),t.uIk("data-pii","value"),t.xp6(),t.Oqu(null==o.payee?null:o.payee.legalName),t.xp6(2),t.Tol(o.bem("th")),t.xp6(3),t.Oqu(t.gM2(27,29,o.paymentTotal,o.paymentCurrency,"symbol","1.2")),t.xp6(2),t.um2(28,o.isInterviewAgreement?-1:28),t.xp6(2),t.Tol(o.bem("th")),t.xp6(),t.hij(" ",t.lcZ(32,34,"payment-status.rate-header")," "),t.xp6(13),t.Oqu(t.gM2(45,36,o.paymentRate,o.paymentCurrency,"symbol","1.2")),t.xp6(3),t.Tol(o.bem("th")),t.xp6(3),t.Q6J("bold",!0),t.xp6(),t.Oqu(t.gM2(52,41,o.paymentNet,o.paymentCurrency,"symbol","1.2")),t.xp6(4),t.Oqu(o.primaryCTA),t.xp6(),t.um2(56,o.canGoBackToInterview?56:-1),t.xp6(),t.um2(57,o.canDeletePaymentAgreement&&!o.canGoBackToInterview?57:-1),t.xp6(),t.um2(58,o.canAskForRefund?58:-1))},dependencies:[h.Pi,q,_.zS,k,T,_.vP,_.Wb,A,S,z.x,b.tH,b.lo,O.$m,ke,Ze,br,Ee,v.H9,h.X$],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.rl-payment-status-modal__header-icon[_ngcontent-%COMP%]{margin-right:.5em}.rl-payment-status-modal__avatar-panel[_ngcontent-%COMP%]{box-shadow:0 0 8px #1a1a1a33;padding:16px;text-align:center;margin-bottom:32px}.rl-payment-status-modal__avatar-panel[_ngcontent-%COMP%]:last-child{margin-bottom:16px}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.rl-payment-status-modal__avatar-panel[_ngcontent-%COMP%]{margin-bottom:16px}}.rl-payment-status-modal__avatar-panel[_ngcontent-%COMP%]   .rl-icon.arrow-forward[_ngcontent-%COMP%]{color:#00a349}.rl-payment-status-modal__avatar-panel[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.rl-payment-status-modal__avatar-panel[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child){margin-right:25px}.rl-payment-status-modal__avatar-arrows[_ngcontent-%COMP%]{font-size:32px}.rl-payment-status-modal__handholding[_ngcontent-%COMP%]{text-align:center}.icon-fee[_ngcontent-%COMP%]{border:2px solid #3E3F4C;border-radius:100px;width:12px;font-size:10px;font-weight:700;text-align:center;padding:0;display:inline-block;margin-top:-3px;opacity:.7;vertical-align:middle;height:12px;line-height:12px}"],changeDetection:0})}return i})(),Ur=(()=>{class i{constructor(e,n,o,a,s){this.alertService=e,this.modalControlService=n,this.payService=o,this.messageService=a,this.store=s,this.loading=!1,this.destroy=new w.x}ngOnInit(){this.store.getState$().pipe((0,C.R)(this.destroy),(0,Ae.h)(()=>!this.loading)).subscribe(e=>{this.state=e}),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(e=>this.onNavigate(e))}ngOnDestroy(){this.destroy.next()}close(){this.modalControlService.close(c.G.CompletedSuccessfully)}primaryCTAClicked(){const{paymentAgreement:e}=this.store.getState();"proposed"===e.status||"optional"===e.status?(this.loading=!0,this.payService.setPaymentAgreementStatus(e.externalId,"draft").subscribe({next:()=>this.close(),error:n=>{console?.warn(n),this.close()}})):this.close()}removePaymentAgreement(){this.modalControlService.navigate("next")}goToAskForRefund(){this.modalControlService.navigate("askForRefund")}goToInterview(){this.messageService.sendEvent({action:"changeAnswers"}),this.close()}onNavigate(e){this.modalControlService.close(c.G.UserNavigatedNext,"askForRefund"===e.data.to?{nextModal:"askForRefund"}:{nextModal:"next"})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(R.c),t.Y36(c.e),t.Y36(j.T),t.Y36(V.e),t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-status-modal-connected"]],decls:1,vars:2,consts:[[3,"loading","state","closeClicked","editClicked","deleteClicked","askForRefundClicked"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-payment-status-modal",0),t.NdJ("closeClicked",function(){return o.primaryCTAClicked()})("editClicked",function(){return o.goToInterview()})("deleteClicked",function(){return o.removePaymentAgreement()})("askForRefundClicked",function(){return o.goToAskForRefund()}),t.qZA()),2&n&&t.Q6J("loading",o.loading)("state",o.state)},dependencies:[Fr],encapsulation:2})}return i})();const qr=i=>({referenceId:i});let zr=(()=>{class i{constructor(e,n){this.modalControlService=e,this.store=n,this.loading=!1,this.destroy=new w.x,this.bem=(0,I.aP)("rl-ask-for-refund-modal")}ngOnInit(){const{paymentAgreement:e}=this.store.getState();this.referenceId=e.externalId.substring(0,13).replace(/-/g,"\u2011"),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(n=>this.onNavigate(n))}onNavigate(e){this.modalControlService.close(c.G.UserNavigatedBack)}back(){this.modalControlService.navigate("back")}ngOnDestroy(){this.destroy.next()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e),t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-ask-for-refund-modal"]],decls:17,vars:14,consts:[["fakePath","askForRefund","rl-test","ask-for-refund-modal"],["product","wallet"],["rl-modal-header-widget","left"],["rl-modal-title","","rl-typography","heading"],["rl-modal-header-widget","right"],["rl-modal-description","","rl-modal-body-part","heroText","rl-test","ask-for-refund-modal-hero","translate","",1,"bold-700","text-center"],["rl-modal-body-part","regularContent","rl-test","ask-for-refund-modal-description",1,"text-center"],["rl-modal-body-part","actionsContainer"],["btnClass","btn btn-primary","rl-modal-body-part","primaryAction","rl-test","ask-for-refund-go-back",3,"isLoading","onClick"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1),t._UZ(2,"rl-modal-header-back",2),t.TgZ(3,"h1",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"rl-modal-header-close",4),t.qZA(),t.TgZ(7,"rl-modal-body")(8,"p",5),t._uU(9),t.qZA(),t.TgZ(10,"p",6),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",7)(14,"custom-button",8),t.NdJ("onClick",function(){return o.back()}),t._uU(15),t.ALo(16,"translate"),t.qZA()()()()),2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,5,"ask-for-refund-modal.heading")," "),t.xp6(5),t.Oqu("ask-for-refund-modal.hero"),t.xp6(2),t.hij(" ",t.xi3(12,7,"ask-for-refund-modal.description",t.VKq(12,qr,o.referenceId)),"."),t.xp6(3),t.Q6J("isLoading",o.loading),t.xp6(),t.hij(" ",t.lcZ(16,10,"ask-for-refund-modal.go-back"),""))},dependencies:[h.Pi,q,_.zS,k,T,W,_.vP,_.Wb,A,S,z.x,b.tH,O.$m,h.X$]})}return i})();var Ie=u(3464),Vt=u(7505);const De=(()=>{class i{constructor(){this.spacingPatterns={1:[[4,6,5]],2:[[4,4,4,4]],0:[[4,4,4,4]],4:[[4,4,5],[4,6,5],[4,4,4,4],[4,4,4,4,3]],3:[[4,4,4,4]],6:[[4,4,4,4]],5:[[4,4,4,4]]}}static#t=this.MaxLength=19;get amexRegExp(){return this._amexRegExp||(this._amexRegExp=/^(?:34|37)/),this._amexRegExp}get discoverRegExp(){return this._discoverRegExp||(this._discoverRegExp=/^6(?:011|22(?:12[6-9]|1[3-9][0-9]|[2-8][0-9][0-9]|9[01][0-9]|92[0-5])|4[4-9]|5)/),this._discoverRegExp}get maestroRegExp(){return this._maestroRegExp||(this._maestroRegExp=/^(?:5[06789][0-9][0-9][0-9][0-9]|6[0-9][0-9][0-9][0-9][0-9])/),this._maestroRegExp}get masterCardRegExp(){return this._masterCardRegExp||(this._masterCardRegExp=/^(?:5[1-5]|2(?:22[1-9][0-9][0-9]|2[3-9][0-9][0-9][0-9]|[3-6][0-9][0-9][0-9][0-9]|7[01][0-9][0-9][0-9]|720[0-9][0-9]))/),this._masterCardRegExp}get nonNumericRegExp(){return this._nonNumericRegExp||(this._nonNumericRegExp=/\D+/g),this._nonNumericRegExp}get visaElectronRegExp(){return this._visaElectronRegExp||(this._visaElectronRegExp=/^4(?:026|17500|405|508|844|913|917)/),this._visaElectronRegExp}get visaRegExp(){return this._visaRegExp||(this._visaRegExp=/^4(?!026|17500|405|508|844|913|917)/),this._visaRegExp}static isValidLength(e,n){switch(n){case 1:return 15===e.length;case 2:case 3:case 6:return 16===e.length;case 4:return e.length>=12&&e.length<=19;case 5:return e.length>=13&&e.length<=19;default:return e.length<=this.MaxLength}}isValidLength(e,n){const{network:o,number:a}=this.getCreditCardInfo(e);return i.isValidLength(a,n||o&&o[0])}findPositionAfterFormat(e,n){const{network:o,number:a}=this.getCreditCardInfo(n),s=n.substring(0,e).replace(this.nonNumericRegExp,"").length,l=this.getNetworkGroupingRuleForNumber(o,a);let d=0;for(let p=0;p<l.length;p+=1){const M=l[p];if(s>d&&s<=d+M)return s+p;d+=M}if(d<a.length&&s>d)return s+l.length}formatExpiryDate(e,n){const o=e.replace(this.nonNumericRegExp,"").substring(0,4),s=e.substring(0,n).replace(this.nonNumericRegExp,"").length<=2?n:n+1;return{date:o.length<2?o:`${o.substring(0,2)}/${o.substring(2)}`,cursorPosition:s}}format(e,n){const o=this.getNetworkGroupingRuleForNumber(e,n),a=[];let s=0;return o.forEach(l=>{const d=n.substring(s,s+l);d&&a.push(d),s+=l}),s<n.length&&a.push(n.substring(s)),a.join(" ")}getCreditCardInfo(e){const n=e.replace(this.nonNumericRegExp,"").substring(0,i.MaxLength),o=n.charAt(0),a={network:null,number:n,valid:!1};return"2"===o?(this.masterCardRegExp.test(n)&&(a.network=[3],a.valid=i.isValidLength(n,3)),a):"3"===o?this.amexRegExp.test(n)?(a.network=[1],a.valid=i.isValidLength(n,1),a):(a.network=[0],a.valid=n.length>=14&&n.length<=19,a):"4"===o?(this.visaElectronRegExp.test(n)&&(a.network=[6],a.valid=i.isValidLength(n,6)),a.network=[5],a.valid=i.isValidLength(n,5),a):"5"===o?this.masterCardRegExp.test(n)?(a.network=[3],a.valid=i.isValidLength(n,3),a):this.maestroRegExp.test(n)?(a.network=[4],a.valid=i.isValidLength(n,4),a):(a.network=[0],a.valid=16===n.length,a):("6"===o&&(this.discoverRegExp.test(n)&&(a.network=[2],a.valid=i.isValidLength(n,2)),this.maestroRegExp.test(n)&&(a.network=[4],a.valid=i.isValidLength(n,4)),a.network=[0],a.valid=n.length>=16&&n.length<=19),a)}getNetworkGroupingRules(e){return null===e?[this.spacingPatterns[0]]:e.map(n=>this.spacingPatterns[n])}getNetworkGroupingRuleForNumber(e,n){const o=this.getNetworkGroupingRules(e)[0];return 1===o.length?o[0]:o.find((a,s)=>{const l=a.reduce((d,p)=>d+p,0);return s===o.length-1||n.length<=l})}static mapSpreedlyToNetwork(e){switch(e){case"american_express":return 1;case"discover":return 2;case"master":return 3;case"maestro":return 4;case"visa":return 5;default:return 0}}static getNameByCardType(e){switch(this.mapSpreedlyToNetwork(e)){case 1:return"Amex";case 2:return"Discover";case 4:case 3:return"MasterCard";case 5:case 6:return"Visa";default:return"Credit card"}}static getNetworkLogo(e){switch(e){case 1:return"images/signapp/card-amex.svg";case 2:return"images/signapp/card-discover.svg";case 4:case 3:return"images/signapp/card-mastercard.svg";case 6:case 5:return"images/signapp/card-visa.svg";default:return"images/signapp/card-generic.svg"}}static getLogoByCardType(e){const n=this.mapSpreedlyToNetwork(e);return this.getNetworkLogo(n)}}return i})(),Ne=class Hr{static mapBankNameToBankAccountType(r){const e=r.toLowerCase();return"stripe test bank"===e?17:e.includes("express")?1:e.includes("of america")?2:e.includes("capital")?3:e.includes("chase")?4:e.includes("citizens")?6:e.includes("citi")?5:e.includes("fidelity")?7:e.includes("huntington")?8:e.includes("pnc")?9:e.includes("regions")?10:e.includes("stash")?11:e.includes("td")?12:e.includes("usa")?13:e.includes("usb")?14:e.includes("wealth")?15:e.includes("wells")?16:0}static getNameByBankName(r){switch(this.mapBankNameToBankAccountType(r)){case 1:return"American Express";case 2:return"Bank of America";case 3:return"Capital One";case 4:return"Chase";case 5:return"Citi Bank";case 6:return"Citizens Bank";case 7:return"Fidelity";case 8:return"Huntington Bank";case 9:return"PNC";case 10:return"Regions Bank";case 11:return"Stash";case 12:return"TD Bank";case 13:return"USAA";case 14:return"U.S. Bank";case 15:return"Wealthfront";case 16:return"Wells Fargo";case 17:return"Stripe Test Bank";default:return"Bank account"}}static getLogoByBankName(r){switch(this.mapBankNameToBankAccountType(r)){case 1:return"images/bank-logos/american-express-logo.svg";case 2:return"images/bank-logos/bofa-logo.svg";case 3:return"images/bank-logos/capital-one-logo.svg";case 4:return"images/bank-logos/chase-logo.svg";case 5:return"images/bank-logos/citi-logo.svg";case 6:return"images/bank-logos/citizens-bank-logo.svg";case 7:return"images/bank-logos/fidelity-logo.svg";case 8:return"images/bank-logos/huntington-logo.svg";case 9:return"images/bank-logos/pnc-logo.svg";case 10:return"images/bank-logos/regions-logo.svg";case 11:return"images/bank-logos/stash-logo.svg";case 12:return"images/bank-logos/td-bank-logo.svg";case 13:return"images/bank-logos/usaa-logo.svg";case 14:return"images/bank-logos/usbank-logo.svg";case 15:return"images/bank-logos/wealthfront-logo.svg";case 16:return"images/bank-logos/wells-fargo-logo.svg";default:return"images/bank-logos/bank.svg"}}};class ft{static getConvertedGenericPaymentMethods(r){const e=[];return r.paymentMethods&&r.paymentMethods.forEach(n=>{e.push(ft.convertCardPaymentMethod(n))}),r.achPaymentMethod?.sources&&r.achPaymentMethod.sources.forEach(n=>{e.push(ft.convertAchPaymentSource(n))}),e}static getConvertedGenericPaymentMethodsByType(r,e){return ft.getConvertedGenericPaymentMethods(r).filter(n=>n.type===e)}static convertCardPaymentMethod(r){return{id:r.paymentMethodId,name:De.getNameByCardType(r.cardType),last4:r.cardNumberLast4,logo:De.getLogoByCardType(r.cardType),type:"card"}}static convertAchPaymentSource(r){return{id:r.id,name:Ne.getNameByBankName(r.bankName),last4:r.last4,logo:Ne.getLogoByBankName(r.bankName),type:"bank"}}}const Re=ft;let Lr=(()=>{class i{constructor(){this.bem=(0,I.aP)("rl-secure-info-message")}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-secure-info-message"]],decls:5,vars:7,consts:[["rl-typography",""],["rl-typography","large","role","presentation",1,"rl-icon","lock-input",3,"ngClass"],[3,"ngClass"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t.TgZ(2,"span",2),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.Tol(o.bem()),t.xp6(),t.Q6J("ngClass",o.bem("lock-icon")),t.xp6(),t.Q6J("ngClass",o.bem("text")),t.xp6(),t.Oqu(t.lcZ(4,5,"secure-info-message_message")))},dependencies:[v.mk,b.tH,h.X$],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}[_nghost-%COMP%]{height:18px}.rl-secure-info-message[_ngcontent-%COMP%]{display:inline-block;line-height:18px}.rl-secure-info-message__lock-icon[_ngcontent-%COMP%], .rl-secure-info-message__text[_ngcontent-%COMP%]{float:left}.rl-secure-info-message__lock-icon[_ngcontent-%COMP%]{font-size:18px;padding-right:10px}.rl-secure-info-message__text[_ngcontent-%COMP%]{font-size:12px}"]})}return i})();const Gr=["spreedlyCardForm"];function Vr(i,r){1&i&&t._UZ(0,"rl-modal-header-back",2)}function Qr(i,r){if(1&i&&t._UZ(0,"img",17),2&i){const e=t.oxw();t.Q6J("src",e.cardIconUrl,t.LSH)}}const Yr=()=>({key:"payment-pay-now-modal_continue"}),Fe="rl-payment-pay-now-modal";let Wr=(()=>{class i{constructor(e,n,o,a,s){this.alertService=e,this.modalControlService=n,this.payService=o,this.store=a,this.featureFlagService=s,this.bem=(0,I.aP)(Fe),this.cardIsProcessing=!1,this.destroy=new w.x,this.rootClassnames=Fe,this.payWithBankAccountEnabled=this.featureFlagService.flags.pay_with_bank_account,this.walletEnabled=this.featureFlagService.flags.wallet_enabled}ngOnDestroy(){this.destroy.next()}ngOnInit(){this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe({next:o=>{this.onNavigate(o)}}),this.payService.getPaymentsConfig().subscribe(o=>{this.spreedlyEnvKey=o.spreedlyEnvironmentKey}),this.userEmail=(0,m.kT)(this.store.getState()).email;const{brandConfig:e,globalBrandConfig:n}=this.store.getState();this.cardIconUrl=e?.lookAndFeel.walletIconUrl,this.globalBrandingStyles=n?.styles}showFailureAlert(){this.alertService.addDangerAlert({message:"payment-pay-now-modal_add-card-failed"})}validateCard(){this.cardIsProcessing=!0,this.spreedlyCardForm.nativeElement.submit().then(e=>this.onSpreedlySuccess(e)).catch(()=>{this.cardIsProcessing=!1})}onSpreedlySuccess({token:e,pmData:n}){const o=this.store.getState(),a=(new Date).toISOString(),s=(0,m.kT)(o);this.payService.getPaymentAgreementByBinderID(o.binder.id).pipe((0,B.U)(l=>({brand:"rl-us",created:a,externalId:l.externalId,partyId:s.id,token:e,updated:a})),(0,et.z)(l=>this.payService.createPaymentMethod(l)),(0,C.R)(this.destroy)).subscribe(l=>{const d=this.store.getState().identityProfile.paymentMethods||[],p={paymentMethodId:l.externalId,cardNumberLast4:n.number.slice(-4),cardType:n.card_type};if(d.push(p),this.store.dispatch((0,Ie.DA)(d)),!this.isPaymentMethodModalEnabled()){const M=Re.convertCardPaymentMethod(p);this.store.dispatch((0,Vt.B)(M))}this.modalControlService.navigate("next")},()=>{this.showFailureAlert(),this.cardIsProcessing=!1},()=>{this.cardIsProcessing=!1})}isPaymentMethodModalEnabled(){return this.payWithBankAccountEnabled||this.walletEnabled}onNavigate(e){"next"===e.data.to?this.isPaymentMethodModalEnabled()?this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:"choosePaymentMethod"}):this.modalControlService.close(c.G.UserNavigatedNext):"back"===e.data.to?this.isPaymentMethodModalEnabled()&&this.modalControlService.close(c.G.UserNavigatedBack):"end"===e.data.to&&this.modalControlService.close(c.G.UserTerminated)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(R.c),t.Y36(c.e),t.Y36(j.T),t.Y36(x.y),t.Y36(ut.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-pay-now-modal"]],viewQuery:function(n,o){if(1&n&&t.Gf(Gr,5),2&n){let a;t.iGM(a=t.CRH())&&(o.spreedlyCardForm=a.first)}},decls:25,vars:21,consts:[["fakePath","payment/payByCard","rl-test","payment-enter-method-details",3,"className"],["product","wallet"],["rl-modal-header-widget","left"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"rl-icon","card"],["rl-modal-header-widget","right"],["rl-modal-body-part","heroText"],["rl-modal-body-part","container"],["class","sign-icon","rl-test","card-icon",3,"src"],["rl-modal-body-part","regularContent","rl-modal-description","","translate","",1,"bold-700"],["rl-modal-body-part","regularContent","translate",""],["rl-modal-body-part","container",3,"ngSubmit"],[3,"email","spreedlyEnvironmentKey"],["spreedlyCardForm",""],[3,"styles"],["rl-modal-body-part","actionsContainer"],["btnClass","btn btn-primary","btnType","submit","data-test","continueButton","rl-modal-body-part","primaryAction",3,"isLoading","defaultTranslation"],["rl-test","card-icon",1,"sign-icon",3,"src"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1),t.YNc(2,Vr,1,0,"rl-modal-header-back",2),t.TgZ(3,"h1",3),t._UZ(4,"i",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"rl-modal-header-close",5),t.qZA(),t.TgZ(8,"rl-modal-body")(9,"div",6)(10,"div",7),t.YNc(11,Qr,1,1,"img",8),t.TgZ(12,"p",9),t._uU(13,"payment-pay-now-modal_payment-pay-now-heading"),t.qZA(),t.TgZ(14,"p",10),t._uU(15,"payment-pay-now-modal_you-can-review"),t.qZA()()(),t.TgZ(16,"form",11),t.NdJ("ngSubmit",function(){return o.validateCard()}),t._UZ(17,"rl-spreedly-card-form",12,13),t.TgZ(19,"perimeter-x",14),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"rl-secure-info-message"),t.TgZ(23,"div",15),t._UZ(24,"custom-button",16),t.qZA()()()()),2&n&&(t.Q6J("className",o.rootClassnames),t.xp6(2),t.um2(2,o.isPaymentMethodModalEnabled()?2:-1),t.xp6(3),t.hij(" ",t.lcZ(6,16,"payment-pay-now-modal_payment-pay-now")," "),t.xp6(6),t.um2(11,o.cardIconUrl?11:-1),t.xp6(),t.Tol(o.bem("description")),t.xp6(2),t.Tol(o.bem("review")),t.xp6(3),t.Q6J("email",o.userEmail)("spreedlyEnvironmentKey",o.spreedlyEnvKey),t.xp6(2),t.Q6J("styles",o.globalBrandingStyles),t.xp6(),t.Oqu(t.lcZ(21,18,"payment-pay-now-modal_human-challenge")),t.xp6(2),t.Tol(o.bem("info-secure")),t.xp6(2),t.Q6J("isLoading",o.cardIsProcessing)("defaultTranslation",t.DdM(20,Yr)))},dependencies:[g._Y,g.JL,g.F,h.Pi,q,_.zS,k,T,W,_.vP,_.Wb,A,S,z.x,b.tH,O.$m,Lr,h.X$],styles:[".rl-payment-pay-now-modal__description[_ngcontent-%COMP%], .rl-payment-pay-now-modal__review[_ngcontent-%COMP%], .rl-payment-pay-now-modal__info-secure[_ngcontent-%COMP%]{text-align:center}rl-spreedly-card-form[_ngcontent-%COMP%]{font-size:62.5%}"]})}return i})();var Ue=u(9823),qe=u(2342),Qt=u(777);const $r=["plaid"];let Je=(()=>{class i{constructor(e,n,o,a,s){this.alertService=e,this.messageService=o,this.searchParamsService=a,this.store=s,this.loaded=new t.vpe,this.error=new t.vpe,this.exit=new t.vpe,this.success=new t.vpe,this.storage=(0,bt.h)({ignoreStorageErrors:!0}),this.peerPaymentsBaseURL=n.getPeerPaymentsBaseUrl()}ngOnInit(){const e=this.store.getState();this.accessToken=e.authInfo.access_token,this.partyID=(0,m.kT)(e).id,this.storedLinkToken=this.storage.plaidRedirectLinkToken,this.receivedRedirectUri=this.searchParamsService.get("plaid_redirect_uri")||void 0,this.tokenRedirectURI=this.storage.isWritable?e.brandConfig?.plaid?.oAuthRedirectUri:void 0}ngAfterViewInit(){"function"==typeof this.plaidWebComponent.nativeElement?.create&&this.plaidWebComponent.nativeElement.create().then(()=>{this.plaidWebComponent.nativeElement.open()})}ngOnDestroy(){"function"==typeof this.plaidWebComponent.nativeElement?.destroy&&this.plaidWebComponent.nativeElement.destroy()}onEvent(e){"OPEN"===e&&(this.storage.isWritable||this.alertService.addNotification({message:{key:"payment-plaid.warnings.private-browsing"}}),this.tokenRedirectURI&&this.prepareForOAuth())}onExit(e){this.cleanupAfterOAuth(),e?this.error.emit():this.exit.emit()}onSuccess(e,n){this.cleanupAfterOAuth(),this.success.emit({publicToken:e,metadata:n})}prepareForOAuth(){this.additionalOAuthStorageData&&Object.keys(this.additionalOAuthStorageData).forEach(e=>{this.storage[e]=this.additionalOAuthStorageData[e]}),this.storage.plaidRedirectLinkToken=this.plaidWebComponent.nativeElement.linkToken,this.messageService.sendEvent({action:"plaidOAuthStarted"})}cleanupAfterOAuth(){delete this.storage.plaidRedirectLinkToken,this.additionalOAuthStorageData&&Object.keys(this.additionalOAuthStorageData).forEach(e=>{delete this.storage[e]}),this.messageService.sendEvent({action:"plaidOAuthFinished"})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(R.c),t.Y36(Qt.e),t.Y36(V.e),t.Y36(lt.l),t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-plaid"]],viewQuery:function(n,o){if(1&n&&t.Gf($r,5),2&n){let a;t.iGM(a=t.CRH())&&(o.plaidWebComponent=a.first)}},inputs:{additionalOAuthStorageData:"additionalOAuthStorageData"},outputs:{loaded:"loaded",error:"error",exit:"exit",success:"success"},decls:2,vars:6,consts:[["brand","rl-us",3,"linkToken","partyId","peerPaymentsBaseURL","receivedRedirectUri","rlAccessToken","tokenRedirectUri","rlPlaidEvent","rlPlaidExit","rlPlaidSuccess","rlPlaidLoad"],["plaid",""]],template:function(n,o){1&n&&(t.TgZ(0,"rl-plaid",0,1),t.NdJ("rlPlaidEvent",function(s){return o.onEvent(s.detail.eventName)})("rlPlaidExit",function(s){return o.onExit(s.detail.error)})("rlPlaidSuccess",function(s){return o.onSuccess(s.detail.publicToken,s.detail.metadata)})("rlPlaidLoad",function(){return o.loaded.emit()}),t.qZA()),2&n&&t.Q6J("linkToken",o.storedLinkToken)("partyId",o.partyID)("peerPaymentsBaseURL",o.peerPaymentsBaseURL)("receivedRedirectUri",o.receivedRedirectUri)("rlAccessToken",o.accessToken)("tokenRedirectUri",o.tokenRedirectURI)},encapsulation:2})}return i})();function Kr(i,r){1&i&&(t.TgZ(0,"div",3),t._UZ(1,"rl-working-indicator",4),t.qZA())}const jr=()=>({plaidRedirectRoute:"payment/bankPayout"});let Xr=(()=>{class i{constructor(e,n,o,a){this.alertService=e,this.payService=n,this.store=o,this.tracking=a,this.hideModal=new t.vpe,this.showSpinner=!0}ngOnInit(){const e=this.store.getState();this.partyID=(0,m.kT)(e).id}ngAfterViewInit(){this.tracking.virtualPageView({location:"payment/payByBank"})}onLoaded(){this.showSpinner=!1}onError(){this.showFailureNotification(),this.hideModal.emit({nextModal:"end"})}onExit(){this.hideModal.emit({nextModal:"end"})}onSuccess(e,n){this.showSpinner=!0;const o={payeeId:this.partyID,binderId:this.store.getState().binder.id,accountId:n.accounts[0].id,token:e};this.payService.createPayoutMethod(o).subscribe(()=>{this.showSuccessNotification();const a=JSON.parse(JSON.stringify(this.store.getState().paymentAccount));a.payoutsEnabled=!0,this.store.dispatch((0,Ue.v)(a)),this.hideModal.emit({nextModal:"end"})},()=>{this.showFailureNotification(),this.hideModal.emit({nextModal:"end"})})}showSuccessNotification(){this.alertService.addSuccessAlert({message:"payment-plaid-modal_payment-setup-successful"})}showFailureNotification(){this.alertService.addDangerAlert({message:"payment-plaid-modal_error_endpoint_failure"})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(R.c),t.Y36(j.T),t.Y36(x.y),t.Y36(tt.a))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-plaid-modal"]],outputs:{hideModal:"hideModal"},features:[t._Bn([{provide:Window,useValue:window}])],decls:3,vars:4,consts:[[3,"visible"],["class","overlay"],[3,"additionalOAuthStorageData","loaded","error","exit","success"],[1,"overlay"],["size","large"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-lightbox",0),t.YNc(1,Kr,2,0,"div",1),t.TgZ(2,"rl-payment-plaid",2),t.NdJ("loaded",function(){return o.onLoaded()})("error",function(){return o.onError()})("exit",function(){return o.onExit()})("success",function(s){return o.onSuccess(s.publicToken,s.metadata)}),t.qZA()()),2&n&&(t.Q6J("visible",!0),t.xp6(),t.um2(1,o.showSpinner?1:-1),t.xp6(),t.Q6J("additionalOAuthStorageData",t.DdM(3,jr)))},dependencies:[qe.s,Je],styles:["rl-working-indicator[_ngcontent-%COMP%]{margin:0 auto;display:block;font-size:10px}"]})}return i})();const ts=i=>({amount:i}),es=i=>({account:i});let os=(()=>{class i{constructor(e,n,o){this.modalControlService=e,this.currencyPipe=n,this.store=o,this.bem=(0,I.aP)("rl-payout-failed")}ngOnInit(){const{paymentAccount:e,paymentAgreement:n}=this.store.getState();this.accountDescription=`${e.bankName} - ${e.last4}`;const{amount:o,currency:a}=n.payments[0]?.outs[0]?.payment||{};this.amountPending=o?this.currencyPipe.transform((o/100).toFixed(2),a,"symbol","1.2"):"money"}closeModal(){this.modalControlService.close(c.G.CompletedSuccessfully)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e),t.Y36(v.H9),t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payout-failed"]],features:[t._Bn([v.H9])],decls:17,vars:20,consts:[["fakePath","payment/payOutFailed","rl-test","payout-failed"],["product","wallet"],["rl-modal-title","","rl-typography","heading"],["rl-modal-header-widget","right"],["rl-modal-body-part","heroText","rl-modal-description","","rl-typography","bold"],["rl-modal-body-part","actionsContainer"],["btnClass","btn btn-primary","rl-modal-body-part","primaryAction","rl-test","payout-failed-cta",3,"onClick"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"rl-modal-header-close",3),t.qZA(),t.TgZ(6,"rl-modal-body")(7,"p",4),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",5)(14,"custom-button",6),t.NdJ("onClick",function(){return o.closeModal()}),t._uU(15),t.ALo(16,"translate"),t.qZA()()()()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,6,"payout-failed.header")," "),t.xp6(4),t.Tol(o.bem("heroText")),t.xp6(),t.hij(" ",t.xi3(9,8,"payout-failed.headline",t.VKq(16,ts,o.amountPending))," "),t.xp6(3),t.Oqu(t.xi3(12,11,"payout-failed.body",t.VKq(18,es,o.accountDescription))),t.xp6(4),t.Oqu(t.lcZ(16,14,"payout-failed.confirm")))},dependencies:[q,_.zS,k,T,_.vP,_.Wb,A,S,z.x,b.tH,O.$m,h.X$]})}return i})();const ze=()=>({key:"edit-title_done"});let is=(()=>{class i{constructor(e,n,o,a,s){this.store=e,this.signService=n,this.alertService=o,this.modalControlService=a,this.documentEl=s,this.subscriptions=[],this.actionInProgress=!1;const l=this.store.subscribe(d=>{this.binder=d.binder});this.binder=this.store.getState().binder,this.subscriptions.push(l)}ngOnInit(){this.docTitle=this.binder.documents[0].name}updateDocumentName(){const e=this.cleanString(this.docTitle);if(0==e.length||e==this.binder.documents[0].name)return this.close(),!1;this.actionInProgress=!0,this.signService.updateDocument(this.binder.id,this.binder.documents[0].id,{name:e}).subscribe(n=>{this.store.dispatch(L.sW({id:n.id,name:n.name})),this.actionInProgress=!1,this.alertService.setAlertMessage({message:"edit-title_success",type:"success"}),this.modalControlService.close(c.G.CompletedSuccessfully)},()=>{this.actionInProgress=!1,this.alertService.setAlertMessage({message:"edit-title_failure",type:"danger"})})}cleanString(e){return e.trim().replace(/^\s+|\s+$/g,"")}ngOnDestroy(){this.subscriptions.forEach(e=>e())}close(){this.actionInProgress||this.modalControlService.close(c.G.UserTerminated)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(F.f),t.Y36(R.c),t.Y36(c.e),t.Y36(v.K0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["edit-title-modal"]],decls:17,vars:10,consts:[["fakePath","editTitle","rl-test","rename-modal"],["product","sign"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"header-icon","rl-icon","review-invite"],["translate",""],["rl-modal-header-widget","right"],[1,"modal-content"],[1,"content-container"],[1,"custom-message"],[1,"content-heading"],[3,"key"],["name","docTitle","id","docTitle","type","text",1,"party-form-control","margin-top",3,"ngModel","ngModelChange"],[1,"bottom-buttons"],[3,"btnType","btnClass","defaultTranslation","loadingTranslation","isLoading","isDisabled","onClick"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._UZ(3,"i",3),t.TgZ(4,"span",4),t._uU(5,"edit-title_heading"),t.qZA()(),t._UZ(6,"rl-modal-header-close",5),t.qZA(),t.TgZ(7,"rl-modal-body")(8,"div",6)(9,"div",7)(10,"div",8)(11,"p",9),t._UZ(12,"com",10),t.qZA(),t.TgZ(13,"input",11),t.NdJ("ngModelChange",function(s){return o.docTitle=s}),t.qZA()(),t.TgZ(14,"div",12)(15,"custom-button",13),t.NdJ("onClick",function(){return o.updateDocumentName()}),t.qZA()()()()(),t._UZ(16,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(12),t.Q6J("key","edit-title_doc-title"),t.xp6(),t.Q6J("ngModel",o.docTitle),t.xp6(2),t.Q6J("btnType","button")("btnClass","btn btn-primary")("defaultTranslation",t.DdM(8,ze))("loadingTranslation",t.DdM(9,ze))("isLoading",o.actionInProgress)("isDisabled",o.actionInProgress))},dependencies:[J.w,g.Fj,g.JJ,g.On,h.Pi,_.zS,k,U,T,_.vP,A,S,z.x,b.tH,O.$m],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}.hide-sm[_ngcontent-%COMP%], .hide-sm-only[_ngcontent-%COMP%], .show-md-only[_ngcontent-%COMP%], .show-lg-only[_ngcontent-%COMP%], .show-md[_ngcontent-%COMP%], .show-lg[_ngcontent-%COMP%], .show-xl[_ngcontent-%COMP%], .show-xl-only[_ngcontent-%COMP%], .show-xxl-only[_ngcontent-%COMP%]{display:none}.show-sm[_ngcontent-%COMP%], .show-sm-only[_ngcontent-%COMP%], .hide-md-only[_ngcontent-%COMP%], .hide-lg-only[_ngcontent-%COMP%], .hide-xl-only[_ngcontent-%COMP%]{display:block}@media only screen and (max-width: 479px){.hide-sm-only[_ngcontent-%COMP%]{display:none}}@media only screen and (min-width: 480px){.hide-md[_ngcontent-%COMP%], .hide-md-only[_ngcontent-%COMP%], .show-sm-only[_ngcontent-%COMP%]{display:none}.show-md[_ngcontent-%COMP%], .hide-sm-only[_ngcontent-%COMP%], .show-md-only[_ngcontent-%COMP%]{display:block}}@media only screen and (min-width: 768px){.hide-lg[_ngcontent-%COMP%], .show-md-only[_ngcontent-%COMP%]{display:none}.show-lg[_ngcontent-%COMP%], .show-lg-only[_ngcontent-%COMP%], .hide-md-only[_ngcontent-%COMP%]{display:block}}@media only screen and (min-width: 1024px){.hide-xl-only[_ngcontent-%COMP%], .hide-xl[_ngcontent-%COMP%], .show-lg-only[_ngcontent-%COMP%]{display:none}.show-xl[_ngcontent-%COMP%], .show-xl-only[_ngcontent-%COMP%], .hide-lg-only[_ngcontent-%COMP%]{display:block}}@media only screen and (min-width: 1366px){.hide-xxl-only[_ngcontent-%COMP%], .hide-xxl[_ngcontent-%COMP%], .show-xl-only[_ngcontent-%COMP%]{display:none}.show-xxl-only[_ngcontent-%COMP%], .hide-xl-only[_ngcontent-%COMP%]{display:block}}.flexContainer[_ngcontent-%COMP%]{display:flex}.row[_ngcontent-%COMP%]{flex-direction:row}.row-reverse[_ngcontent-%COMP%]{flex-direction:row-reverse}.column[_ngcontent-%COMP%]{flex-direction:column}.column-reverse[_ngcontent-%COMP%]{flex-direction:column-reverse}.wrap[_ngcontent-%COMP%]{flex-wrap:wrap}.nowrap[_ngcontent-%COMP%]{flex-wrap:nowrap}.wrap-reverse[_ngcontent-%COMP%]{flex-wrap:wrap-reverse}.flex-start[_ngcontent-%COMP%]{justify-content:flex-start}.flex-end[_ngcontent-%COMP%]{justify-content:flex-end}.center[_ngcontent-%COMP%]{justify-content:center}.space-between[_ngcontent-%COMP%]{justify-content:space-between}.space-around[_ngcontent-%COMP%]{justify-content:space-around}.align-center[_ngcontent-%COMP%]{align-items:center}.flex0[_ngcontent-%COMP%]{flex:none}.flex1[_ngcontent-%COMP%]{flex:1}.flex2[_ngcontent-%COMP%]{flex:2}.flex3[_ngcontent-%COMP%]{flex:3}.flex4[_ngcontent-%COMP%]{flex:4}.flex5[_ngcontent-%COMP%]{flex:5}.flex6[_ngcontent-%COMP%]{flex:6}.flex7[_ngcontent-%COMP%]{flex:7}.flex8[_ngcontent-%COMP%]{flex:8}.flex9[_ngcontent-%COMP%]{flex:9}.flex10[_ngcontent-%COMP%]{flex:10}.flex11[_ngcontent-%COMP%]{flex:11}.flex12[_ngcontent-%COMP%]{flex:12}@media only screen and (min-width: 480px){.flex0-md[_ngcontent-%COMP%]{flex:none}.flex1-md[_ngcontent-%COMP%]{flex:1}.flex2-md[_ngcontent-%COMP%]{flex:2}.flex3-md[_ngcontent-%COMP%]{flex:3}.flex4-md[_ngcontent-%COMP%]{flex:4}.flex5-md[_ngcontent-%COMP%]{flex:5}.flex6-md[_ngcontent-%COMP%]{flex:6}.flex7-md[_ngcontent-%COMP%]{flex:7}.flex8-md[_ngcontent-%COMP%]{flex:8}.flex9-md[_ngcontent-%COMP%]{flex:9}.flex10-md[_ngcontent-%COMP%]{flex:10}.flex11-md[_ngcontent-%COMP%]{flex:11}.flex12-md[_ngcontent-%COMP%]{flex:12}}@media only screen and (min-width: 768px){.flex0-lg[_ngcontent-%COMP%]{flex:none}.flex1-lg[_ngcontent-%COMP%]{flex:1}.flex2-lg[_ngcontent-%COMP%]{flex:2}.flex3-lg[_ngcontent-%COMP%]{flex:3}.flex4-lg[_ngcontent-%COMP%]{flex:4}.flex5-lg[_ngcontent-%COMP%]{flex:5}.flex6-lg[_ngcontent-%COMP%]{flex:6}.flex7-lg[_ngcontent-%COMP%]{flex:7}.flex8-lg[_ngcontent-%COMP%]{flex:8}.flex9-lg[_ngcontent-%COMP%]{flex:9}.flex10-lg[_ngcontent-%COMP%]{flex:10}.flex11-lg[_ngcontent-%COMP%]{flex:11}.flex12-lg[_ngcontent-%COMP%]{flex:12}}@media only screen and (min-width: 1024px){.flex0-xl[_ngcontent-%COMP%]{flex:none}.flex1-xl[_ngcontent-%COMP%]{flex:1}.flex2-xl[_ngcontent-%COMP%]{flex:2}.flex3-xl[_ngcontent-%COMP%]{flex:3}.flex4-xl[_ngcontent-%COMP%]{flex:4}.flex5-xl[_ngcontent-%COMP%]{flex:5}.flex6-xl[_ngcontent-%COMP%]{flex:6}.flex7-xl[_ngcontent-%COMP%]{flex:7}.flex8-xl[_ngcontent-%COMP%]{flex:8}.flex9-xl[_ngcontent-%COMP%]{flex:9}.flex10-xl[_ngcontent-%COMP%]{flex:10}.flex11-xl[_ngcontent-%COMP%]{flex:11}.flex12-xl[_ngcontent-%COMP%]{flex:12}}@media only screen and (min-width: 1366px){.flex0-xxl[_ngcontent-%COMP%]{flex:none}.flex1-xxl[_ngcontent-%COMP%]{flex:1}.flex2-xxl[_ngcontent-%COMP%]{flex:2}.flex3-xxl[_ngcontent-%COMP%]{flex:3}.flex4-xxl[_ngcontent-%COMP%]{flex:4}.flex5-xxl[_ngcontent-%COMP%]{flex:5}.flex6-xxl[_ngcontent-%COMP%]{flex:6}.flex7-xxl[_ngcontent-%COMP%]{flex:7}.flex8-xxl[_ngcontent-%COMP%]{flex:8}.flex9-xxl[_ngcontent-%COMP%]{flex:9}.flex10-xxl[_ngcontent-%COMP%]{flex:10}.flex11-xxl[_ngcontent-%COMP%]{flex:11}.flex12-xxl[_ngcontent-%COMP%]{flex:12}}.modal-background[_ngcontent-%COMP%]{touch-action:auto;position:fixed;inset:0;z-index:7;width:100%;height:100%;border-radius:3px;background-color:#3339;transition:opacity .2s;opacity:0;visibility:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch;overflow-x:hidden;display:flex;align-items:center;justify-content:center;flex-direction:column}.modal-background.modal-show[_ngcontent-%COMP%], .modal-background.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-wrapper[_ngcontent-%COMP%]{z-index:8;overflow-x:hidden;overflow-y:auto;background-color:#fff;border-radius:8px;width:100%;min-height:auto;height:auto;margin:0 auto}@media screen and (min-width: 480px){.modal-wrapper[_ngcontent-%COMP%]{max-width:448px}}@media screen and (min-width: 768px){.modal-wrapper[_ngcontent-%COMP%]{max-width:560px}}.outer-wrapper[_ngcontent-%COMP%]{padding:16px;width:100%;box-sizing:border-box;margin:auto}.modal-header[_ngcontent-%COMP%]{font-weight:600;line-height:56px;height:56px;text-align:center;padding:0 40px;font-size:18px;background-color:#f2f1f1;position:relative}.modal-header[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{position:absolute;left:0;font-size:21px;margin-left:16px;cursor:pointer;color:#696a78}.modal-header[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{padding-right:8px}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;padding:24px 8px;width:100%;max-width:416px;box-sizing:border-box;margin:0 auto;padding:24px 8px 0!important}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:24px 8px 40px}}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   span.rl-icon.dispute[_ngcontent-%COMP%]{top:6px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;resize:none;outline:none!important;font-size:16px;font-family:Open Sans;background-color:#f7f7f8;font-weight:400;margin-top:8px;padding:10px;border-radius:2px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border:1px solid #e62300}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .custom-text-caption[_ngcontent-%COMP%]{font-size:12px;clear:both}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;position:absolute;right:5px;bottom:5px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{width:100%;padding:0;margin-top:24px;display:flex;justify-content:space-between;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{width:100%;height:48px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse;height:48px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{flex:0 1 50%;height:100%;margin-right:8px;margin-bottom:0}}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:600;font-size:16px;line-height:20px;letter-spacing:.0125em;margin:16px 0 0}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]:first-child{margin-top:0}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .item-ref-label[_ngcontent-%COMP%]{display:block;height:33px;margin:20px 0;line-height:33px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   span.checkbox-check[_ngcontent-%COMP%]{margin-right:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:18px;position:relative}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .rl-icon.dispute[_ngcontent-%COMP%]{position:absolute;top:44px;right:12px;font-size:25px;color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;padding:15px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important;border-radius:2px;outline:0;box-sizing:border-box;background-color:#f7f7f8;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .party-form-control.disabled[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.disabled[_ngcontent-%COMP%]{pointer-events:none}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .party-form-control.invalid[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.invalid[_ngcontent-%COMP%]{box-shadow:0 2px #e62300,inset 1px 1px #e62300,inset -1px 1px #e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control.margin-top[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.margin-top[_ngcontent-%COMP%]{margin-top:6px}.modal-content[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{resize:none;height:120px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:12px;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-ref-label[_ngcontent-%COMP%]{display:block;height:33px;line-height:33px;cursor:pointer;max-width:calc(100% - 60px)}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:24px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   .doc-man-checkbox[_ngcontent-%COMP%]:before{font-size:14px;position:relative}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:14px;display:flex;flex-direction:row;align-items:center}.modal-content.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;display:block;width:100%;margin:0 auto}.modal-content.add-new[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0;color:#e62300;font-size:16px}[_nghost-%COMP%]     .footer-container{margin:-16px auto 16px}"],data:{animation:[P.Ic,P.i_]}})}return i})();function as(i,r){1&i&&(t.TgZ(0,"div",23)(1,"span"),t._UZ(2,"com",24),t.qZA()())}const rs=()=>({updateOn:"submit"}),ss=()=>({key:"add-name-modal_done"}),ls=()=>({key:"add-name-modal_in-progress"});let cs=(()=>{class i{constructor(e,n,o,a,s,l,d){this.store=e,this.signService=n,this.alertService=o,this.modalControlService=a,this.searchParamsService=s,this.featureFlagService=l,this.documentEl=d,this.destroy=new w.x,this.actionInProgress=!1}ngOnInit(){[this.currentUserFirstName,this.currentUserLastName]=(0,m.s_)(this.store.getState()).split(" "),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe({next:({data:e})=>{"setupAPayment"===e.to?this.modalControlService.close(c.G.CompletedSuccessfully,this.featureFlagService.flags.variable_fee_enabled?{nextModal:"creatorModal"}:{nextModal:"selectRoleModal"}):this.modalControlService.close(c.G.CompletedSuccessfully)}})}updateName(e){if(e.form.markAsDirty(),e.form.markAllAsTouched(),Object.keys(e.controls).map(p=>e.controls[p]).forEach(p=>p.updateValueAndValidity()),!e.valid)return!1;this.actionInProgress=!0;const o=(0,m.kT)(this.store.getState()),a=this.currentUserFirstName.trim(),s=this.currentUserLastName.trim(),l={...o?.metaData||null,firstName:a,lastName:s},d={...o,legalName:`${a} ${s}`,metaData:l};return this.store.dispatch((0,nt.CE)(d)),this.signService.updateBinder(this.store.getState().binder,!0).subscribe(()=>{"setupAPayment"===this.searchParamsService.get("source")||ne(this.store.getState())?this.modalControlService.navigate("setupAPayment"):this.modalControlService.navigate("end")},()=>{this.alertService.addDangerAlert({message:"add-name-modal_error"}),this.actionInProgress=!1}),!0}ngOnDestroy(){this.destroy.next()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(F.f),t.Y36(R.c),t.Y36(c.e),t.Y36(lt.l),t.Y36(ut.e),t.Y36(v.K0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["add-name-modal"]],decls:31,vars:16,consts:[["fakePath","addName","rl-test","add-name-modal"],["product","sign"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"header-icon","rl-icon","review-invite"],["translate",""],[1,"modal-dialog","modal-content"],[1,"content-container"],[1,"content-heading"],[3,"key"],[1,"content-description"],["rl-test","add-name-form",1,"add-name-form",3,"ngFormOptions","submit"],["form","ngForm"],[1,"form-control"],["for","firstName"],["id","firstName","required","","name","firstName","minlength","2","pattern",".*\\w.*","rl-test","add-first-name-input",3,"ngModel","ngModelChange"],["firstName","ngModel"],[1,"rl-icon","dispute"],["for","lastName"],["id","lastName","required","","name","lastName","minlength","2","pattern",".*\\w.*","rl-test","add-last-name-input",3,"ngModel","ngModelChange"],["lastName","ngModel"],["rl-test","error-empty","class","error"],[1,"bottom-buttons","bottom-buttons-centered"],["rl-test","add-name-modal-cta",3,"btnType","btnClass","defaultTranslation","loadingTranslation","isLoading"],["rl-test","error-empty",1,"error"],["key","add-name-modal_form-error"]],template:function(n,o){if(1&n){const a=t.EpF();t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._UZ(3,"i",3),t.TgZ(4,"span",4),t._uU(5,"add-name-modal_heading"),t.qZA()()(),t.TgZ(6,"rl-modal-body")(7,"div",5)(8,"div",6)(9,"p",7),t._UZ(10,"com",8),t.qZA(),t.TgZ(11,"p",9),t._UZ(12,"com",8),t.qZA(),t.TgZ(13,"form",10,11),t.NdJ("submit",function(){t.CHM(a);const l=t.MAs(14);return t.KtG(o.updateName(l))}),t.TgZ(15,"div",12)(16,"label",13),t._UZ(17,"com",8),t.qZA(),t.TgZ(18,"input",14,15),t.NdJ("ngModelChange",function(l){return o.currentUserFirstName=l}),t.qZA(),t._UZ(20,"span",16),t.qZA(),t.TgZ(21,"div",12)(22,"label",17),t._UZ(23,"com",8),t.qZA(),t.TgZ(24,"input",18,19),t.NdJ("ngModelChange",function(l){return o.currentUserLastName=l}),t.qZA(),t._UZ(26,"span",16),t.qZA(),t.YNc(27,as,3,0,"div",20),t.TgZ(28,"div",21),t._UZ(29,"custom-button",22),t.qZA()()()()(),t._UZ(30,"rl-modal-footer"),t.qZA()}if(2&n){const a=t.MAs(14);t.xp6(10),t.Q6J("key","add-name-modal_description"),t.xp6(2),t.Q6J("key","add-name-modal_full_description"),t.xp6(),t.Q6J("ngFormOptions",t.DdM(13,rs)),t.xp6(4),t.Q6J("key","add-name-modal_first_name"),t.xp6(),t.Q6J("ngModel",o.currentUserFirstName),t.xp6(5),t.Q6J("key","add-name-modal_last_name"),t.xp6(),t.Q6J("ngModel",o.currentUserLastName),t.xp6(3),t.um2(27,a.invalid&&a.touched?27:-1),t.xp6(2),t.Q6J("btnType","submit")("btnClass","btn btn-primary")("defaultTranslation",t.DdM(14,ss))("loadingTranslation",t.DdM(15,ls))("isLoading",o.actionInProgress)}},dependencies:[J.w,g._Y,g.Fj,g.JJ,g.JL,g.Q7,g.wO,g.c5,g.On,g.F,h.Pi,_.zS,U,T,_.vP,S,z.x,b.tH,O.$m],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}.modal-background[_ngcontent-%COMP%]{touch-action:auto;position:fixed;inset:0;z-index:7;width:100%;height:100%;border-radius:3px;background-color:#3339;transition:opacity .2s;opacity:0;visibility:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch;overflow-x:hidden;display:flex;align-items:center;justify-content:center;flex-direction:column}.modal-background.modal-show[_ngcontent-%COMP%], .modal-background.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.outer-wrapper[_ngcontent-%COMP%]{padding:16px;width:100%;box-sizing:border-box;margin:auto}.modal-wrapper[_ngcontent-%COMP%]{z-index:8;overflow-x:hidden;overflow-y:auto;background-color:#fff;border-radius:8px;width:100%;min-height:auto;height:auto;margin:0 auto}@media screen and (min-width: 480px){.modal-wrapper[_ngcontent-%COMP%]{max-width:448px}}@media screen and (min-width: 768px){.modal-wrapper[_ngcontent-%COMP%]{max-width:560px}}.modal-header[_ngcontent-%COMP%]{font-weight:600;line-height:56px;height:56px;text-align:center;padding:0 40px;font-size:18px;background-color:#f2f1f1;position:relative}.modal-header[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{position:absolute;left:0;font-size:21px;margin-left:16px;cursor:pointer;color:#696a78}.modal-header[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{padding-right:8px}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;width:100%;max-width:416px;box-sizing:border-box;margin:0 auto;font-family:Open Sans;padding:32px 0 0;font-size:15px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:24px 8px 40px}}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   span.rl-icon.dispute[_ngcontent-%COMP%]{top:6px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;resize:none;outline:none!important;font-size:16px;font-family:Open Sans;background-color:#f7f7f8;font-weight:400;margin-top:8px;padding:10px;border-radius:2px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border:1px solid #e62300}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .custom-text-caption[_ngcontent-%COMP%]{font-size:12px;clear:both}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;position:absolute;right:5px;bottom:5px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{width:100%;padding:0;margin-top:24px;display:flex;justify-content:space-between;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{width:100%;height:48px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse;height:48px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{flex:0 1 50%;height:100%;margin-right:8px;margin-bottom:0}}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:600;font-size:16px;line-height:20px;letter-spacing:.0125em;margin:16px 0 0}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]:first-child{margin-top:0}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .item-ref-label[_ngcontent-%COMP%]{display:block;height:33px;margin:20px 0;line-height:33px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   span.checkbox-check[_ngcontent-%COMP%]{margin-right:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:18px;position:relative}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .rl-icon.dispute[_ngcontent-%COMP%]{position:absolute;top:44px;right:12px;font-size:25px;color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;padding:15px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important;border-radius:2px;outline:0;box-sizing:border-box;background-color:#f7f7f8;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .party-form-control.disabled[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.disabled[_ngcontent-%COMP%]{pointer-events:none}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .party-form-control.invalid[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.invalid[_ngcontent-%COMP%]{box-shadow:0 2px #e62300,inset 1px 1px #e62300,inset -1px 1px #e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control.margin-top[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.margin-top[_ngcontent-%COMP%]{margin-top:6px}.modal-content[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{resize:none;height:120px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:12px;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-ref-label[_ngcontent-%COMP%]{display:block;height:33px;line-height:33px;cursor:pointer;max-width:calc(100% - 60px)}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:24px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   .doc-man-checkbox[_ngcontent-%COMP%]:before{font-size:14px;position:relative}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:14px;display:flex;flex-direction:row;align-items:center}.modal-content.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;display:block;width:100%;margin:0 auto}.modal-content.add-new[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0;color:#e62300;font-size:16px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:32px 0 0}}.modal-content[_ngcontent-%COMP%]   .add-name-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:6px;display:block}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .content-description[_ngcontent-%COMP%]{margin:16px 0;text-align:center}.modal-content[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;margin-bottom:8px;padding:10px;border:1px solid #d8d8d8;border-radius:5px;outline:0;box-sizing:border-box;font-family:Open Sans}.modal-content[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + .rl-icon.dispute[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#e62300!important;border-bottom-width:3px}.modal-content[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%] + .rl-icon.dispute[_ngcontent-%COMP%]{top:36px;display:block}.modal-content[_ngcontent-%COMP%]   .bottom-buttons-centered[_ngcontent-%COMP%]{flex-direction:initial;justify-content:center}@media screen and (min-width: 768px){.modal-content[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{margin-top:20px}}"],data:{animation:[P.Ic,P.i_]}})}return i})(),He=(()=>{class i{constructor(e,n){this.modalControlService=e,this.translateService=n,this.destroy=new w.x,this.lang="en"}ngOnInit(){this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(e=>this.onNavigate(e)),this.lang=this.translateService.getDefaultLang()}onNavigate(e){this.modalControlService.close(c.G.UserNavigatedBack)}ngOnDestroy(){this.destroy.next()}close(){this.modalControlService.close(c.G.CompletedSuccessfully)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e),t.Y36(h.sK))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["how-it-works-modal"]],decls:21,vars:4,consts:[["rl-test","how-it-works-modal"],["product","sign"],["rl-modal-title","","rl-typography","heading","translate",""],["rl-modal-header-widget","right"],[1,"modal-content"],[1,"banner-image-container"],["src","images/howitworks/how-it-works1.png",1,"banner-image"],["src","images/howitworks/how-it-works2.png",1,"banner-image"],["src","images/howitworks/how-it-works3.png",1,"banner-image"],[1,"instruction-text-mobile"],[3,"key"],[1,"instruction-text-desktop"],[1,"instruction-image-container"],[1,"instruction-image",3,"src"],[1,"btn-group","bottom-buttons"],[1,"btn","btn-primary",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._uU(3,"how-it-works-modal_header"),t.qZA(),t._UZ(4,"rl-modal-header-close",3),t.qZA(),t.TgZ(5,"rl-modal-body")(6,"div",4)(7,"div",5),t._UZ(8,"img",6)(9,"img",7)(10,"img",8),t.qZA(),t.TgZ(11,"span",9),t._UZ(12,"com",10),t.qZA(),t.TgZ(13,"span",11),t._UZ(14,"com",10),t.qZA(),t.TgZ(15,"div",12),t._UZ(16,"img",13),t.qZA(),t.TgZ(17,"div",14)(18,"button",15),t.NdJ("click",function(){return o.close()}),t._UZ(19,"com",10),t.qZA()()()(),t._UZ(20,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(12),t.Q6J("key","how-it-works-modal_instruction-mobile"),t.xp6(2),t.Q6J("key","how-it-works-modal_instruction-desktop"),t.xp6(2),t.MGl("src","images/howitworks/how-it-works-",o.lang,".png",t.LSH),t.xp6(3),t.Q6J("key","how-it-works-modal_close-btn"))},dependencies:[J.w,h.Pi,_.zS,k,U,T,_.vP,A,S,b.tH,O.$m],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}[_nghost-%COMP%]     rl-modal-header{margin:0}[_nghost-%COMP%]     .rl-modal{padding:0}[_nghost-%COMP%]     .footer-container{margin:0 auto;padding-bottom:16px}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]:nth-child(2){display:none}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]:nth-child(3){display:none}.modal-content[_ngcontent-%COMP%]   .instruction-text-mobile[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .instruction-text-desktop[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:24px;text-align:center;font-size:16px;display:block;font-weight:600}.modal-content[_ngcontent-%COMP%]   .instruction-image[_ngcontent-%COMP%]{max-width:240px;max-height:100%;display:block;margin:auto auto 12px}.modal-content[_ngcontent-%COMP%]   .instruction-text-desktop[_ngcontent-%COMP%]{font-size:16px;font-weight:400;display:none}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{padding-top:16px;padding-bottom:16px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:block;margin:0 auto;max-width:240px;width:100%}@media (pointer: coarse) and (min-width: 769px){.modal-content[_ngcontent-%COMP%]   .instruction-text-mobile[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:15px}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]:nth-child(1){display:none}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]:nth-child(2){display:block}.modal-content[_ngcontent-%COMP%]   .instruction-image[_ngcontent-%COMP%]{margin:auto auto 40px}}@media (pointer: fine){.modal-content[_ngcontent-%COMP%]   .instruction-text-desktop[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:15px}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]:nth-child(1){display:none}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]:nth-child(2){display:none}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]:nth-child(3){display:block}.modal-content[_ngcontent-%COMP%]   .instruction-text-desktop[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .instruction-text-mobile[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .instruction-image[_ngcontent-%COMP%]{margin:auto auto 40px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{border-top:1px solid #EDEDF0}}"],data:{animation:[P.i_,P.Ic]}})}return i})();const ds=()=>({key:"owner-finalise-warning-modal_confirm-btn"}),ms=()=>({key:"owner-finalise-warning-modal_confirm-btn-saving"});let gs=(()=>{class i{constructor(e,n,o,a){this.store=e,this.alertService=n,this.partyService=o,this.modalControlService=a,this.hideModal=new t.vpe,this.onSavedChanges=new t.vpe,this.showAgain=!0,this.actionInProgress=!1,this.binder=this.store.getState().get("binder"),this.storage=(0,bt.h)({storage:sessionStorage,ignoreStorageErrors:!0})}finalise(){this.showAgain||(this.storage.showOwnerFinaliseWarning="false"),this.actionInProgress=!0,this.partyService.ensurePartyRefIntegrity().subscribe({next:()=>{this.actionInProgress=!1,this.store.dispatch((0,H.KI)(!1)),this.modalControlService.close(c.G.CompletedSuccessfully)},error:e=>{this.alertService.addDangerAlert({message:"sign-summary_prepare-to-sign-submit-failed"}),this.actionInProgress=!1,this.hideModal.emit()}})}close(){this.showAgain=!0,this.modalControlService.close(c.G.UserNavigatedBack)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(R.c),t.Y36(Zt.p),t.Y36(c.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["owner-finalise-warning-modal"]],outputs:{hideModal:"hideModal",onSavedChanges:"onSavedChanges"},decls:22,vars:12,consts:[["fakePath","finalise","rl-test","owner-finalise-modal"],["product","sign"],["rl-modal-title","","rl-typography","heading"],["translate",""],["rl-modal-header-widget","right"],[1,"modal-content"],[1,"modal-content-heading"],[3,"key"],[1,"description"],[1,"required-button"],["type","checkbox","id","input-required","name","input-required",3,"checked","change"],["for","input-required",1,"required-label"],[1,"rl-icon","checkbox-check","doc-man-checkbox"],[1,"bottom-buttons"],[3,"btnType","btnClass","isLoading","defaultTranslation","loadingTranslation","onClick"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2)(3,"span",3),t._uU(4,"owner-finalise-warning-modal_header"),t.qZA()(),t._UZ(5,"rl-modal-header-close",4),t.qZA(),t.TgZ(6,"rl-modal-body")(7,"div",5)(8,"h4",6),t._UZ(9,"com",7),t.qZA(),t.TgZ(10,"div",8),t._UZ(11,"com",7),t.qZA(),t.TgZ(12,"div",9)(13,"input",10),t.NdJ("change",function(){return o.showAgain=!o.showAgain}),t.qZA(),t.TgZ(14,"label",11),t._UZ(15,"span",12)(16,"com",7),t.qZA()(),t.TgZ(17,"div",13)(18,"custom-button",14),t.NdJ("onClick",function(){return o.finalise()}),t.qZA(),t.TgZ(19,"button",15),t.NdJ("click",function(){return o.close()}),t._UZ(20,"com",7),t.qZA()()()(),t._UZ(21,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(9),t.Q6J("key","owner-finalise-warning-modal_prompt"),t.xp6(2),t.Q6J("key","owner-finalise-warning-modal_description"),t.xp6(2),t.Q6J("checked",!o.showAgain),t.xp6(3),t.Q6J("key","owner-finalise-warning-modal_checkbox"),t.xp6(2),t.Q6J("btnType","submit")("btnClass","btn btn-primary")("isLoading",o.actionInProgress)("defaultTranslation",t.DdM(10,ds))("loadingTranslation",t.DdM(11,ms)),t.xp6(2),t.Q6J("key","owner-finalise-warning-modal_cancel-btn"))},dependencies:[J.w,h.Pi,_.zS,k,U,T,_.vP,A,S,z.x,b.tH,O.$m],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}[_nghost-%COMP%]     .footer-container{margin:0 auto;padding-bottom:16px}.modal-background[_ngcontent-%COMP%]{touch-action:auto;position:fixed;inset:0;z-index:7;width:100%;height:100%;border-radius:3px;background-color:#3339;transition:opacity .2s;opacity:0;visibility:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch;overflow-x:hidden;display:flex;align-items:center;justify-content:center;flex-direction:column}.modal-background.modal-show[_ngcontent-%COMP%], .modal-background.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.outer-wrapper[_ngcontent-%COMP%]{padding:16px;width:100%;box-sizing:border-box;margin:auto}.modal-wrapper[_ngcontent-%COMP%]{z-index:8;overflow-x:hidden;overflow-y:auto;background-color:#fff;border-radius:8px;width:100%;min-height:auto;height:auto;margin:0 auto}@media screen and (min-width: 480px){.modal-wrapper[_ngcontent-%COMP%]{max-width:448px}}@media screen and (min-width: 768px){.modal-wrapper[_ngcontent-%COMP%]{max-width:560px}}.modal-header[_ngcontent-%COMP%]{font-weight:600;line-height:56px;height:56px;text-align:center;padding:0 40px;font-size:18px;background-color:#f2f1f1;position:relative;border:none}.modal-header[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{position:absolute;left:0;font-size:21px;margin-left:16px;cursor:pointer;color:#696a78}.modal-header[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{padding-right:8px}.modal-header[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{font-size:22px}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;padding:24px 8px;width:100%;max-width:416px;box-sizing:border-box;margin:0 auto;padding:24px 8px 0!important}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:24px 8px 40px}}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   span.rl-icon.dispute[_ngcontent-%COMP%]{top:6px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;resize:none;outline:none!important;font-size:16px;font-family:Open Sans;background-color:#f7f7f8;font-weight:400;margin-top:8px;padding:10px;border-radius:2px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border:1px solid #e62300}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .custom-text-caption[_ngcontent-%COMP%]{font-size:12px;clear:both}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;position:absolute;right:5px;bottom:5px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{width:100%;padding:0;margin-top:24px;display:flex;justify-content:space-between;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{width:100%;height:48px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse;height:48px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{flex:0 1 50%;height:100%;margin-right:8px;margin-bottom:0}}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:600;font-size:16px;line-height:20px;letter-spacing:.0125em;margin:16px 0 0}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]:first-child{margin-top:0}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .item-ref-label[_ngcontent-%COMP%]{display:block;height:33px;margin:20px 0;line-height:33px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   span.checkbox-check[_ngcontent-%COMP%]{margin-right:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:18px;position:relative}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .rl-icon.dispute[_ngcontent-%COMP%]{position:absolute;top:44px;right:12px;font-size:25px;color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;padding:15px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important;border-radius:2px;outline:0;box-sizing:border-box;background-color:#f7f7f8;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .party-form-control.disabled[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.disabled[_ngcontent-%COMP%]{pointer-events:none}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .party-form-control.invalid[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.invalid[_ngcontent-%COMP%]{box-shadow:0 2px #e62300,inset 1px 1px #e62300,inset -1px 1px #e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control.margin-top[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.margin-top[_ngcontent-%COMP%]{margin-top:6px}.modal-content[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{resize:none;height:120px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:12px;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-ref-label[_ngcontent-%COMP%]{display:block;height:33px;line-height:33px;cursor:pointer;max-width:calc(100% - 60px)}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:24px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   .doc-man-checkbox[_ngcontent-%COMP%]:before{font-size:14px;position:relative}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:14px;display:flex;flex-direction:row;align-items:center}.modal-content.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;display:block;width:100%;margin:0 auto}.modal-content.add-new[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0;color:#e62300;font-size:16px}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{margin-right:8px;margin-left:8px;text-align:left}.modal-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:16px;line-height:20px;margin-right:8px;margin-left:8px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-left:8px}.modal-content[_ngcontent-%COMP%]   .cancel-top[_ngcontent-%COMP%]{margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .cancel-left[_ngcontent-%COMP%]{display:none}@media screen and (min-width: 480px){.modal-wrapper[_ngcontent-%COMP%]   .cancel-top[_ngcontent-%COMP%]{display:none}.modal-wrapper[_ngcontent-%COMP%]   .cancel-left[_ngcontent-%COMP%]{display:block}.bottom-buttons[_ngcontent-%COMP%]{margin-top:24px;display:flex;flex-direction:row-reverse;justify-content:space-between}.bottom-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{margin-right:10px}}"],data:{animation:[P.i_,P.Ic]}})}return i})(),ps=(()=>{class i{constructor(e){this.elementRef=e}ngAfterViewInit(){let e=this.elementRef.nativeElement;e.children.length>0&&this.assignEncapsulationAttributes(e)}assignEncapsulationAttributes(e){let n=this.findNgContentId(e);Array.from(e.children).forEach(o=>{o.setAttribute("_ngcontent-"+n,"")})}findNgContentId(e){let n=Array.from(e.attributes).find(o=>o.nodeName.startsWith("_ngcontent")).nodeName;return n.substring(n.indexOf("-")+1)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:i,selectors:[["","propagateStyles",""]]})}return i})();const us=["payMethodSummary"],Be="rl-payment-pay-confirm-modal";let _s=(()=>{class i{constructor(e){this.translationService=e,this.destroy=new w.x,this.bem=(0,I.aP)(Be),this.changeSourceClick=new t.vpe,this.payNowClick=new t.vpe,this.paymentServiceSummaryAccessible="",this.rootClassnames=Be,this.serviceAgreement=""}static addNonBreakingSpaces(e){return e.replace(/ /g,"\xa0")}getServiceAgreementText(){const e=this.translationService.get("payment-pay-confirm-modal.terms-of-service").pipe((0,B.U)(i.addNonBreakingSpaces),(0,B.U)(a=>this.makeServiceAgreementLink(a,"https://www.rocketlawyer.com/rocket-wallet-terms"))),n=this.translationService.get("payment-pay-confirm-modal.privacy-policy").pipe((0,B.U)(i.addNonBreakingSpaces),(0,B.U)(a=>this.makeServiceAgreementLink(a,"https://www.rocketlawyer.com/privacy.rl"))),o=this.translationService.get("payment-pay-confirm-modal.stripe-caa").pipe((0,B.U)(i.addNonBreakingSpaces),(0,B.U)(a=>this.makeServiceAgreementLink(a,"https://stripe.com/connect-account/legal/full")));return(0,Ut.D)([e,n,o]).pipe((0,et.z)(([a,s,l])=>this.translationService.get("payment-pay-confirm-modal.service-agreement",{termsOfService:a,privacyPolicy:s,stripeCAA:l})))}makeServiceAgreementLink(e,n){return`<a class="${this.bem("service-agreement-link")}" href="${n}" target="_blank">${e}</a>`}ngAfterViewInit(){(0,K.R)(this.payMethodSummary.nativeElement,"rlPayMethodSummaryCogClick").pipe((0,C.R)(this.destroy)).subscribe(()=>{this.changeSourceClick.emit()})}ngOnInit(){this.getServiceAgreementText().subscribe(e=>{this.serviceAgreement=e}),this.translationService.get("payment-pay-confirm-modal.payment-from-source-full-accessible",{ID:this.paymentMethod.last4,service:this.paymentMethod.name}).pipe((0,C.R)(this.destroy)).subscribe(e=>{this.paymentServiceSummaryAccessible=e})}ngOnDestroy(){this.destroy.next()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(h.sK))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-pay-confirm-modal"]],viewQuery:function(n,o){if(1&n&&t.Gf(us,5),2&n){let a;t.iGM(a=t.CRH())&&(o.payMethodSummary=a.first)}},inputs:{loading:"loading",payer:"payer",paymentAmount:"paymentAmount",paymentCurrencyCode:"paymentCurrencyCode",paymentMethod:"paymentMethod",recipient:"recipient"},outputs:{payNowClick:"payNowClick",changeSourceClick:"changeSourceClick"},decls:47,vars:64,consts:[["fakePath","payment/confirmPay","rl-test","payment-use-method-confirmation"],["product","wallet"],["rl-modal-header-widget","left"],["rl-modal-title","","rl-typography","","variant","heading"],["role","presentation"],["rl-modal-header-widget","right"],["rl-modal-description","","rl-modal-body-part","heroText",1,"bold-700"],["rl-modal-body-part","regularContent","role","presentation"],[3,"party","title"],["rlTable",""],["rlTableRow",""],["rlTableHeader",""],["rlTableCell",""],["rl-modal-body-part","regularContent"],["rl-inclusively-hidden","visualOnly"],["rl-test","pay-method","radio-enabled","false","cog-enabled","true",3,"name","logo","identifier"],["payMethodSummary",""],["propagateStyles","","rl-typography","small","rl-modal-body-part","regularContent","rl-test","legal-agreement",3,"comContent"],["rl-modal-body-part","actionsContainer"],["rl-modal-body-part","primaryAction","rl-typography","","rl-test","send-now-cta","variant","button",3,"rl-class","disabled","click"],["translate","",3,"hidden"],["alt","","role","presentation","src","images/signapp/rolling.svg",3,"hidden"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1),t._UZ(2,"rl-modal-header-back",2),t.TgZ(3,"h1",3),t._UZ(4,"i",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"rl-modal-header-close",5),t.qZA(),t.TgZ(8,"rl-modal-body")(9,"p",6),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",7),t._UZ(13,"rl-party-avatar",8),t.ALo(14,"translate"),t._UZ(15,"div")(16,"rl-party-avatar",8),t.qZA(),t.TgZ(17,"table",9)(18,"tbody")(19,"tr",10)(20,"th",11),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"td",12),t._uU(24),t.ALo(25,"currency"),t.qZA()(),t.TgZ(26,"tr",10)(27,"th",11),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"td",12),t._uU(31),t.qZA()()()(),t.TgZ(32,"div",13)(33,"span",14),t._uU(34),t.qZA(),t.TgZ(35,"div",4),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"rl-pay-method-summary",15,16),t._uU(40),t.qZA()(),t._UZ(41,"p",17),t.TgZ(42,"div",18)(43,"button",19),t.NdJ("click",function(){return o.payNowClick.emit()}),t.TgZ(44,"span",20),t._uU(45,"payment-pay-confirm-modal.send-now"),t.qZA(),t._UZ(46,"img",21),t.qZA()()()()),2&n&&(t.Tol(o.rootClassnames),t.xp6(4),t.Gre("rl-icon card ",o.bem("header-icon"),""),t.xp6(),t.hij(" ",t.lcZ(6,47,"payment-pay-confirm-modal.header")," "),t.xp6(4),t.Tol(o.bem("description")),t.xp6(),t.hij(" ",t.lcZ(11,49,"payment-pay-confirm-modal.description")," "),t.xp6(2),t.MT6("",o.bem("panel")," ",o.bem("avatars"),""),t.xp6(),t.s9C("title",t.lcZ(14,51,"payment-pay-confirm-modal.to_you")),t.Q6J("party",o.payer),t.xp6(2),t.Gre("rl-icon arrow_bidirectional ",o.bem("avatar-arrows"),""),t.xp6(),t.Q6J("party",o.recipient)("title",null==o.recipient?null:o.recipient.legalName),t.xp6(5),t.hij(" ",t.lcZ(22,53,"payment-pay-confirm-modal.payment-amount")," "),t.xp6(3),t.Oqu(t.gM2(25,55,o.paymentAmount,o.paymentCurrencyCode,"symbol","1.2")),t.xp6(4),t.hij(" ",t.lcZ(29,60,"payment-pay-confirm-modal.payment-recipient")," "),t.xp6(2),t.uIk("data-pii","value"),t.xp6(),t.Oqu(null==o.recipient?null:o.recipient.legalName),t.xp6(3),t.hij(" ",o.paymentServiceSummaryAccessible," "),t.xp6(),t.Tol(o.bem("from-your")),t.xp6(),t.Oqu(t.lcZ(37,62,"payment-pay-confirm-modal.payment-from-source-visible")),t.xp6(2),t.Tol(o.bem("method")),t.s9C("name",o.paymentMethod.name),t.s9C("logo",o.paymentMethod.logo),t.s9C("identifier",o.paymentMethod.last4),t.xp6(2),t.Oqu(o.paymentMethod.name),t.xp6(),t.Tol(o.bem("service-agreement")),t.Q6J("comContent",o.serviceAgreement),t.xp6(2),t.Gre("btn btn-primary ",o.bem("send-now"),""),t.s9C("rl-class",o.loading?"disabled":""),t.Q6J("disabled",o.loading),t.xp6(),t.Q6J("hidden",o.loading),t.xp6(2),t.Tol(o.bem("loading-spinner")),t.Q6J("hidden",!o.loading))},dependencies:[mt.q,ps,h.Pi,q,_.zS,k,T,W,_.vP,_.Wb,A,S,b.tH,vt,O.$m,Ze,Ot.N,v.H9,h.X$],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.header-image[_ngcontent-%COMP%]{max-height:100%;max-width:100%;width:auto;height:auto;position:absolute;inset:0;margin:auto}.sign-icon[_ngcontent-%COMP%]{min-height:40px;margin:0 auto;width:40px;display:block}.default-icon[_ngcontent-%COMP%]{font-size:39px;width:40px;height:40px}.rl-payment-pay-confirm-modal__header-icon[_ngcontent-%COMP%]{line-height:1.2em}.rl-payment-pay-confirm-modal__description[_ngcontent-%COMP%], .rl-payment-pay-confirm-modal__avatars[_ngcontent-%COMP%], .rl-payment-pay-confirm-modal__service-agreement[_ngcontent-%COMP%]{text-align:center}.rl-payment-pay-confirm-modal__panel[_ngcontent-%COMP%]{box-shadow:0 0 8px #0000001a;padding:16px 0;width:100%}.rl-payment-pay-confirm-modal__avatars[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block;margin:0 3px;vertical-align:middle}.rl-payment-pay-confirm-modal__avatar-arrows[_ngcontent-%COMP%]{color:#d68021;font-size:28px}.rl-payment-pay-confirm-modal__from-your[_ngcontent-%COMP%]{color:#696a78;padding-bottom:10px;padding-left:12px}.rl-payment-pay-confirm-modal__service-agreement-link[_ngcontent-%COMP%], .rl-payment-pay-confirm-modal__service-agreement-link[_ngcontent-%COMP%]:link, .rl-payment-pay-confirm-modal__service-agreement-link[_ngcontent-%COMP%]:visited{color:#d68021}.rl-payment-pay-confirm-modal__send-now[_ngcontent-%COMP%]{width:100%}.rl-payment-pay-confirm-modal__loading-spinner[_ngcontent-%COMP%]{display:block;margin:0 auto;width:24px}.rl-payment-pay-confirm-modal__loading-spinner[hidden][_ngcontent-%COMP%]{display:none}.rl-payment-pay-confirm-modal__method[_ngcontent-%COMP%]{font-size:62.5%}"]})}return i})(),hs=(()=>{class i{get paymentAmountDisplay(){return parseFloat((this.paymentAmount/100).toFixed(2))}constructor(e,n,o,a,s,l,d,p){this.alertService=e,this.eventTracker=n,this.modalControlService=o,this.payService=a,this.signService=s,this.store=l,this.messageService=d,this.featureFlagService=p,this.destroy=new w.x,this.loading=!1,this.paymentAgreementID="",this.paymentAmount=0,this.paymentCurrency=""}changeSource(){this.modalControlService.navigate("back")}ngOnDestroy(){this.destroy.next()}ngOnInit(){const{binder:e}=this.store.getState();this.loading=!0,this.payService.getPaymentAgreementByBinderID(e.id).pipe((0,B.U)(o=>({id:o.externalId,status:o.status,...o.payments[0].ins[0].payment}))).subscribe({next:({amount:o,currency:a,id:s,status:l})=>{this.paymentAgreementID=s,this.paymentAgreementStatus=l,this.paymentAmount=o,this.paymentCurrency=a},error:o=>{this.loading=!1,console.error(o)},complete:()=>{this.loading=!1}}),this.payer=(0,m.oJ)(e,"PAYER"),this.recipient=(0,m.oJ)(e,"PAYEE"),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(o=>{this.onNavigate(o)});const{paymentMethod:n}=this.store.getState();this.paymentMethod=n}payNow(){this.loading=!0;const e=this.store.getState(),n=this.makeGetBinderNoStoreUpdate(e.binder.id);("draft"===this.paymentAgreementStatus?this.payService.setPaymentAgreementStatus(this.paymentAgreementID,"pending"):(0,Y.of)({})).pipe((0,et.z)(()=>this.chargePayer()),(0,et.z)(n),(0,et.z)(a=>"IN_PREPARATION"===a.status?this.signService.sendFinalisation("",a).pipe((0,et.z)(n)):(0,Y.of)(a)),(0,et.z)(a=>"REVIEW_AND_SHARE"===a.status?this.signService.sendInvitations(a.id,""):(0,Y.of)(void 0)),(0,et.z)(()=>this.signService.getBinder(e.binder.id,{saveStore:!0,fetchHistory:!0}).pipe((0,it.h)(void 0)))).subscribe({next:()=>{this.eventTracker.pay({methodID:this.paymentMethod.id,methodType:this.getPaymentMethodType(),currency:this.paymentCurrency,value:this.paymentAmountDisplay.toString(10),transactionID:this.paymentAgreementID}),this.showSuccessAlert(),this.modalControlService.navigate("end")},error:()=>{this.modalControlService.navigate("error")},complete:()=>{this.loading=!1,(!(0,G.bD)(e)||(0,G.bD)(e)&&(0,G.Zm)(e))&&this.sendSigningEventToParentWindow()}})}getPaymentMethodType(){switch(this.paymentMethod.type){case"bank":return"bankAccount";case"card":return"card";default:throw new Error(`Unexpected payment method type: ${this.paymentMethod.type}`)}}chargePayer(){switch(this.paymentMethod.type){case"bank":return this.payService.chargeAchPaymentToPaymentAgreement(this.paymentAgreementID,this.payer.id,this.prepareAchCharge(),this.getAchPaymentMethodId(),this.paymentAmount,this.paymentCurrency);case"card":return this.payService.chargePaymentToPaymentAgreement(this.paymentAgreementID,this.payer.id,this.paymentMethod.id,this.paymentAmount,this.paymentCurrency);default:throw new Error(`Unexpected payment method type: ${this.paymentMethod.type}`)}}showSuccessAlert(){switch(this.paymentMethod.type){case"bank":this.alertService.addSuccessAlert({message:"payment-pay-confirm-modal.ach-charge-success"});break;case"card":this.alertService.addSuccessAlert({message:"payment-pay-confirm-modal.card-charge-success"});break;default:throw new Error(`Unexpected payment method type: ${this.paymentMethod.type}`)}}prepareAchCharge(){const{identityProfile:e}=this.store.getState();return{customerId:e.achPaymentMethod.customerId,source:this.paymentMethod.id}}getAchPaymentMethodId(){const{identityProfile:e}=this.store.getState();return e.achPaymentMethod.externalId}sendSigningEventToParentWindow(){const e=(0,m.kT)(this.store.getState());this.messageService.sendEvent({signingComplete:{party:e},activitiesComplete:{party:e}})}onNavigate(e){"back"===e.data.to?this.featureFlagService.flags.pay_with_bank_account?this.modalControlService.close(c.G.UserNavigatedBack,{nextModal:"choosePaymentMethod"}):this.modalControlService.close(c.G.UserNavigatedBack):"end"===e.data.to?this.modalControlService.close(c.G.CompletedSuccessfully):"error"===e.data.to&&this.modalControlService.close(c.G.CompletedWithError,{nextModal:"paymentFailed"})}makeGetBinderNoStoreUpdate(e){return()=>this.signService.getBinder(e,{fetchHistory:!1,fetchPages:!1,saveStore:!1})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(R.c),t.Y36(tt.a),t.Y36(c.e),t.Y36(j.T),t.Y36(F.f),t.Y36(x.y),t.Y36(V.e),t.Y36(ut.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-pay-confirm-modal-connected-component"]],decls:1,vars:6,consts:[[3,"loading","payer","paymentAmount","paymentCurrencyCode","paymentMethod","recipient","changeSourceClick","payNowClick"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-payment-pay-confirm-modal",0),t.NdJ("changeSourceClick",function(){return o.changeSource()})("payNowClick",function(){return o.payNow()}),t.qZA()),2&n&&t.Q6J("loading",o.loading)("payer",o.payer)("paymentAmount",o.paymentAmountDisplay)("paymentCurrencyCode",o.paymentCurrency)("paymentMethod",o.paymentMethod)("recipient",o.recipient)},dependencies:[_s],encapsulation:2})}return i})();var Cs=u(1330);const Ms=["form"];let ys=(()=>{class i{constructor(e,n,o,a,s,l,d){this.alertService=e,this.eventTracker=o,this.modalControlService=a,this.payService=s,this.store=l,this.tokenAuthService=d,this.bem=(0,I.aP)("rl-payment-kyc-details"),this.destroy=new w.x,this.peerPaymentsBaseURL=n.getPeerPaymentsBaseUrl(),this.identityBaseURL=n.getIdentityBaseUrl()}ngOnInit(){this.setupFromStateSync(this.store.getState()),(0,Ut.D)({rlAPIToken:this.tokenAuthService.getAccessToken(),stripeAPIToken:this.payService.getPaymentsConfig().pipe((0,Ct.j)("stripePublishableKey"))}).subscribe({next:e=>{this.rlAccessToken=e.rlAPIToken,this.stripeAPIKey=e.stripeAPIToken}}),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(({data:e})=>{"next"===e.to&&this.modalControlService.close(c.G.UserNavigatedNext)}),this.eventTracker.kycStarted({type:"basic"})}ngAfterViewInit(){(0,K.R)(this.formComponent.nativeElement,"rlKYCGetVerifiedSubmitSuccess").pipe((0,C.R)(this.destroy)).subscribe({next:e=>{this.onSubmitSuccess(e.detail.paymentAccount,e.detail.verificationStatus),e.detail.submittedWithErrors&&console.error("There was a problem submitting to the identity service. This has no impact on KYC verification.",e.detail.submittedWithErrors?.originalError)}}),(0,K.R)(this.formComponent.nativeElement,"rlKYCGetVerifiedSubmitFail").pipe((0,C.R)(this.destroy)).subscribe({next:()=>{this.onSubmitFailed()}}),(0,K.R)(this.formComponent.nativeElement,"rlKYCGetVerifiedSubmitStart").pipe((0,C.R)(this.destroy)).subscribe({next:()=>{this.eventTracker.kycSubmitted({type:"basic"})}})}ngOnDestroy(){this.destroy.next()}assignPaymentAccountToPaymentAgreement(e){return this.payService.getPaymentAgreementByBinderID(this.binderID).pipe((0,Ct.j)("externalId"),(0,gt.b)(n=>this.payService.assignPaymentAccountToAgreement(n,this.partyID,e.externalId)))}onSubmitFailed(){this.alertService.addDangerAlert({message:{key:"payment-kyc-verify.request-failed"}})}onSubmitSuccess(e,n){this.store.dispatch((0,Ue.v)(e));const o=()=>{this.onSubmitFailed(),this.paymentAccountID=e.externalId};"verified"===n?this.assignPaymentAccountToPaymentAgreement(e).subscribe({next:()=>{this.modalControlService.navigate("next")},error:o}):"unverified"===n?(this.paymentAccountID=e.externalId,this.modalControlService.navigate("next")):this.assignPaymentAccountToPaymentAgreement(e).subscribe({next:()=>{this.modalControlService.navigate("next")},error:o})}setupFromStateSync(e){const{id:n,personId:o,email:a}=(0,m.kT)(e);this.binderID=e.binder.id,this.brandID=e.paymentAgreement.brand,this.currentPartyEmail=a,this.highPayout=!0,this.partyID=n,this.paymentAccountID=e.paymentAccount?.externalId,this.personID=o}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(R.c),t.Y36(Qt.e),t.Y36(tt.a),t.Y36(c.e),t.Y36(j.T),t.Y36(x.y),t.Y36(Cs.Y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-kyc-verify-modal"]],viewQuery:function(n,o){if(1&n&&t.Gf(Ms,5),2&n){let a;t.iGM(a=t.CRH())&&(o.formComponent=a.first)}},decls:9,vars:14,consts:[["fakePath","kyc","rl-test","kyc-details"],["rl-modal-title","","rl-typography","heading"],["rl-modal-header-widget","right"],["scroll-to-invalid-control","","validation-order","flow-reverse",3,"brandCode","forceEmail","identityBaseURL","partyID","paymentAccountID","peerPaymentsBaseURL","personID","resolveStatusTimeout","rlAccessToken","stripeAPIKey","verifyForHighPayout"],["form",""]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header")(2,"h1",1),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"rl-modal-header-close",2),t.qZA(),t.TgZ(6,"rl-modal-body"),t._UZ(7,"rl-kyc-get-verified",3,4),t.qZA()()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,12,"payment-kyc-verify.header")," "),t.xp6(4),t.s9C("brandCode",o.brandID),t.s9C("forceEmail",o.currentPartyEmail),t.s9C("identityBaseURL",o.identityBaseURL),t.s9C("partyID",o.partyID),t.s9C("paymentAccountID",o.paymentAccountID),t.s9C("peerPaymentsBaseURL",o.peerPaymentsBaseURL),t.s9C("personID",o.personID),t.s9C("resolveStatusTimeout",15e3),t.s9C("rlAccessToken",o.rlAccessToken),t.s9C("stripeAPIKey",o.stripeAPIKey),t.s9C("verifyForHighPayout",o.highPayout))},dependencies:[_t,_.zS,k,T,_.vP,A,b.tH,O.$m,h.X$],styles:["rl-kyc-get-verified[_ngcontent-%COMP%]{margin-top:32px;font-size:62.5%}"]})}return i})();var Ps=u(3497);const xs=["ckeditor"],bs=()=>({key:"document-editor_continue"}),Os=()=>({key:"document-editor_saving"});let vs=(()=>{class i{constructor(e,n,o,a,s){this.store=e,this.alertService=n,this.signService=o,this.messageService=a,this.notificationService=s,this.onDocUpdate=new t.vpe,this.onBinderUpdate=new t.vpe,this.documentEditorSettings={isVisible:!1,config:{fullPage:!0,versionCheck:!1,allowedContent:{$1:{attributes:!0,styles:!0,classes:!0}},disallowedContent:{title:d=>"head"!=d.parent?.name,script:()=>!0},height:"100%",width:"auto",toolbarGroups:[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["spellchecker","find","selection","editing"]},{name:"links",groups:["links"]},{name:"insert",groups:["insert"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"forms",groups:["forms"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi","paragraph"]},"/",{name:"styles",groups:["styles"]},{name:"colors",groups:["colors"]},{name:"tools",groups:["tools"]},{name:"others",groups:["others"]},{name:"about",groups:["about"]}],removeButtons:"Source,Save,Templates,Find,SelectAll,NewPage,ExportPdf,Preview,Print,Replace,Form,Checkbox,Radio,\n      TextField,Textarea,Select,Button,ImageButton,HiddenField,CopyFormatting,Subscript,Superscript,CreateDiv,JustifyLeft,\n      JustifyCenter,JustifyRight,JustifyBlock,BidiLtr,BidiRtl,Language,Flash,Smiley,PageBreak,Iframe,FontSize,TextColor,\n      BGColor,ShowBlocks,Maximize,About,Font",removePlugins:"wsc",stylesSet:[{name:"Italic Title",element:"h2",styles:{"font-style":"italic"}},{name:"Subtitle",element:"h3",styles:{color:"#aaa","font-style":"italic"}},{name:"Special Container",element:"div",styles:{padding:"5px 10px",background:"#eee",border:"1px solid #ccc"}},{name:"Marker",element:"span",attributes:{class:"marker"},styles:{"background-color":"yellow"}},{name:"Big",element:"big"},{name:"Small",element:"small"},{name:"Typewriter",element:"tt"},{name:"Computer Code",element:"code"},{name:"Keyboard Phrase",element:"kbd"},{name:"Sample Text",element:"samp"},{name:"Variable",element:"var"},{name:"Deleted Text",element:"del"},{name:"Inserted Text",element:"ins"},{name:"Cited Work",element:"cite"},{name:"Inline Quotation",element:"q"},{name:"Language: RTL",element:"span",attributes:{dir:"rtl"}},{name:"Language: LTR",element:"span",attributes:{dir:"ltr"}},{name:"Styled Image (left)",element:"img",attributes:{class:"left"}},{name:"Styled Image (right)",element:"img",attributes:{class:"right"}},{name:"Compact Table",element:"table",attributes:{cellpadding:"5",cellspacing:"0",border:"1",bordercolor:"#ccc"},styles:{"border-collapse":"collapse"}},{name:"Borderless Table",element:"table",styles:{"border-style":"hidden","background-color":"#E6E6FA"}},{name:"Square Bulleted List",element:"ul",styles:{"list-style-type":"square"}},{name:"Clean Image",type:"widget",widget:"image",attributes:{class:"image-clean"}},{name:"Grayscale Image",type:"widget",widget:"image",attributes:{class:"image-grayscale"}},{name:"Featured Snippet",type:"widget",widget:"codeSnippet",attributes:{class:"code-featured"}},{name:"Featured Formula",type:"widget",widget:"mathjax",attributes:{class:"math-featured"}},{name:"240p",type:"widget",widget:"embedSemantic",attributes:{class:"embed-240p"},group:"size"},{name:"360p",type:"widget",widget:"embedSemantic",attributes:{class:"embed-360p"},group:"size"},{name:"480p",type:"widget",widget:"embedSemantic",attributes:{class:"embed-480p"},group:"size"},{name:"720p",type:"widget",widget:"embedSemantic",attributes:{class:"embed-720p"},group:"size"},{name:"1080p",type:"widget",widget:"embedSemantic",attributes:{class:"embed-1080p"},group:"size"},{name:"240p ",type:"widget",widget:"embed",attributes:{class:"embed-240p"},group:"size"},{name:"360p ",type:"widget",widget:"embed",attributes:{class:"embed-360p"},group:"size"},{name:"480p ",type:"widget",widget:"embed",attributes:{class:"embed-480p"},group:"size"},{name:"720p ",type:"widget",widget:"embed",attributes:{class:"embed-720p"},group:"size"},{name:"1080p ",type:"widget",widget:"embed",attributes:{class:"embed-1080p"},group:"size"}]}},this.contentUnchanged=!0,this.requestInFlight=!1,this.subscriptions=[],this.inputsNeedRepositioningAfterDocumentEdit=!1,this.newlyAddedInputs=[];const l=this.store.subscribe(d=>{this.setComponentData(d)});this.subscriptions.push(l)}static#t=this.EXTRACT_BODY_EXPRESSION=/<body.*?>([\s\S]*)<\/body>/;ngOnInit(){this.clearHTML(),this.editorHtml=this.docHtml.repeat(1),this.setComponentData(this.store.getState())}clearHTML(){const n=this.docHtml.repeat(1).split("</html>");n.length>1&&(n[1].length>n[0].length?this.docHtml=n[0].replace(i.EXTRACT_BODY_EXPRESSION,()=>`<body>${n[1]}</body></html>`):n[1].trim().length>0&&(this.docHtml=n[0].indexOf("</html>")>0?n[0]:`${n[0]}</html>`))}ngOnDestroy(){this.subscriptions.forEach(e=>e())}onEditorReady(){this.ckeditor.config.allowedContent.$1.elements=CKEDITOR.dtd,this.setEditorSize()}setEditorSize(){const e=document.querySelector(".cke_inner"),n=document.querySelector(".button-wrapper-bottom").clientHeight||0;e.style.height=`calc(100vh - ${n}px)`}setComponentData(e){this.binder=e.binder,this.inputsNeedRepositioningAfterDocumentEdit=e.inputsNeedRepositioningAfterDocumentEdit,this.documentEditorSettings.isVisible=e.documentEditorModeEnabled}cancelEdits(){this.store.dispatch((0,H.cD)(!1))}onResize(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>this.setEditorSize(),50)}onChange(){this.contentUnchanged=!1}updateDocumentContent(){this.contentUnchanged?this.store.dispatch((0,H.cD)(!1)):(this.requestInFlight=!0,this.changedDocument=this.getFullHTMLOutput(),this.changedDocument=this.cleanDocumentFromDuplicatePlaceholders(),this.signService.updateDocument(this.binder.id,this.binder.documents[0].id,this.changedDocument,!0).subscribe(e=>{this.onSuccessfulDocumentEdit(e)},()=>{this.showErrorMsg(),this.requestInFlight=!1}))}getFullHTMLOutput(){const e=i.EXTRACT_BODY_EXPRESSION.exec(this.editorHtml);return e?this.docHtml.replace(i.EXTRACT_BODY_EXPRESSION,()=>e[0]):this.editorHtml}cleanDocumentFromDuplicatePlaceholders(){this.newlyAddedInputs=[];const e=this.store.getState(),n=(0,m.sG)(e).filter(a=>"PLACEHOLDER"==a.position.type),o=this.changedDocument;if(0!==n.length){const a=(new DOMParser).parseFromString(o,"text/html");return n.forEach(s=>{const{identifier:l}=s.position,d=Array.from(a.querySelectorAll("span")).filter(p=>p.innerHTML===l);d.length>1&&d.forEach((p,M)=>{if(0===M)return;const y=Lt(),D=this.createInputFromTemplate(s,y);this.store.dispatch((0,L.rd)(D)),this.newlyAddedInputs.push(D),p.textContent=y})}),`<html>${a.documentElement.innerHTML}</html>`}return o}showErrorMsg(){this.alertService.setAlertMessage({message:"document-editor_changes_error",type:"danger"})}createInputFromTemplate(e,n){const o={...e.position,identifier:n,xOffset:null,yOffset:null};return{...e,id:void 0,position:o}}onSuccessfulDocumentEdit(e){this.onDocUpdate.emit(e),this.saveNewDocumentInStoreAndUpdateBinder(e)}saveNewDocumentInStoreAndUpdateBinder(e){this.signService.fetchBinder(this.binder.id).subscribe(n=>{const o=this.prepareBinderBeforeUpdatingPartiesAndInputs(n,e);setTimeout(()=>{this.updateBinder(o)},200)},()=>{this.showErrorMsg(),this.requestInFlight=!1})}prepareBinderBeforeUpdatingPartiesAndInputs(e,n){let o=e.documents.find(y=>y.id==n.id);const a=[...o.inputs],s=a.filter(y=>n.pages.some(D=>D.id===y.position.pageId)).filter(y=>("ABSOLUTE"===y.position.type||"PLACEHOLDER"===y.position.type&&-1!==this.changedDocument.indexOf(y.position.identifier))&&y).concat(this.newlyAddedInputs);o={...o,inputs:s};const l=a.filter(y=>!s.some(D=>D.id===y.id)),d=e.parties.filter(y=>this.filterOwnerAndValidSigners(y,l,s)).map(y=>this.revokeSignerRoleForOwnerIfNeeded(y,l,s)),p=e.documents.map(y=>y.id!==o.id?y:o),M={...this.binder.metaData,documentUpdatedFromAdvancedEditor:!0};return{...e,metaData:M,documents:p,parties:d}}revokeSignerRoleForOwnerIfNeeded(e,n,o){return e.roles.includes("OWNER")&&e.roles.length>1&&n.some(this.isInputAssignedToParty(e))&&!o.some(this.isInputAssignedToParty(e))?{...e,roles:["OWNER"]}:e}filterOwnerAndValidSigners(e,n,o){return e.roles.includes("OWNER")||!n.some(this.isInputAssignedToParty(e))||o.some(this.isInputAssignedToParty(e))}isInputAssignedToParty(e){return n=>n.partyReference===e.reference}updateBinder(e){this.signService.updateBinder(e,!0).subscribe(()=>{this.reloadDocument()},()=>{this.showErrorMsg(),this.requestInFlight=!1})}reloadDocument(){this.messageService.sendEvent({action:"documentEdited"}),this.signService.getBinder(this.binder.id,{fetchPages:!0}).subscribe(()=>{this.alertService.setAlertMessage({message:"document-editor_changes-saved",type:"success"}),this.requestInFlight=!1,this.onBinderUpdate.emit(),$("html,body").animate({scrollTop:0},"slow")})}static#e=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(R.c),t.Y36(F.f),t.Y36(V.e),t.Y36(Ps.i))};static#n=this.\u0275cmp=t.Xpm({type:i,selectors:[["document-editor"]],viewQuery:function(n,o){if(1&n&&t.Gf(xs,5),2&n){let a;t.iGM(a=t.CRH())&&(o.ckeditor=a.first)}},hostBindings:function(n,o){1&n&&t.NdJ("resize",function(){return o.onResize()},!1,t.Jf7)},inputs:{docHtml:"docHtml"},outputs:{onDocUpdate:"onDocUpdate",onBinderUpdate:"onBinderUpdate"},decls:8,vars:10,consts:[[3,"ngModel","config","ngModelChange","ready","change"],["ckeditor",""],[1,"banner-placeholder"],[1,"document-editor","progress-banner"],[1,"button-wrapper-bottom"],[1,"inner-wrapper"],["type","button",1,"btn","btn-secondary","right-aligned",3,"comContent","click"],[3,"btnType","btnClass","defaultTranslation","loadingTranslation","isLoading","onClick"]],template:function(n,o){1&n&&(t.TgZ(0,"ckeditor",0,1),t.NdJ("ngModelChange",function(s){return o.editorHtml=s})("ready",function(){return o.onEditorReady()})("change",function(){return o.onChange()}),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"button",6),t.NdJ("click",function(){return o.cancelEdits()}),t.qZA(),t.TgZ(7,"custom-button",7),t.NdJ("onClick",function(){return o.updateDocumentContent()}),t.qZA()()()()()),2&n&&(t.Q6J("ngModel",o.editorHtml)("config",o.documentEditorSettings.config),t.xp6(6),t.Q6J("comContent","document-editor_cancel"),t.xp6(),t.Q6J("btnType","button")("btnClass","btn btn-primary right-aligned")("defaultTranslation",t.DdM(8,bs))("loadingTranslation",t.DdM(9,Os))("isLoading",o.requestInFlight))},dependencies:[mt.q,g.JJ,g.On,z.x,Xe],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.progress-banner[_ngcontent-%COMP%]{background-color:#3e3f4c}.progress-banner[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{margin:0 auto;display:flex;align-items:center;max-width:890px;box-sizing:border-box;padding:17px 14px;flex-wrap:wrap}.progress-banner[_ngcontent-%COMP%]   .content-wrapper.input-editor[_ngcontent-%COMP%]{padding:0 15px 15px}.progress-banner[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{display:none;flex:1;text-align:right;white-space:nowrap}.progress-banner[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .progress-banner[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]     custom-button .btn{margin-left:15px;font-size:16px}.progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]{border-top:1px solid #EDEDF0;box-sizing:border-box;position:fixed;width:100%;background-color:#fff;bottom:0;z-index:5;padding:15px}.progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   .inner-wrapper[_ngcontent-%COMP%]{max-width:890px;margin:0 auto;height:45px;display:flex;justify-content:flex-end}.progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%], .progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%], .progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{width:50%}@media screen and (min-width: 768px){.progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%], .progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%], .progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{max-width:195px}}.progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:8px}.progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]     custom-button .btn{font-size:16px;margin-left:0;width:100%;min-width:0}.progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   button.right-aligned[_ngcontent-%COMP%], .progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]     custom-button .btn.right-aligned{margin-right:0}.progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{margin-right:10px}.progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   .input-updates-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   .input-updates-wrapper[_ngcontent-%COMP%]     custom-button .btn-primary{width:50%}.progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   .input-updates-wrapper[_ngcontent-%COMP%]   .prev-btn[_ngcontent-%COMP%]{padding:10px;margin-right:20px}.progress-banner[_ngcontent-%COMP%]   span.padded-text[_ngcontent-%COMP%]{white-space:nowrap;top:0}.progress-banner[_ngcontent-%COMP%]   span.padded-text[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-style:normal;font-weight:600;font-size:16px;line-height:20px;display:flex;align-items:center;letter-spacing:.0125em;color:#fff;margin-bottom:8px}.progress-banner[_ngcontent-%COMP%]   span.padded-text.hidden[_ngcontent-%COMP%]{display:none}.progress-banner[_ngcontent-%COMP%]   .progress-bar-wrapper[_ngcontent-%COMP%]{flex:0 1 890px;position:relative;height:11px;box-sizing:border-box;font-size:12px;line-height:12px;background:#fff;border-radius:11px;box-shadow:0 0 1px 1px #000}.progress-banner[_ngcontent-%COMP%]   .progress-bar-wrapper[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background:#c1dfa0;background-clip:content-box;box-sizing:border-box;position:absolute;left:0;top:0;bottom:0;height:11px;border-radius:11px 0 0 11px}.progress-banner[_ngcontent-%COMP%]   .progress-bar-wrapper[_ngcontent-%COMP%]   .progress-bar.complete[_ngcontent-%COMP%]{border-top-right-radius:11px;border-bottom-right-radius:11px}@media (min-width: 481px){.progress-banner[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{padding:15px}.progress-banner[_ngcontent-%COMP%]   .content-wrapper.input-editor[_ngcontent-%COMP%]{padding:0 15px 15px}.progress-banner[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{display:block}}@media screen and (min-width: 768px){.progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   .input-updates-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   .input-updates-wrapper[_ngcontent-%COMP%]     custom-button{width:initial;min-width:190px}.progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   .input-updates-wrapper[_ngcontent-%COMP%]   .next-btn[_ngcontent-%COMP%], .progress-banner[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   .input-updates-wrapper[_ngcontent-%COMP%]   .finish-btn[_ngcontent-%COMP%]{margin-right:0}}[_nghost-%COMP%]     .cke{max-width:890px;margin:0 auto}[_nghost-%COMP%]     .cke_top{overflow:initial!important}[_nghost-%COMP%]     .cke_inner{display:flex;flex-direction:column;height:calc(100vh - 76px)}[_nghost-%COMP%]     .cke_contents{height:100%}[_nghost-%COMP%]     .cke_bottom, [_nghost-%COMP%]     .cke_resizer{display:none}.banner-placeholder[_ngcontent-%COMP%]   .document-editor[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{margin-right:15px!important;width:50%}@media screen and (min-width: 768px){.banner-placeholder[_ngcontent-%COMP%]   .document-editor[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .banner-placeholder[_ngcontent-%COMP%]   .document-editor[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]     custom-button .btn{padding:10px;width:195px}.banner-placeholder[_ngcontent-%COMP%]   .document-editor[_ngcontent-%COMP%]   .button-wrapper-bottom[_ngcontent-%COMP%]     custom-button{width:inherit}}"]})}return i})();function ws(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",14)(1,"input",15),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editOption=o)}),t.qZA(),t.TgZ(2,"label",16)(3,"div",17),t._UZ(4,"span",18),t.TgZ(5,"span",19),t._UZ(6,"com",9),t.qZA(),t.TgZ(7,"span",20),t._UZ(8,"com",9),t.qZA()(),t.TgZ(9,"div",21)(10,"span"),t._UZ(11,"com",9),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(),t.Q6J("ngModel",e.editOption)("value","interview"),t.xp6(5),t.Q6J("key","edit-modal_change-answers"),t.xp6(2),t.Q6J("key","edit-modal_easy"),t.xp6(3),t.Q6J("key","edit-modal_change-answers-desc")}}function As(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",14)(1,"input",22),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.editOption=o)}),t.qZA(),t.TgZ(2,"label",23)(3,"div",17),t._UZ(4,"span",18),t.TgZ(5,"span",19),t._UZ(6,"com",9),t.qZA(),t.TgZ(7,"span",24),t._UZ(8,"com",9),t.qZA()(),t.TgZ(9,"div",21)(10,"span"),t._UZ(11,"com",9),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(),t.Q6J("ngModel",e.editOption)("value","advancedEditor"),t.xp6(5),t.Q6J("key","edit-modal_advanced-editor"),t.xp6(2),t.Q6J("key","edit-modal_advanced"),t.xp6(3),t.Q6J("key","edit-modal_advanced-editor-desc")}}let Ts=(()=>{class i{constructor(e,n,o){this.messageService=e,this.store=n,this.modalControlService=o,this.showModal=new t.vpe,this.destroy=new w.x,this.subscriptions=[],this.editOption="",this.setupComponent(this.store.getState());const a=this.store.subscribe(s=>this.setupComponent(s));this.subscriptions.push(a)}setupComponent(e){this.binder=e.binder,this.backToInterviewIsEnabled=e.backToInterviewOptionEnabled,this.advancedEditorIsEnabled=e.advancedEditorOptionEnabled,this.editOption=this.backToInterviewIsEnabled?"interview":"advancedEditor"}ngOnDestroy(){this.subscriptions.forEach(e=>e())}continueToEdit(){"interview"===this.editOption?(this.messageService.sendEvent({action:"changeAnswers"}),this.modalControlService.close(c.G.CompletedSuccessfully)):this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:"next"})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(V.e),t.Y36(x.y),t.Y36(c.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["edit-modal"]],outputs:{showModal:"showModal"},decls:19,vars:4,consts:[["fakePath","edit","rl-test","edit-modal"],["product","sign"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"header-icon","rl-icon","settings"],["translate",""],["rl-modal-header-widget","right"],[1,"modal-dialog","modal-content"],[1,"content-container"],[1,"content-heading"],[3,"key"],[1,"options-list"],["class","option"],[1,"bottom-buttons"],[1,"btn","btn-primary","e2e_continue-button-edit-modal",3,"click"],[1,"option"],["name","edit-option","type","radio","id","changeAnswers",3,"ngModel","value","ngModelChange"],["for","changeAnswers"],[1,"option-heading"],[1,"custom-radio-edit"],[1,"heading-text"],[1,"difficulty-level"],[1,"option-content"],["name","edit-option","type","radio","id","advancedEditor",3,"ngModel","value","ngModelChange"],["for","advancedEditor"],[1,"difficulty-level","gray-text"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._UZ(3,"i",3),t.TgZ(4,"span",4),t._uU(5,"edit-modal_heading"),t.qZA()(),t._UZ(6,"rl-modal-header-close",5),t.qZA(),t.TgZ(7,"rl-modal-body")(8,"div",6)(9,"div",7)(10,"h3",8),t._UZ(11,"com",9),t.qZA(),t.TgZ(12,"div",10),t.YNc(13,ws,12,5,"div",11)(14,As,12,5,"div",11),t.qZA(),t.TgZ(15,"div",12)(16,"button",13),t.NdJ("click",function(){return o.continueToEdit()}),t._UZ(17,"com",9),t.qZA()()()()(),t._UZ(18,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(11),t.Q6J("key","edit-modal_second-heading"),t.xp6(2),t.um2(13,o.backToInterviewIsEnabled?13:-1),t.xp6(),t.um2(14,o.advancedEditorIsEnabled?14:-1),t.xp6(3),t.Q6J("key","edit-modal_continue"))},dependencies:[J.w,g.Fj,g._,g.JJ,g.On,h.Pi,_.zS,k,U,T,_.vP,A,S,b.tH,O.$m],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}[_nghost-%COMP%]     .footer-container{margin:0;padding-bottom:16px}.modal-background[_ngcontent-%COMP%]{touch-action:auto;position:fixed;inset:0;z-index:7;width:100%;height:100%;border-radius:3px;background-color:#3339;transition:opacity .2s;opacity:0;visibility:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch;overflow-x:hidden;display:flex;align-items:center;justify-content:center;flex-direction:column;opacity:1;visibility:visible}.modal-background.modal-show[_ngcontent-%COMP%], .modal-background.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.outer-wrapper[_ngcontent-%COMP%]{padding:16px;width:100%;box-sizing:border-box;margin:auto}.modal-wrapper[_ngcontent-%COMP%]{z-index:8;overflow-x:hidden;overflow-y:auto;background-color:#fff;border-radius:8px;width:100%;min-height:auto;height:auto;margin:0 auto}@media screen and (min-width: 480px){.modal-wrapper[_ngcontent-%COMP%]{max-width:448px}}@media screen and (min-width: 768px){.modal-wrapper[_ngcontent-%COMP%]{max-width:560px}}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{font-weight:600;line-height:56px;height:56px;text-align:center;padding:0 40px;font-size:18px;background-color:#f2f1f1;position:relative}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{position:absolute;left:0;font-size:21px;margin-left:16px;cursor:pointer;color:#696a78}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{padding-right:8px}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .rl-icon.settings[_ngcontent-%COMP%]{width:24px;height:24px;font-size:24px}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;padding:24px 8px;width:100%;max-width:416px;box-sizing:border-box;margin:0 auto;padding:24px 8px 0!important}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:24px 8px 40px}}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   span.rl-icon.dispute[_ngcontent-%COMP%]{top:6px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;resize:none;outline:none!important;font-size:16px;font-family:Open Sans;background-color:#f7f7f8;font-weight:400;margin-top:8px;padding:10px;border-radius:2px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border:1px solid #e62300}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .custom-text-caption[_ngcontent-%COMP%]{font-size:12px;clear:both}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;position:absolute;right:5px;bottom:5px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{width:100%;padding:0;margin-top:24px;display:flex;justify-content:space-between;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{width:100%;height:48px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse;height:48px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{flex:0 1 50%;height:100%;margin-right:8px;margin-bottom:0}}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:600;font-size:16px;line-height:20px;letter-spacing:.0125em;margin:16px 0 0}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]:first-child{margin-top:0}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .item-ref-label[_ngcontent-%COMP%]{display:block;height:33px;margin:20px 0;line-height:33px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   span.checkbox-check[_ngcontent-%COMP%]{margin-right:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:18px;position:relative}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .rl-icon.dispute[_ngcontent-%COMP%]{position:absolute;top:44px;right:12px;font-size:25px;color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;padding:15px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important;border-radius:2px;outline:0;box-sizing:border-box;background-color:#f7f7f8;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .party-form-control.disabled[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.disabled[_ngcontent-%COMP%]{pointer-events:none}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .party-form-control.invalid[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.invalid[_ngcontent-%COMP%]{box-shadow:0 2px #e62300,inset 1px 1px #e62300,inset -1px 1px #e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control.margin-top[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.margin-top[_ngcontent-%COMP%]{margin-top:6px}.modal-content[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{resize:none;height:120px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:12px;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-ref-label[_ngcontent-%COMP%]{display:block;height:33px;line-height:33px;cursor:pointer;max-width:calc(100% - 60px)}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:24px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   .doc-man-checkbox[_ngcontent-%COMP%]:before{font-size:14px;position:relative}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:14px;display:flex;flex-direction:row;align-items:center}.modal-content.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;display:block;width:100%;margin:0 auto}.modal-content.add-new[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0;color:#e62300;font-size:16px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{min-height:inherit}}.content-container[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:16px;text-align:center;margin:32px 0}.content-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.content-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #CCD1D9;box-shadow:0 -1px #0000001a,0 0 4px #1a1a261a;border-radius:4px;margin-bottom:16px}.content-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]:last-child{margin-bottom:8px}.content-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}.content-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .option-heading[_ngcontent-%COMP%]{padding:8px 8px 8px 16px}.content-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]{padding:8px 16px 16px;font-size:16px}.content-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .option-heading[_ngcontent-%COMP%]{align-items:center;border-bottom:1px solid #EDEDF0;display:flex;flex-direction:row;height:32px}.content-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .option-heading[_ngcontent-%COMP%]   .heading-text[_ngcontent-%COMP%]{margin-left:8px;font-weight:600;line-height:20px;font-size:16px}.content-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .option-heading[_ngcontent-%COMP%]   .difficulty-level[_ngcontent-%COMP%]{margin-left:auto;margin-right:0;font-weight:700;text-transform:uppercase;font-size:9px;color:#fff;padding:0 6px;background:#00a68a;border-radius:8px;letter-spacing:.0125em;line-height:13px;font-weight:400;width:35px;text-align:center}.content-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .option-heading[_ngcontent-%COMP%]   .difficulty-level.gray-text[_ngcontent-%COMP%]{background:#9da0ac}.content-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}.content-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   .custom-radio-edit[_ngcontent-%COMP%]{height:22px;width:22px;background:#fff;border:1px solid #9DA0AC;border-radius:50%}.content-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   .custom-radio-edit[_ngcontent-%COMP%]{background:#e75134;border-radius:50%;height:16px;width:16px;position:relative;border:4px solid #ffffff;box-shadow:0 0 0 1px #9da0ac}"],data:{animation:[P.Ic,P.i_,P.yh,P.Pc]}})}return i})(),ks=(()=>{class i{constructor(e,n,o){this.store=e,this.router=n,this.modalControlService=o}continueToEdit(){this.store.dispatch((0,H.cD)(!0)),this.close()}backToEditModal(){this.modalControlService.close(c.G.UserNavigatedBack,{nextModal:"back"})}close(){this.modalControlService.close(c.G.CompletedSuccessfully)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(Nt.gz),t.Y36(c.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["edit-warning-modal"]],decls:19,vars:4,consts:[["fakePath","editWarning","rl-test","edit-warning-modal"],["product","sign"],["rl-modal-title","","rl-typography","heading"],["translate",""],["rl-modal-header-widget","right"],[1,"modal-dialog","modal-content"],[1,"content-container"],[1,"content-heading","left-aligned"],[3,"key"],[1,"left-aligned"],[1,"bottom-buttons"],[1,"btn","btn-primary","e2e_yes-edit-doc-button",3,"click"],[1,"btn","btn-secondary",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2)(3,"span",3),t._uU(4,"edit-warning-modal_heading"),t.qZA()(),t._UZ(5,"rl-modal-header-close",4),t.qZA(),t.TgZ(6,"rl-modal-body")(7,"div",5)(8,"div",6)(9,"h3",7),t._UZ(10,"com",8),t.qZA(),t.TgZ(11,"p",9),t._UZ(12,"com",8),t.qZA(),t.TgZ(13,"div",10)(14,"button",11),t.NdJ("click",function(){return o.continueToEdit()}),t._UZ(15,"com",8),t.qZA(),t.TgZ(16,"button",12),t.NdJ("click",function(){return o.backToEditModal()}),t._UZ(17,"com",8),t.qZA()()()()(),t._UZ(18,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(10),t.Q6J("key","edit-warning-modal_second-heading"),t.xp6(2),t.Q6J("key","edit-warning-modal_main_paragraph"),t.xp6(3),t.Q6J("key","edit-warning-modal_continue"),t.xp6(2),t.Q6J("key","edit-warning-modal_back"))},dependencies:[J.w,h.Pi,_.zS,k,U,T,_.vP,A,S,b.tH,O.$m],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}[_nghost-%COMP%]     .footer-container{margin:0;padding-bottom:16px}.modal-background[_ngcontent-%COMP%]{touch-action:auto;position:fixed;inset:0;z-index:7;width:100%;height:100%;border-radius:3px;background-color:#3339;transition:opacity .2s;opacity:0;visibility:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch;overflow-x:hidden;display:flex;align-items:center;justify-content:center;flex-direction:column;opacity:1;visibility:visible}.modal-background.modal-show[_ngcontent-%COMP%], .modal-background.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.outer-wrapper[_ngcontent-%COMP%]{padding:16px;width:100%;box-sizing:border-box;margin:auto}.modal-wrapper[_ngcontent-%COMP%]{z-index:8;overflow-x:hidden;overflow-y:auto;background-color:#fff;border-radius:8px;width:100%;min-height:auto;height:auto;margin:0 auto}@media screen and (min-width: 480px){.modal-wrapper[_ngcontent-%COMP%]{max-width:448px}}@media screen and (min-width: 768px){.modal-wrapper[_ngcontent-%COMP%]{max-width:560px}}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{font-weight:600;line-height:56px;height:56px;text-align:center;padding:0 40px;font-size:18px;background-color:#f2f1f1;position:relative}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{position:absolute;left:0;font-size:21px;margin-left:16px;cursor:pointer;color:#696a78}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{padding-right:8px}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .rl-icon.settings[_ngcontent-%COMP%]{width:24px;height:24px;font-size:24px}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;padding:24px 8px;width:100%;max-width:416px;box-sizing:border-box;margin:0 auto;padding:24px 8px 0!important}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:24px 8px 40px}}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   span.rl-icon.dispute[_ngcontent-%COMP%]{top:6px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;resize:none;outline:none!important;font-size:16px;font-family:Open Sans;background-color:#f7f7f8;font-weight:400;margin-top:8px;padding:10px;border-radius:2px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border:1px solid #e62300}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .custom-text-caption[_ngcontent-%COMP%]{font-size:12px;clear:both}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;position:absolute;right:5px;bottom:5px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{width:100%;padding:0;margin-top:24px;display:flex;justify-content:space-between;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{width:100%;height:48px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse;height:48px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{flex:0 1 50%;height:100%;margin-right:8px;margin-bottom:0}}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:600;font-size:16px;line-height:20px;letter-spacing:.0125em;margin:16px 0 0}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]:first-child{margin-top:0}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .item-ref-label[_ngcontent-%COMP%]{display:block;height:33px;margin:20px 0;line-height:33px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   span.checkbox-check[_ngcontent-%COMP%]{margin-right:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:18px;position:relative}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .rl-icon.dispute[_ngcontent-%COMP%]{position:absolute;top:44px;right:12px;font-size:25px;color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;padding:15px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important;border-radius:2px;outline:0;box-sizing:border-box;background-color:#f7f7f8;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .party-form-control.disabled[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.disabled[_ngcontent-%COMP%]{pointer-events:none}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .party-form-control.invalid[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.invalid[_ngcontent-%COMP%]{box-shadow:0 2px #e62300,inset 1px 1px #e62300,inset -1px 1px #e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control.margin-top[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.margin-top[_ngcontent-%COMP%]{margin-top:6px}.modal-content[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{resize:none;height:120px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:12px;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-ref-label[_ngcontent-%COMP%]{display:block;height:33px;line-height:33px;cursor:pointer;max-width:calc(100% - 60px)}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:24px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   .doc-man-checkbox[_ngcontent-%COMP%]:before{font-size:14px;position:relative}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:14px;display:flex;flex-direction:row;align-items:center}.modal-content.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;display:block;width:100%;margin:0 auto}.modal-content.add-new[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0;color:#e62300;font-size:16px}.content-container[_ngcontent-%COMP%]   .left-aligned[_ngcontent-%COMP%]{text-align:left}.content-container[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-size:16px;font-weight:600;line-height:16px;margin-bottom:24px}.content-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.content-container[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{padding:10px 12px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{min-height:inherit}.content-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:40px}}"],data:{animation:[P.Ic,P.i_,P.yh,P.Pc]}})}return i})(),Ss=(()=>{class i extends He{constructor(e,n){super(e,n)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e),t.Y36(h.sK))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["repositioning-demo-modal"]],features:[t.qOj],decls:25,vars:5,consts:[["rl-test","repositioning-demo-modal"],["product","sign"],["rl-modal-title","","rl-typography","heading","translate",""],["rl-modal-header-widget","right"],[1,"modal-wrapper",3,"click"],[1,"modal-content-wrapper"],[1,"modal-content","repositioning-modal-content"],[1,"instruction-image-small"],["src","images/howitworks/how-it-works-repositioning-small.png",1,"demo-image"],[1,"instruction-image-medium"],["src","images/howitworks/how-it-works-repositioning-medium.png",1,"demo-image"],[1,"instruction-image-large"],["src","images/howitworks/how-it-works-repositioning-large.png",1,"demo-image"],[1,"instruction-text-small"],[1,"with-bottom-margin",3,"key"],[1,"normal-font-weight",3,"key"],[1,"instruction-text-medium-large"],[1,"btn-group","bottom-buttons"],[1,"btn","btn-primary",3,"click"],[3,"key"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._uU(3,"repositioning-demo-modal_header"),t.qZA(),t._UZ(4,"rl-modal-header-close",3),t.qZA(),t.TgZ(5,"rl-modal-body")(6,"div",4),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7),t._UZ(10,"img",8),t.qZA(),t.TgZ(11,"div",9),t._UZ(12,"img",10),t.qZA(),t.TgZ(13,"div",11),t._UZ(14,"img",12),t.qZA(),t.TgZ(15,"p",13),t._UZ(16,"com",14)(17,"com",15),t.qZA(),t.TgZ(18,"p",16),t._UZ(19,"com",14)(20,"com",15),t.qZA(),t.TgZ(21,"div",17)(22,"button",18),t.NdJ("click",function(){return o.close()}),t._UZ(23,"com",19),t.qZA()()()()()(),t._UZ(24,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(16),t.Q6J("key","repositioning-demo-modal_instruction-heading-small-screens"),t.xp6(),t.Q6J("key","repositioning-demo-modal_instruction-content"),t.xp6(2),t.Q6J("key","repositioning-demo-modal_instruction-heading-large-screens"),t.xp6(),t.Q6J("key","repositioning-demo-modal_instruction-content"),t.xp6(3),t.Q6J("key","repositioning-demo-modal_close-btn"))},dependencies:[J.w,h.Pi,_.zS,k,U,T,_.vP,A,S,b.tH,O.$m],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}[_nghost-%COMP%]     rl-modal-header{margin:0}[_nghost-%COMP%]     .rl-modal{padding:0}[_nghost-%COMP%]     .footer-container{margin:0 auto;padding-bottom:16px}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]:nth-child(2){display:none}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]:nth-child(3){display:none}.modal-content[_ngcontent-%COMP%]   .instruction-text-mobile[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .instruction-text-desktop[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:24px;text-align:center;font-size:16px;display:block;font-weight:600}.modal-content[_ngcontent-%COMP%]   .instruction-image[_ngcontent-%COMP%]{max-width:240px;max-height:100%;display:block;margin:auto auto 12px}.modal-content[_ngcontent-%COMP%]   .instruction-text-desktop[_ngcontent-%COMP%]{font-size:16px;font-weight:400;display:none}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{padding-top:16px;padding-bottom:16px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:block;margin:0 auto;max-width:240px;width:100%}@media (pointer: coarse) and (min-width: 769px){.modal-content[_ngcontent-%COMP%]   .instruction-text-mobile[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:15px}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]:nth-child(1){display:none}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]:nth-child(2){display:block}.modal-content[_ngcontent-%COMP%]   .instruction-image[_ngcontent-%COMP%]{margin:auto auto 40px}}@media (pointer: fine){.modal-content[_ngcontent-%COMP%]   .instruction-text-desktop[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:15px}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]:nth-child(1){display:none}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]:nth-child(2){display:none}.modal-content[_ngcontent-%COMP%]   .banner-image[_ngcontent-%COMP%]:nth-child(3){display:block}.modal-content[_ngcontent-%COMP%]   .instruction-text-desktop[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .instruction-text-mobile[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .instruction-image[_ngcontent-%COMP%]{margin:auto auto 40px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{border-top:1px solid #EDEDF0}}.repositioning-modal-content[_ngcontent-%COMP%]   .instruction-image-small[_ngcontent-%COMP%], .repositioning-modal-content[_ngcontent-%COMP%]   .instruction-image-medium[_ngcontent-%COMP%], .repositioning-modal-content[_ngcontent-%COMP%]   .instruction-image-large[_ngcontent-%COMP%]{width:100%;display:none}.repositioning-modal-content[_ngcontent-%COMP%]   .demo-image[_ngcontent-%COMP%]{width:100%}.repositioning-modal-content[_ngcontent-%COMP%]   .instruction-image-small[_ngcontent-%COMP%]   .demo-image[_ngcontent-%COMP%]{max-height:280px}.repositioning-modal-content[_ngcontent-%COMP%]   .instruction-image-medium[_ngcontent-%COMP%]   .demo-image[_ngcontent-%COMP%], .repositioning-modal-content[_ngcontent-%COMP%]   .instruction-image-large[_ngcontent-%COMP%]   .demo-image[_ngcontent-%COMP%]{max-height:295px}.repositioning-modal-content[_ngcontent-%COMP%]   .instruction-text-small[_ngcontent-%COMP%], .repositioning-modal-content[_ngcontent-%COMP%]   .instruction-text-medium-large[_ngcontent-%COMP%]{max-width:350px;margin:24px auto 32px;display:none;font-size:16px;font-weight:600}.repositioning-modal-content[_ngcontent-%COMP%]   .instruction-text-small[_ngcontent-%COMP%]   .normal-font-weight[_ngcontent-%COMP%], .repositioning-modal-content[_ngcontent-%COMP%]   .instruction-text-medium-large[_ngcontent-%COMP%]   .normal-font-weight[_ngcontent-%COMP%]{font-weight:400}.repositioning-modal-content[_ngcontent-%COMP%]   .instruction-text-small[_ngcontent-%COMP%]{max-width:260px;margin:24px auto 32px;text-align:center}.repositioning-modal-content[_ngcontent-%COMP%]   .instruction-text-medium-large[_ngcontent-%COMP%]{text-align:center}.repositioning-modal-content[_ngcontent-%COMP%]   .with-bottom-margin[_ngcontent-%COMP%]{display:block;margin-bottom:16px}.repositioning-modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{margin:0 auto;border-top:none;padding:0 0 24px}.repositioning-modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:272px}@media screen and (min-width: 480px){.repositioning-modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{padding:0 0 40px;width:196px}.repositioning-modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:196px}}@media screen and (max-width: 480px){.repositioning-modal-content[_ngcontent-%COMP%]   .instruction-text-small[_ngcontent-%COMP%], .repositioning-modal-content[_ngcontent-%COMP%]   .instruction-image-small[_ngcontent-%COMP%]{display:block}}@media screen and (min-width: 481px) and (max-width: 768px){.repositioning-modal-content[_ngcontent-%COMP%]   .instruction-text-medium-large[_ngcontent-%COMP%], .repositioning-modal-content[_ngcontent-%COMP%]   .instruction-image-medium[_ngcontent-%COMP%]{display:block}}@media screen and (min-width: 769px){.repositioning-modal-content[_ngcontent-%COMP%]   .instruction-image-large[_ngcontent-%COMP%], .repositioning-modal-content[_ngcontent-%COMP%]   .instruction-text-medium-large[_ngcontent-%COMP%]{display:block}}"],data:{animation:[P.i_,P.Ic]}})}return i})();var Le=u(4114),Yt=u(5678);let Is=(()=>{class i{validate(e){return function Es(i,r){return e=>{const n=e.root;let a=(n.value[r]||"").toLowerCase();return Object.keys(n.controls).filter(p=>p.startsWith(i)).map(p=>n.controls[p].value).filter(p=>p&&0!==p.length).map(p=>p.toLowerCase()).filter(p=>p==a).length>1?{unique:!0}:null}}(this.controlNamePrefix,this.unique)(e)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275dir=t.lG2({type:i,selectors:[["","uniqueValidator",""]],inputs:{unique:"unique",controlNamePrefix:"controlNamePrefix"},features:[t._Bn([{provide:g.Cf,useExisting:i,multi:!0}])]})}return i})();const Ds=["tooltip"];let Ns=(()=>{class i{constructor(){this.show=!1,this.close=new t.vpe}ngOnChanges(e){e&&e.show&&e.show.currentValue&&this.adjustTooltipPosition()}adjustTooltipPosition(){if(this.tooltip&&this.tooltip.nativeElement){let e=this.tooltip.nativeElement.getBoundingClientRect(),n=document.documentElement.clientWidth;return e.left<0&&(this.tooltip.nativeElement.style.left=`${Math.abs(e.left)}px`),void(e.right>n&&(this.tooltip.nativeElement.style.left=n-(e.right+20)+"px"))}setTimeout(()=>this.adjustTooltipPosition(),50)}closeTooltip(){this.close.emit(null)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["tooltip"]],viewQuery:function(n,o){if(1&n&&t.Gf(Ds,5,t.SBq),2&n){let a;t.iGM(a=t.CRH())&&(o.tooltip=a.first)}},inputs:{show:"show",content:"content"},outputs:{close:"close"},features:[t.TTD],decls:4,vars:3,consts:[[1,"tooltip-arrow",3,"click"],[1,"tooltip-info",3,"rl-clickOutside"],["tooltip",""],[1,"tooltip-content",3,"innerHtml"]],template:function(n,o){1&n&&(t.TgZ(0,"span",0),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(1,"span",1,2),t.NdJ("rl-clickOutside",function(){return o.closeTooltip()}),t._UZ(3,"p",3),t.qZA()()),2&n&&(t.ekj("show",o.show),t.xp6(3),t.Q6J("innerHtml",o.content,t.oJD))},dependencies:[Xt._],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.tooltip-info[_ngcontent-%COMP%]{cursor:default;background:#3e3f4c;border-radius:8px;color:#fff;position:absolute;top:10px;padding:16px;width:284px;z-index:1;text-align:left;transform:translate(-50%);box-sizing:border-box}@media screen and (min-width: 768px){.tooltip-info[_ngcontent-%COMP%]{width:400px}}.tooltip-arrow[_ngcontent-%COMP%]{width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:10px solid #3E3F4C;position:absolute;top:20px;left:50%;transform:translate(-50%);z-index:1;opacity:0;visibility:hidden;transition:all .2s ease-in}.tooltip-arrow.show[_ngcontent-%COMP%]{visibility:visible;opacity:1}.tooltip-content[_ngcontent-%COMP%]{margin:0}"]})}return i})();const Rs=["form"];function Fs(i,r){1&i&&t._UZ(0,"rl-modal-header-back",2)}function Us(i,r){1&i&&t._UZ(0,"img",17)}function qs(i,r){1&i&&t._UZ(0,"span",18)}function Js(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"p",19),t._UZ(1,"com",20),t.qZA(),t.TgZ(2,"p",21),t._UZ(3,"com",20),t.TgZ(4,"span",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showTooltip=!o.showTooltip)}),t._UZ(5,"com",20),t.TgZ(6,"tooltip",23),t.NdJ("close",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showTooltip=!1)}),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(),t.Q6J("key","add-signer-data-modal_subheading"),t.xp6(2),t.Q6J("key","add-signer-data-modal_description"),t.xp6(2),t.Q6J("key","add-signer-data-modal_more-info"),t.xp6(),t.Q6J("show",e.showTooltip)("content",e.tooltipContent)}}function zs(i,r){1&i&&(t.TgZ(0,"p",19),t._UZ(1,"com",20),t.qZA(),t.TgZ(2,"p",21),t._UZ(3,"com",20),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","add-signer-data-modal_subheading-builder-mode"),t.xp6(2),t.Q6J("key","add-signer-data-modal_description-builder-mode"))}function Hs(i,r){1&i&&(t.TgZ(0,"p",24),t._UZ(1,"com",20),t.qZA(),t.TgZ(2,"p",25),t._UZ(3,"com",20),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","add-signer-data-modal_subheading-add-signer"),t.xp6(2),t.Q6J("key","add-signer-data-modal_description-add-signer"))}const Bs=i=>({color:i}),Ls=i=>({index:i}),Gs=i=>({"border-color":i});function Vs(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",26)(1,"span",27),t._UZ(2,"com",28),t.qZA(),t.TgZ(3,"input",29),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.toggleOwner(a))}),t.qZA(),t.TgZ(4,"label",30),t._UZ(5,"span",31)(6,"com",20),t.qZA()(),t.TgZ(7,"div",32)(8,"div",33)(9,"label",34),t._UZ(10,"com",20),t.qZA(),t.TgZ(11,"input",35),t.NdJ("ngModelChange",function(o){const s=t.CHM(e).$implicit;return t.KtG(s.legalName=o)}),t.qZA(),t._UZ(12,"span",36),t.qZA(),t.TgZ(13,"div",33)(14,"label",34),t._UZ(15,"com",20),t.qZA(),t.TgZ(16,"input",37),t.NdJ("keyup",function(o){const s=t.CHM(e).$implicit,l=t.oxw(),d=t.MAs(11);return t.KtG(l.onEmailChange(o,s,d))})("ngModelChange",function(o){const s=t.CHM(e).$implicit;return t.KtG(s.email=o)}),t.qZA(),t._UZ(17,"span",36),t.qZA()()}if(2&i){const e=r.$implicit,n=r.$index,o=t.oxw();t.xp6(),t.Q6J("ngStyle",t.VKq(26,Bs,null==e.metaData||null==e.metaData.style?null:e.metaData.style.background)),t.xp6(),t.Q6J("key","add-signer-data-modal_signer")("params",t.VKq(28,Ls,n+1)),t.xp6(),t.MGl("id","this_is_me_",n,""),t.Q6J("checked",o.owner.email==(null==e?null:e.email)),t.uIk("readonly",o.owner.email==(null==e?null:e.email)),t.xp6(),t.ekj("hidden",o.shouldHideOption(e)),t.MGl("for","this_is_me_",n,""),t.xp6(2),t.Q6J("key","add-signer-data-modal_this-is-me"),t.xp6(),t.Q6J("ngStyle",t.VKq(30,Gs,null==e.metaData||null==e.metaData.style?null:e.metaData.style.background)),t.xp6(2),t.MGl("for","name-",n,""),t.xp6(),t.Q6J("key","add-signer-data-modal_name"),t.xp6(),t.ekj("disabled",e.roles.includes("OWNER")),t.MGl("id","name-",n,"")("name","name-",n,""),t.Q6J("ngModel",e.legalName),t.xp6(3),t.MGl("for","email-",n,""),t.xp6(),t.Q6J("key","add-signer-data-modal_email-address"),t.xp6(),t.ekj("disabled",e.roles.includes("OWNER")),t.MGl("unique","email-",n,"")("id","email-",n,"")("name","email-",n,""),t.Q6J("ngModel",e.email)}}function Qs(i,r){1&i&&(t.TgZ(0,"div",38)(1,"span"),t._UZ(2,"com",39),t.qZA()())}function Ys(i,r){1&i&&(t.TgZ(0,"div",40)(1,"span"),t._UZ(2,"com",41),t.qZA()())}const Ws=()=>({updateOn:"submit"}),$s=()=>({key:"add-signer-data-modal_save"}),Ks=()=>({key:"add-signer-data-modal_saving"});let Xs=(()=>{class i{constructor(e,n,o,a,s,l){this.store=e,this.signService=n,this.alertService=o,this.modalControlService=a,this.sanitizer=s,this.translate=l,this.tooltipContentKey="add-signer-data-modal_tooltip-content-info",this.showTooltip=!1,this.signatureBuilderModeEnabled=!1,this.modalOpen=!0,this.brandingLevel=3,this.subscriptions=[],this.alive=!0,this.actionInProgress=!1,this.showModalWithDelay=new t.vpe,this.proceedWithNextActionsOnSave=!1,this.proceedWithEditInputOnSave=!1,this.featureOwnerSignsFirstActivated=!1,this.forceUserToAddData=!1,this.setupComponent(this.store.getState());const d=this.store.subscribe(p=>{this.setupComponent(p)});this.subscriptions.push(d),this.bem=(0,I.aP)("rl-add-signer-data-modal"),this.translate.get(this.tooltipContentKey).subscribe(p=>{const M=this.sanitizer.sanitize(t.q3G.HTML,p);this.tooltipContent=M})}setupComponent(e){this.binder=e.binder,this.brandingLevel=e.globalBrandConfig?.brandingLevel||3,this.brandConfig=e.brandConfig,this.partiesWithSignatureInputs=i.cloneParties(e),this.partiesWithSignatureInputs=(0,ve.Or)(this.binder,this.partiesWithSignatureInputs),this.owner=(0,m.oJ)(this.binder,"OWNER"),this.signatureBuilderModeEnabled=e.signatureBuilderModeEnabled,this.ownerHasNewlyCreatedInputs=(0,m.sG)(e).filter(o=>!o.status).some(o=>o.partyReference===this.owner.reference),this.activeInput=(0,m.uM)(e);const n=(0,m.kT)(e).reference;this.featureOwnerSignsFirstActivated=("IN_PREPARATION"===this.binder.status||"REVIEW_AND_SHARE"===this.binder.status)&&0!==(0,m.sG)(e).length&&(0,m.kT)(e).roles.includes("OWNER")&&(0,m.kT)(e).roles.includes("SIGNER")&&(0,m.L2)(e,n)&&(0,m.Kt)(n,e),this.loadUnsavedFormChanges()}static cloneParties(e){const{binder:n}=e;return n.parties.filter(o=>(0,m.Kt)(o.reference,e)).map(o=>({...o}))}ngOnInit(){this.brandConfig=this.store.getState().brandConfig,this.modalControlService.close$.pipe(function Zs(i,r=!1){return(0,Le.e)((e,n)=>{let o=0;e.subscribe((0,Yt.x)(n,a=>{const s=i(a,o++);(s||r)&&n.next(a),!s&&n.complete()}))})}(()=>this.alive)).subscribe(e=>this.onClose(e))}onClose(e){this.modalOpen&&(this.modalOpen=!1,this.saveFormChanges()),e.data.reason===c.G.UserTerminated&&(this.disableBuilderMode(),this.deactivateInput())}saveFormChanges(){this.propagateFormValuesToModel();const e=this.partiesWithSignatureInputs.map(i.mapParty);this.store.dispatch((0,L.h_)({form:e}))}propagateFormValuesToModel(){this.form.onSubmit(void 0)}static mapParty(e){return{id:e.id,legalName:e.legalName,email:e.email}}disableBuilderMode(){this.forceUserToAddData&&this.store.dispatch((0,H.KI)(!1))}deactivateInput(){this.activeInput&&this.store.dispatch(L.jq({id:this.activeInput.id}))}loadUnsavedFormChanges(){const e=(0,m.xR)(this.store.getState());e&&i.applyFormChanges(this.partiesWithSignatureInputs,e)}static applyFormChanges(e,n){e.forEach(o=>{const a=n.find(s=>s.id===o.id);a&&(o.email=a.email,o.legalName=a.legalName)})}ngOnDestroy(){this.subscriptions.forEach(e=>e()),this.alive=!1}onSubmit(e){this.modalOpen&&this.saveChanges(e)}saveChanges(e){const n=Object.keys(e.controls).map(l=>e.controls[l]);n.forEach(l=>l.updateValueAndValidity());const o=this.store.getState().get("binder");if(!e.valid)return void n.forEach(l=>l.markAsTouched());this.actionInProgress=!0;const a={...o,parties:[...this.partiesWithSignatureInputs]},s=this.partiesWithSignatureInputs.find(l=>(0,m.jn)(l,"OWNER"));if(s){(0,m.jn)(s,"SIGNER")||s.roles.push("SIGNER");const d=this.partiesWithSignatureInputs.some(M=>(0,m.jn)(M,"PAYER")),p=this.partiesWithSignatureInputs.some(M=>(0,m.jn)(M,"PAYEE"));!d&&p&&((0,m.jn)(s,"PAYEE")||s.roles.push("PAYER")),d&&!p&&((0,m.jn)(s,"PAYER")||s.roles.push("PAYEE"))}else a.parties.push((0,m.oJ)(this.binder,"OWNER"));return this.signService.updateBinder(a).subscribe(()=>{this.onUpdateSuccess()},()=>{this.alertService.setAlertMessage({message:"add-signer-data-modal_changes_error",type:"danger"}),this.actionInProgress=!1}),!1}formHasEmptyOrNotUniqueField(e){return Object.keys(e.controls).map(o=>e.controls[o]).some(o=>o.errors&&(o.errors.required||o.errors.unique))}formHasInvalidEmail(e){return Object.keys(e.controls).map(o=>e.controls[o]).some(o=>o.errors&&o.errors.email&&!o.errors.required)}static partyDataValid(e,n){return 0!==e[n].length}onUpdateSuccess(){const e=this.activeInput?this.activeInput.id:null;this.signService.getBinder(this.binder.id,{fetchPages:!1}).subscribe(n=>{if(this.store.dispatch((0,L.yf)(n)),this.alertService.setAlertMessage({message:"add-signer-data-modal_changes_saved",type:"success"}),this.actionInProgress=!1,this.modalControlService.close(c.G.CompletedSuccessfully),this.proceedWithNextActionsOnSave&&(this.store.dispatch((0,H.KI)(!1)),this.checkNextSteps()),this.proceedWithEditInputOnSave){const o=(0,m.$z)(this.store.getState(),e);this.store.dispatch(L.yM({...o,active:!0})),this.showModalWithDelay.emit("editInputModal")}})}toggleOwner(e){const n=e.roles.includes("OWNER"),o=this.owner.reference===this.originalOwnerPartyReference,a=this.binder.parties.find(s=>s.reference===this.originalOwnerPartyReference);n?this.swapPartyRefs([e,a]):(!n&&o||this.swapPartyRefs([this.owner,a]),this.swapPartyRefs([this.owner,e]))}shouldHideOption(e){return!(!this.partiesWithSignatureInputs.find(a=>a.email===this.owner.email)||e?.email===this.owner.email)}swapPartyRefs(e){this.store.dispatch((0,nt.mg)(e))}trackByPartyReference(e,n){return n.reference}onEmailChange(e,n,o){e.target.value.toLowerCase()===this.owner.email.toLowerCase()&&(n.email="",o.form.markAsPristine(),this.toggleOwner(n))}checkNextSteps(){if(this.featureOwnerSignsFirstActivated)return void this.showModalWithDelay.emit("actionModal");const e=(0,m.oJ)(this.binder,"OWNER");this.binder.parties.some(o=>o.reference!==e.reference&&(0,m.Kt)(o.reference,this.store.getState()))?this.showModalWithDelay.emit("inviteCollaboratorsModal"):this.showModalWithDelay.emit("actionModal")}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(F.f),t.Y36(R.c),t.Y36(c.e),t.Y36(me.H7),t.Y36(h.sK))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["add-signer-data-modal"]],viewQuery:function(n,o){if(1&n&&t.Gf(Rs,5),2&n){let a;t.iGM(a=t.CRH())&&(o.form=a.first)}},inputs:{originalOwnerPartyReference:"originalOwnerPartyReference",introToUse:"introToUse",proceedWithNextActionsOnSave:"proceedWithNextActionsOnSave",proceedWithEditInputOnSave:"proceedWithEditInputOnSave",forceUserToAddData:"forceUserToAddData"},outputs:{showModalWithDelay:"showModalWithDelay"},decls:25,vars:17,consts:[["fakePath","addSignerData","rl-test","missing-signer-info"],["product","sign"],["rl-modal-header-widget","left"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"header-icon","rl-icon","addsigner"],["translate",""],["rl-modal-header-widget","right"],[1,"modal-content"],[3,"ngFormOptions","ngSubmit"],["form","ngForm"],[1,"content-container"],["class","sign-icon modal-default-icon-color","src","images/rocketsign-logo.svg"],["class","default-icon sign-icon rl-icon swivel-icon modal-default-icon-color"],["rl-test","error-empty-or-duplicate","class","error"],["rl-test","error-invalid-email","class","error"],[1,"bottom-buttons"],["rl-test","signer-data-cta",3,"btnType","btnClass","defaultTranslation","loadingTranslation","isLoading"],["src","images/rocketsign-logo.svg",1,"sign-icon","modal-default-icon-color"],[1,"default-icon","sign-icon","rl-icon","swivel-icon","modal-default-icon-color"],[1,"subheading"],[3,"key"],[1,"description"],[1,"tooltip-text",3,"click"],[3,"show","content","close"],[1,"subheading","add-signer-subheading"],[1,"description","add-signer-description"],[1,"form-group","this-is-me-wrapper"],[1,"role-label",3,"ngStyle"],[3,"key","params"],["type","checkbox","name","this-is-me",3,"id","checked","click"],["rl-test","this-is-me-checkbox",1,"this-is-me",3,"for"],[1,"rl-icon","checkbox-check","doc-man-checkbox"],[1,"party-details",3,"ngStyle"],[1,"form-group"],[3,"for"],["required","","rl-test","name-field","type","text",1,"party-form-control",3,"id","name","ngModel","ngModelChange"],[1,"rl-icon","dispute"],["uniqueValidator","","controlNamePrefix","email","required","","rl-test","email-field","type","email","emailValidator","",1,"party-form-control",3,"unique","id","name","ngModel","keyup","ngModelChange"],["rl-test","error-empty-or-duplicate",1,"error"],["key","add-signer-data-modal_error-empty-or-unique"],["rl-test","error-invalid-email",1,"error"],["key","add-signer-data-modal_error-email-format"]],template:function(n,o){if(1&n){const a=t.EpF();t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1),t.YNc(2,Fs,1,0,"rl-modal-header-back",2),t.TgZ(3,"h1",3),t._UZ(4,"i",4),t.TgZ(5,"span",5),t._uU(6,"add-signer-data-modal_heading"),t.qZA()(),t._UZ(7,"rl-modal-header-close",6),t.qZA(),t.TgZ(8,"rl-modal-body")(9,"div",7)(10,"form",8,9),t.NdJ("ngSubmit",function(){t.CHM(a);const l=t.MAs(11);return t.KtG(o.onSubmit(l))}),t.TgZ(12,"div",10),t.YNc(13,Us,1,0,"img",11)(14,qs,1,0,"span",12)(15,Js,7,5)(16,zs,4,2)(17,Hs,4,2),t.SjG(18,Vs,18,32,null,null,o.trackByPartyReference),t.YNc(20,Qs,3,0,"div",13)(21,Ys,3,0,"div",14),t.qZA(),t.TgZ(22,"div",15),t._UZ(23,"custom-button",16),t.qZA()()()(),t._UZ(24,"rl-modal-footer"),t.qZA()}if(2&n){const a=t.MAs(11);t.xp6(2),t.um2(2,o.signatureBuilderModeEnabled&&!o.forceUserToAddData?2:-1),t.xp6(8),t.Q6J("ngFormOptions",t.DdM(14,Ws)),t.xp6(3),t.um2(13,1==o.brandingLevel?13:-1),t.xp6(),t.um2(14,1!=o.brandingLevel?14:-1),t.xp6(),t.um2(15,"standard"==o.introToUse?15:-1),t.xp6(),t.um2(16,"signatureBuilder"==o.introToUse?16:-1),t.xp6(),t.um2(17,"addAnotherSigner"==o.introToUse?17:-1),t.xp6(),t.wJu(o.partiesWithSignatureInputs),t.xp6(2),t.um2(20,a.invalid&&a.touched&&o.formHasEmptyOrNotUniqueField(a)?20:-1),t.xp6(),t.um2(21,a.invalid&&a.touched&&o.formHasInvalidEmail(a)?21:-1),t.xp6(2),t.Q6J("btnType","submit")("btnClass","btn btn-primary")("defaultTranslation",t.DdM(15,$s))("loadingTranslation",t.DdM(16,Ks))("isLoading",o.actionInProgress)}},dependencies:[v.PC,J.w,g._Y,g.Fj,g.JJ,g.JL,g.Q7,g.On,g.F,h.Pi,_.zS,k,U,T,W,_.vP,A,S,z.x,b.tH,O.$m,Ta,Is,Ns],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}input[type=checkbox][_ngcontent-%COMP%]{display:none}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   .checkbox-check[_ngcontent-%COMP%]{width:22px;height:22px;font-size:14px;float:left;color:transparent;display:flex;align-items:center;justify-content:center;border:1px solid #cccccc}input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   .checkbox-check[_ngcontent-%COMP%]{color:#fff;background-color:#d68021}input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   .checkbox-check.doc-man-checkbox[_ngcontent-%COMP%]{background-color:var(--rl-action-primary-default, #d68021)}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   .checkbox-check.show-error[_ngcontent-%COMP%]{border-color:#e62300}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;width:100%;max-width:416px;box-sizing:border-box;margin:0 auto;padding:32px 0 0}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:24px 8px 40px}}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   span.rl-icon.dispute[_ngcontent-%COMP%]{top:6px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;resize:none;outline:none!important;font-size:16px;font-family:Open Sans;background-color:#f7f7f8;font-weight:400;margin-top:8px;padding:10px;border-radius:2px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border:1px solid #e62300}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .custom-text-caption[_ngcontent-%COMP%]{font-size:12px;clear:both}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;position:absolute;right:5px;bottom:5px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{width:100%;padding:0;margin-top:24px;display:flex;justify-content:space-between;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{width:100%;height:48px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse;height:48px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{flex:0 1 50%;height:100%;margin-right:8px;margin-bottom:0}}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:600;font-size:16px;line-height:20px;letter-spacing:.0125em;margin:16px 0 0}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]:first-child{margin-top:0}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .item-ref-label[_ngcontent-%COMP%]{display:block;height:33px;margin:20px 0;line-height:33px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   span.checkbox-check[_ngcontent-%COMP%]{margin-right:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:18px;position:relative}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .rl-icon.dispute[_ngcontent-%COMP%]{position:absolute;top:44px;right:12px;font-size:25px;color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;padding:15px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important;border-radius:2px;outline:0;box-sizing:border-box;background-color:#f7f7f8;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .party-form-control.disabled[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.disabled[_ngcontent-%COMP%]{pointer-events:none}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .party-form-control.invalid[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.invalid[_ngcontent-%COMP%]{box-shadow:0 2px #e62300,inset 1px 1px #e62300,inset -1px 1px #e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control.margin-top[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.margin-top[_ngcontent-%COMP%]{margin-top:6px}.modal-content[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{resize:none;height:120px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:12px;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-ref-label[_ngcontent-%COMP%]{display:block;height:33px;line-height:33px;cursor:pointer;max-width:calc(100% - 60px)}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:24px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   .doc-man-checkbox[_ngcontent-%COMP%]:before{font-size:14px;position:relative}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:14px;display:flex;flex-direction:row;align-items:center}.modal-content.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;display:block;width:100%;margin:0 auto}.modal-content.add-new[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0;color:#e62300;font-size:16px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:32px 0 0}}.hidden[_ngcontent-%COMP%]{visibility:hidden}.header-icon[_ngcontent-%COMP%]{padding-right:8px}.content-container[_ngcontent-%COMP%]   .subheading[_ngcontent-%COMP%]{margin:0 0 16px;font-weight:700;font-size:16px;text-align:center;line-height:20px}.content-container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-weight:400;font-size:16px;text-align:center;margin:0 0 32px}.content-container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   span.tooltip-text[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer;position:relative}.content-container[_ngcontent-%COMP%]   .this-is-me-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin-bottom:8px}.content-container[_ngcontent-%COMP%]   .this-is-me-wrapper[_ngcontent-%COMP%]   .role-label[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.content-container[_ngcontent-%COMP%]   .this-is-me-wrapper[_ngcontent-%COMP%]   .this-is-me[_ngcontent-%COMP%]{font-weight:400}.content-container[_ngcontent-%COMP%]   .this-is-me-wrapper[_ngcontent-%COMP%]   .this-is-me[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{float:right;margin-left:8px;margin-right:0}.content-container[_ngcontent-%COMP%]   .party-details[_ngcontent-%COMP%]{border:1px solid black;border-left:8px solid black;display:flex;flex-direction:column;padding:16px 16px 32px;margin-bottom:32px;border-radius:8px}.content-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#e62300}.content-container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.content-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + .rl-icon.dispute[_ngcontent-%COMP%]{display:none}.content-container[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#e62300!important}.content-container[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%] + .rl-icon.dispute[_ngcontent-%COMP%]{display:block}.content-container[_ngcontent-%COMP%]   .add-signer-subheading[_ngcontent-%COMP%]{margin-bottom:16px}.content-container[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none;cursor:default}.content-container[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]:hover{background-color:none}.sign-icon[_ngcontent-%COMP%]{padding-bottom:16px}"],data:{animation:[P.Ic,P.i_,P.y0]}})}return i})();function tl(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportWord())}),t._UZ(1,"span",12)(2,"com",13),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.wordDocumentDownloading||e.pdfDocumentDownloading)}}const el=()=>({key:"export-document-modal_docx-button"}),nl=()=>({key:"export-document-modal_docx-button-exporting"});function ol(i,r){1&i&&t._UZ(0,"custom-button",14),2&i&&t.Q6J("defaultTranslation",t.DdM(3,el))("loadingTranslation",t.DdM(4,nl))("isLoading",!0)}function il(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportPdf())}),t._UZ(1,"span",15)(2,"com",16),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.wordDocumentDownloading||e.pdfDocumentDownloading)}}const al=()=>({key:"export-document-modal_pdf-button"}),rl=()=>({key:"export-document-modal_pdf-button-exporting"});function sl(i,r){1&i&&t._UZ(0,"custom-button",14),2&i&&t.Q6J("defaultTranslation",t.DdM(3,al))("loadingTranslation",t.DdM(4,rl))("isLoading",!0)}let ll=(()=>{class i{constructor(e,n,o,a,s,l){this.store=e,this.signService=n,this.messageService=o,this.userAgentService=a,this.modalControlService=s,this.eventTracker=l,this.wordDocumentDownloading=!1,this.pdfDocumentDownloading=!1}close(){this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:"next"})}exportWord(){this.wordDocumentDownloading=!0;const e=this.store.getState().get("binder");this.signService.download(e,".docx").subscribe(n=>{n&&this.modalControlService.close(c.G.CompletedSuccessfully)})}exportPdf(){this.pdfDocumentDownloading=!0;const e=this.store.getState().get("binder");this.signService.download(e,".pdf").subscribe(n=>{n&&this.modalControlService.close(c.G.CompletedSuccessfully)})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y),t.Y36(F.f),t.Y36(V.e),t.Y36(ae.V),t.Y36(c.e),t.Y36(tt.a))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["export-document-modal"]],decls:16,vars:4,consts:[["fakePath","export","rl-test","export-modal"],["product","sign"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"header-icon","rl-icon","cloud-download"],["translate",""],["rl-modal-header-widget","right"],[1,"modal-dialog","modal-content"],["comContent","export-document-modal_header-title",1,"title"],[1,"buttons-wrapper"],["class","btn btn-secondary",3,"disabled"],["class","btn","btnType","button","btnClass","btn btn-secondary right-aligned",3,"defaultTranslation","loadingTranslation","isLoading"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"rl-icon","word-doc"],["key","export-document-modal_docx-button"],["btnType","button","btnClass","btn btn-secondary right-aligned",1,"btn",3,"defaultTranslation","loadingTranslation","isLoading"],[1,"rl-icon","pdf-doc"],["key","export-document-modal_pdf-button"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._UZ(3,"i",3),t.TgZ(4,"span",4),t._uU(5,"export-document-modal_heading"),t.qZA()(),t._UZ(6,"rl-modal-header-close",5),t.qZA(),t.TgZ(7,"rl-modal-body")(8,"div",6),t._UZ(9,"p",7),t.TgZ(10,"div",8),t.YNc(11,tl,3,1,"button",9)(12,ol,1,5,"custom-button",10)(13,il,3,1,"button",9)(14,sl,1,5,"custom-button",10),t.qZA()()(),t._UZ(15,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(11),t.um2(11,o.wordDocumentDownloading?-1:11),t.xp6(),t.um2(12,o.wordDocumentDownloading?12:-1),t.xp6(),t.um2(13,o.pdfDocumentDownloading?-1:13),t.xp6(),t.um2(14,o.pdfDocumentDownloading?14:-1))},dependencies:[J.w,mt.q,h.Pi,_.zS,k,U,T,_.vP,A,S,z.x,b.tH,O.$m],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}[_nghost-%COMP%]     .footer-container{margin:0 auto 16px}.modal-background[_ngcontent-%COMP%]{touch-action:auto;position:fixed;inset:0;z-index:7;width:100%;height:100%;border-radius:3px;background-color:#3339;transition:opacity .2s;opacity:0;visibility:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch;overflow-x:hidden;display:flex;align-items:center;justify-content:center;flex-direction:column}.modal-background.modal-show[_ngcontent-%COMP%], .modal-background.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.outer-wrapper[_ngcontent-%COMP%]{padding:16px;width:100%;box-sizing:border-box;margin:auto}.modal-wrapper[_ngcontent-%COMP%]{z-index:8;overflow-x:hidden;overflow-y:auto;background-color:#fff;border-radius:8px;width:100%;min-height:auto;height:auto;margin:0 auto}@media screen and (min-width: 480px){.modal-wrapper[_ngcontent-%COMP%]{max-width:448px}}@media screen and (min-width: 768px){.modal-wrapper[_ngcontent-%COMP%]{max-width:560px}}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{font-weight:600;line-height:56px;height:56px;text-align:center;padding:0 40px;font-size:18px;background-color:#f2f1f1;position:relative}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{position:absolute;left:0;font-size:21px;margin-left:16px;cursor:pointer;color:#696a78}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{padding-right:8px}.modal-wrapper[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{font-size:20px;padding-right:0}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;padding:24px 8px;width:100%;max-width:416px;box-sizing:border-box;margin:0 auto;padding:24px 8px 0!important}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:24px 8px 40px}}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   span.rl-icon.dispute[_ngcontent-%COMP%]{top:6px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;resize:none;outline:none!important;font-size:16px;font-family:Open Sans;background-color:#f7f7f8;font-weight:400;margin-top:8px;padding:10px;border-radius:2px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border:1px solid #e62300}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .custom-text-caption[_ngcontent-%COMP%]{font-size:12px;clear:both}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;position:absolute;right:5px;bottom:5px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{width:100%;padding:0;margin-top:24px;display:flex;justify-content:space-between;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{width:100%;height:48px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse;height:48px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{flex:0 1 50%;height:100%;margin-right:8px;margin-bottom:0}}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:600;font-size:16px;line-height:20px;letter-spacing:.0125em;margin:16px 0 0}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]:first-child{margin-top:0}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .item-ref-label[_ngcontent-%COMP%]{display:block;height:33px;margin:20px 0;line-height:33px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   span.checkbox-check[_ngcontent-%COMP%]{margin-right:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:18px;position:relative}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .rl-icon.dispute[_ngcontent-%COMP%]{position:absolute;top:44px;right:12px;font-size:25px;color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;padding:15px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important;border-radius:2px;outline:0;box-sizing:border-box;background-color:#f7f7f8;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .party-form-control.disabled[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.disabled[_ngcontent-%COMP%]{pointer-events:none}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .party-form-control.invalid[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.invalid[_ngcontent-%COMP%]{box-shadow:0 2px #e62300,inset 1px 1px #e62300,inset -1px 1px #e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control.margin-top[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.margin-top[_ngcontent-%COMP%]{margin-top:6px}.modal-content[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{resize:none;height:120px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:12px;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-ref-label[_ngcontent-%COMP%]{display:block;height:33px;line-height:33px;cursor:pointer;max-width:calc(100% - 60px)}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:24px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   .doc-man-checkbox[_ngcontent-%COMP%]:before{font-size:14px;position:relative}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:14px;display:flex;flex-direction:row;align-items:center}.modal-content.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;display:block;width:100%;margin:0 auto}.modal-content.add-new[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0;color:#e62300;font-size:16px}.title[_ngcontent-%COMP%]{margin:0 auto 32px;max-width:230px;text-align:center;font-size:16px;font-weight:700;line-height:20px}.buttons-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.buttons-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.buttons-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.6;pointer-events:none;cursor:default}.buttons-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-bottom:0}.buttons-wrapper[_ngcontent-%COMP%]   .rl-icon[_ngcontent-%COMP%]{font-size:16px;padding-right:2px}@media screen and (min-width: 480px){.buttons-wrapper[_ngcontent-%COMP%]{flex-direction:row;justify-content:center}.buttons-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:calc(50% - 8px);margin-bottom:0}.buttons-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child{margin-right:8px}}.hide[_ngcontent-%COMP%]{display:none!important}"],data:{animation:[P.Ic,P.i_]}})}return i})();var Ge=u(870),st=function(i){return i[i.RoleSelector=0]="RoleSelector",i[i.Overview=1]="Overview",i[i.SelectPayee=2]="SelectPayee",i[i.SelectPayer=3]="SelectPayer",i[i.EditParty=4]="EditParty",i[i.EditAgreementTypeSelector=5]="EditAgreementTypeSelector",i}(st||{});const cl=["paymentAgreementCreator"];function dl(i,r){1&i&&t._UZ(0,"rl-modal-header-back",1)}let ml=(()=>{class i{constructor(e,n,o,a,s,l,d,p){this.alertService=e,this.eventTracker=n,this.messageService=o,this.modalControlService=a,this.envInfoService=s,this.signService=l,this.store=d,this.searchParams=p,this.showBackButton=!1,this.destroy=new w.x,this.headers={[st.RoleSelector]:"payment-creator-modal.headers.pay-get-paid",[st.Overview]:"payment-creator-modal.headers.set-up-payment",[st.SelectPayee]:"payment-creator-modal.headers.who-receiving",[st.SelectPayer]:"payment-creator-modal.headers.who-paying",[st.EditParty]:"payment-creator-modal.headers.add-details",[st.EditAgreementTypeSelector]:"payment-creator-modal.headers.edit-agreement-type-selector"}}ngOnInit(){const{authInfo:e,binder:n,paymentAgreement:o}=this.store.getState(),a=(0,m.kT)({authInfo:e,binder:n});this.currentUserPartyId=a.id,this.paymentAgreement=o,this.bindersBaseUrl=this.envInfoService.getBindersBaseUrl().replace(/\/binders$/,""),this.peerPaymentsBaseUrl=this.envInfoService.getPeerPaymentsBaseUrl(),this.rlAccessToken=e.access_token,this.userIsLawyer=this.searchParams.has("isLawyer"),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(s=>{this.onNavigate(s)})}ngAfterViewInit(){this.binder=this.store.getState().binder,this.creator.nativeElement.binder=this.binder}ngOnDestroy(){this.destroy.next()}onNavigate(e){"back"===e.data.to?this.creator.nativeElement.doStepBack():"created"===e.data.to&&(this.binder.documents[0].inputs.length>0?this.modalControlService.close(c.G.CompletedSuccessfully):this.modalControlService.close(c.G.CompletedSuccessfully,{nextModal:"askForSignatures"}))}onStepChange(e){this.modalHeader=this.headers[e.detail],this.showBackButton=e.detail!==st.RoleSelector}onSuccess(e){this.eventTracker.paymentAgreementCreated({paymentAgreementID:e.detail.externalId,source:"setupAPayment",creatorRole:this.getCreatorRole()}),this.alertService.addSuccessAlert({message:{key:"payment-creator-modal.payment-setup-successful"}}),this.signService.getBinder(this.binder.id,{saveStore:!0}).subscribe(),this.store.dispatch((0,Ge.xk)(e.detail)),this.modalControlService.navigate("created")}onError(){this.alertService.addDangerAlert({message:{key:"payment-creator-modal.payment-setup-failure"}})}editAgreement(e){"backToInterview"===e.detail.type&&this.messageService.sendEvent({action:"changeAnswers"})}getCreatorRole(){const e=this.store.getState(),n=(0,m.kT)(e),{payeeID:o,payerID:a}=e.paymentAgreementTemp;return o===n?.id?"payee":a===n?.id?"payer":"thirdParty"}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(R.c),t.Y36(tt.a),t.Y36(V.e),t.Y36(c.e),t.Y36(Qt.e),t.Y36(F.f),t.Y36(x.y),t.Y36(lt.l))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-creator-modal"]],viewQuery:function(n,o){if(1&n&&t.Gf(cl,5),2&n){let a;t.iGM(a=t.CRH())&&(o.creator=a.first)}},decls:10,vars:11,consts:[["fakePath","payment/createAgreement","rl-test","payment-details"],["rl-modal-header-widget","left"],["rl-modal-title","","rl-typography","heading"],["rl-modal-header-widget","right"],["rl-test","payment-agreement-creator-wc",3,"paymentAgreement","currentUserPartyID","currentUserPartyId","isLawyer","bindersBaseUrl","peerPaymentsBaseUrl","rlAccessToken","stepChanged","agreementCreated","agreementCreatorError","editAgreement"],["paymentAgreementCreator",""]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header"),t.YNc(2,dl,1,0,"rl-modal-header-back",1),t.TgZ(3,"h1",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"rl-modal-header-close",3),t.qZA(),t.TgZ(7,"rl-modal-body")(8,"rl-payment-agreement-creator",4,5),t.NdJ("stepChanged",function(s){return o.onStepChange(s)})("agreementCreated",function(s){return o.onSuccess(s)})("agreementCreatorError",function(){return o.onError()})("editAgreement",function(s){return o.editAgreement(s)}),t.qZA()()()),2&n&&(t.xp6(2),t.um2(2,o.showBackButton?2:-1),t.xp6(2),t.hij(" ",t.lcZ(5,9,o.modalHeader)," "),t.xp6(4),t.Q6J("paymentAgreement",o.paymentAgreement)("currentUserPartyID",o.currentUserPartyId)("currentUserPartyId",o.currentUserPartyId)("isLawyer",o.userIsLawyer)("bindersBaseUrl",o.bindersBaseUrl)("peerPaymentsBaseUrl",o.peerPaymentsBaseUrl)("rlAccessToken",o.rlAccessToken))},dependencies:[_t,_.zS,k,T,W,_.vP,A,b.tH,O.$m,h.X$],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.header-image[_ngcontent-%COMP%]{max-height:100%;max-width:100%;width:auto;height:auto;position:absolute;inset:0;margin:auto}.sign-icon[_ngcontent-%COMP%]{min-height:40px;margin:0 auto;width:40px;display:block}.default-icon[_ngcontent-%COMP%]{font-size:39px;width:40px;height:40px}.icon-fee[_ngcontent-%COMP%]{border:2px solid #3E3F4C;border-radius:100px;width:12px;font-size:10px;font-weight:700;text-align:center;padding:0;display:inline-block;margin-top:-3px;opacity:.7;vertical-align:middle;height:12px;line-height:12px}rl-payment-agreement-creator[_ngcontent-%COMP%]{margin-top:48px}rl-payment-agreement-creator[_ngcontent-%COMP%]:first-child{margin-top:32px}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){rl-payment-agreement-creator[_ngcontent-%COMP%]{margin-top:32px}}"]})}return i})();var pt=u(2501),Ve=u(2389);const Qe=()=>{},gl={alphaNumeric:"^\\w+$",alphaNumericWithSpaces:"^\\w[\\w ]*$",number:"^(?:(?:\\d|\\.(?!\\.))+|-(?:\\d|\\.(?!\\.))*)$",numeric:"^\\d+$",numericWithSpaces:"^\\d[\\d ]*$"},yt=i=>{const r=new RegExp(gl[i]);return e=>r.test(e)};let pl=(()=>{class i{static#t=this.predefinedFilterFns={get alphaNumeric(){return yt("alphaNumeric")},get alphaNumericWithSpaces(){return yt("alphaNumericWithSpaces")},get number(){return yt("number")},get numeric(){return yt("numeric")},get numericWithSpaces(){return yt("numericWithSpaces")}};set filters(e){this.filtersArray=Array.isArray(e)?e:"function"==typeof e?[e]:i.predefinedFilterFns[e]?[i.predefinedFilterFns[e]]:[]}static isFilterType(e){return"blacklist"===e||"whitelist"===e}constructor(e,n){this.elementRef=e,this.renderer=n,this.filterType="whitelist",this.destroy=new w.x,this.onChange=Qe,this.onTouch=Qe,this.filtersArray=[],this.previousValue=""}ngOnChanges({filterType:e}){e&&(this.filterType=i.isFilterType(e.currentValue)?e.currentValue:"whitelist")}ngAfterViewInit(){(0,K.R)(this.elementRef.nativeElement,"input").pipe((0,C.R)(this.destroy)).subscribe(e=>{const n=this.getValue(e.target.value);this.onChange(n),this.previousValue=n})}ngOnDestroy(){this.destroy.next()}beforeInput(e){if(e.inputType.startsWith("delete"))return!0;const n=e.target,o=`${n.value.slice(0,n.selectionStart)}${e.data??""}${n.value.slice(n.selectionEnd)}`;return this.isPermittedValue(o)}isPermittedValue(e){const n=this.elementRef?.nativeElement,o=this.filtersArray.every(a=>a(e,n?.value,n));return"whitelist"===this.filterType?o:!o}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouch=e}setDisabledState(e){this.elementRef?.nativeElement&&this.renderer.setProperty(this.elementRef.nativeElement,"disabled",e)}writeValue(e){this.elementRef?.nativeElement&&(this.previousValue=this.getValue(e),this.renderer.setProperty(this.elementRef.nativeElement,"value",this.previousValue))}getValue(e){return null==e||""===e||"string"!=typeof e?"":this.isPermittedValue(e)?e:this.previousValue??""}static#e=this.\u0275fac=function(n){return new(n||i)(t.Y36(t.SBq),t.Y36(t.Qsj))};static#n=this.\u0275dir=t.lG2({type:i,selectors:[["input","rlInputFilter","",3,"type","checkbox"],["textarea","rlInputFilter",""]],hostBindings:function(n,o){1&n&&t.NdJ("beforeinput",function(s){return o.beforeInput(s)})},inputs:{filters:[t.lbL.None,"rlInputFilter","filters"],filterType:"filterType"},features:[t.TTD]})}return i})();const ul=i=>({visible:i});let _l=(()=>{class i{static#t=this.paymentAmountMin=1;static#e=this.paymentAmountMax=1e4;constructor(e,n){this.currencyPipe=e,this.translateService=n,this.loading=!1,this.calculateClick=new t.vpe,this.confirmClick=new t.vpe,this.amountControl=new Mt(this.formatCurrency(0),{validators:[g.kI.required,()=>this.amount>i.paymentAmountMax?{max:{max:i.paymentAmountMax,actual:this.amount}}:null,()=>null==this.amount||this.amount<i.paymentAmountMin?{min:{min:i.paymentAmountMin,actual:this.amount}}:null]}),this.bem=(0,I.aP)("rl-payment-details-modal"),this.feeFormatted="",this.maxErrorMessage="",this.minErrorMessage="",this.receiveAmountFormatted="",this.showFee=!1,this.amount=null,this.feeIsVisible=!1}ngOnChanges({fee:e,receiveAmount:n}){e&&(this.feeFormatted=this.formatCurrency(e.currentValue??0)),n&&(this.receiveAmountFormatted=this.formatCurrency(n.currentValue??0)),this.showFee=void 0!==this.fee&&void 0!==this.receiveAmount}ngOnInit(){this.invalidAmountCharacters=/[^[\-.\d]]/g,this.translateService.get("payment-details-modal.error-below-min",{min:this.formatCurrency(i.paymentAmountMin)}).subscribe(e=>{this.minErrorMessage=e}),this.translateService.get("payment-details-modal.error-above-max",{max:this.formatCurrency(i.paymentAmountMax)}).subscribe(e=>{this.maxErrorMessage=e})}clearInput(){this.amountControl.submitted&&this.amountControl.markAsNotSubmitted(),this.amountControl.setValue(""),this.calculateClick.emit(null)}formatInput(){if(""===this.amountControl.value.trim()){const n=this.formatCurrency(0);return this.amount=0,void this.amountControl.setValue(n)}const e=this.getAmountFromControl();if(Number.isNaN(e))this.amount=null;else{this.amount=e;const n=this.formatCurrency(this.amount);this.amountControl.setValue(n)}}primaryCTAClick(){this.amountControl.markAsSubmitted(),this.amountControl.valid&&(this.showFee?this.confirmClick.emit():this.calculateClick.emit(this.amount))}formatCurrency(e){return this.currencyPipe.transform(e,this.currencyCode,"symbol","1.2")}getAmountFromControl(){const e=this.amountControl.value.replace(this.invalidAmountCharacters,"");return parseFloat(e)}animationStarted(){this.feeIsVisible=!0}animationFinished(){this.feeIsVisible=this.showFee}static#n=this.\u0275fac=function(n){return new(n||i)(t.Y36(v.H9),t.Y36(h.sK))};static#o=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-details-modal"]],inputs:{currencyCode:"currencyCode",fee:"fee",receiveAmount:"receiveAmount",payeeTableHeaderText:"payeeTableHeaderText",error:"error",loading:"loading"},outputs:{calculateClick:"calculateClick",confirmClick:"confirmClick"},features:[t._Bn([v.H9]),t.TTD],decls:68,vars:54,consts:[["fakePath","payment/createAgreement/amount","rl-test","payment-details"],["product","wallet"],["rl-modal-header-widget","left"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"rl-icon","card"],["rl-modal-header-widget","right"],["rl-modal-body-part","heroText","rl-modal-description","","translate","",1,"bold-700"],["rl-modal-body-part","interestPanel"],["control-id","amount",3,"formControl"],["amount",""],["data-label","","rl-inclusively-hidden","","translate",""],["label",""],["data-control","",3,"color"],["rl-typography","bold"],["prepend",""],["autocomplete","off","inputmode","decimal","rlInputFilter","number","rl-test","payment-details-amount",3,"formControl","id","readOnly","blur","focus","keyup.enter"],["input",""],[3,"hidden"],["append",""],["data-messages","","rl-test","payment-details-amount-errors","rl-typography","error",3,"id"],["messages",""],["translate","",3,"hidden"],["aria-live","polite","rl-test","calculation-container"],["rlTable","small",3,"rl-inclusively-hidden"],["rlTableRow",""],["rlTableHeader",""],["rl-tooltip-host",""],["role","presentation",1,"icon-fee"],["rl-typography","small"],["translate",""],["rlTableCell","","rl-test","payment-details-fee"],["rlTableRow","primary"],["rlTableHeader","","rl-test","payment-details-payee-header"],["rlTableCell","","rl-test","payment-details-receive-amount"],["color","happy","size","large",3,"bold"],["rl-modal-body-part","container","rl-test","payment-details-error",3,"hidden"],["rl-modal-body-part","actionsContainer"],["btnClass","btn btn-primary","rl-modal-body-part","primaryAction","rl-test","payment-details-cta",3,"isLoading","onClick"]],template:function(n,o){if(1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1),t._UZ(2,"rl-modal-header-back",2),t.TgZ(3,"h1",3),t._UZ(4,"i",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"rl-modal-header-close",5),t.qZA(),t.TgZ(8,"rl-modal-body")(9,"p",6),t._uU(10,"payment-details-modal.description"),t.qZA(),t.TgZ(11,"div")(12,"div",7)(13,"div")(14,"rlng-input",8,9)(16,"div",10,11),t._uU(18,"payment-details-modal.amount-label"),t.qZA(),t.TgZ(19,"rl-text-input",12)(20,"div",13,14),t._uU(22),t.qZA(),t.TgZ(23,"input",15,16),t.NdJ("blur",function(){return o.formatInput()})("focus",function(){return o.clearInput()})("keyup.enter",function(s){return s.target.blur(),o.primaryCTAClick()}),t.qZA(),t._UZ(25,"i",17,18),t.qZA(),t.TgZ(27,"div",19,20)(29,"div",21),t._uU(30,"payment-details-modal.error-numeric"),t.qZA(),t.TgZ(31,"div",21),t._uU(32,"payment-details-modal.error-numeric"),t.qZA(),t.TgZ(33,"div",17),t._uU(34),t.qZA(),t.TgZ(35,"div",17),t._uU(36),t.qZA()()(),t.TgZ(37,"div",22),t.NdJ("@openCloseRate.start",function(){return o.animationStarted()})("@openCloseRate.done",function(){return o.animationFinished()}),t.TgZ(38,"table",23)(39,"tbody")(40,"tr",24)(41,"th",25),t._uU(42),t.ALo(43,"translate"),t.TgZ(44,"span",26)(45,"div",27),t._uU(46,"?"),t.qZA(),t.TgZ(47,"rl-simple-tooltip",28)(48,"p",29),t._uU(49,"payment-details-modal.wallet-rate-tooltip-1"),t.qZA(),t.TgZ(50,"p",29),t._uU(51,"payment-details-modal.wallet-rate-tooltip-2"),t.qZA(),t.TgZ(52,"p",29),t._uU(53,"payment-details-modal.wallet-rate-tooltip-3"),t.qZA()()()(),t.TgZ(54,"td",30),t._uU(55),t.qZA()(),t.TgZ(56,"tr",31)(57,"th",32),t._uU(58),t.qZA(),t.TgZ(59,"td",33)(60,"rl-typography",34),t._uU(61),t.qZA()()()()()()()()(),t.TgZ(62,"div",35),t._uU(63),t.qZA(),t.TgZ(64,"div",36)(65,"custom-button",37),t.NdJ("onClick",function(){return o.primaryCTAClick()}),t._uU(66),t.ALo(67,"translate"),t.qZA()()()()),2&n){const a=t.MAs(15);t.xp6(5),t.hij(" ",t.lcZ(6,46,"payment-details-modal.header")," "),t.xp6(4),t.Tol(o.bem("heroText")),t.xp6(4),t.Tol(o.bem("payment-panel")),t.xp6(),t.Q6J("formControl",o.amountControl),t.xp6(5),t.Q6J("color",a.invalid?"error":"secondary"),t.xp6(),t.Tol(o.bem("currency-picker")),t.xp6(2),t.Oqu(o.currencyCode),t.xp6(),t.Tol(o.bem("input")),t.Q6J("formControl",o.amountControl)("id",a.id)("readOnly",o.loading),t.uIk("aria-describedby",a.messagesID),t.xp6(2),t.Gre("rl-icon alert-info ",o.bem("alert-icon"),""),t.Q6J("hidden",!a.invalid),t.xp6(2),t.Q6J("id",a.messagesID),t.xp6(2),t.Q6J("hidden",!a.showErrorMessage("required")),t.xp6(2),t.Q6J("hidden",!a.showErrorMessage("numeric")),t.xp6(2),t.Q6J("hidden",!a.showErrorMessage("min")),t.xp6(),t.Oqu(o.minErrorMessage),t.xp6(),t.Q6J("hidden",!a.showErrorMessage("max")),t.xp6(),t.Oqu(o.maxErrorMessage),t.xp6(),t.Tol(o.bem("expand-container",t.VKq(52,ul,o.feeIsVisible))),t.Q6J("@openCloseRate",o.showFee?"open":"closed"),t.xp6(),t.Q6J("rl-inclusively-hidden",o.showFee?"none":"assistiveOnly"),t.xp6(4),t.hij(" ",t.lcZ(43,48,"payment-details-modal.wallet-rate")," "),t.xp6(6),t.Tol(o.bem("fee-tooltip-text")),t.xp6(2),t.Tol(o.bem("fee-tooltip-text")),t.xp6(2),t.Tol(o.bem("fee-tooltip-text")),t.xp6(3),t.Oqu(o.feeFormatted),t.xp6(3),t.Oqu(o.payeeTableHeaderText),t.xp6(2),t.Q6J("bold",!0),t.xp6(),t.Oqu(o.receiveAmountFormatted),t.xp6(),t.Q6J("hidden",!o.error),t.xp6(),t.Oqu(o.error),t.xp6(2),t.Q6J("isLoading",o.loading),t.xp6(),t.Oqu(t.lcZ(67,50,"payment-details-modal.get-quote"))}},dependencies:[g.Fj,g.JJ,g.oH,h.Pi,q,_.zS,k,T,W,_.vP,_.Wb,A,S,z.x,b.tH,b.lo,zt,St.t,vt,O.$m,pl,ke,Ee,h.X$],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.header-image[_ngcontent-%COMP%]{max-height:100%;max-width:100%;width:auto;height:auto;position:absolute;inset:0;margin:auto}.sign-icon[_ngcontent-%COMP%]{min-height:40px;margin:0 auto;width:40px;display:block}.default-icon[_ngcontent-%COMP%]{font-size:39px;width:40px;height:40px}.rl-payment-details-modal__expand-container[_ngcontent-%COMP%]{visibility:hidden;margin-top:16px}@media (min-width: 480px){.rl-payment-details-modal__expand-container[_ngcontent-%COMP%]{margin-top:16px}}@media (min-width: 768px){.rl-payment-details-modal__expand-container[_ngcontent-%COMP%]{margin-top:16px}}.rl-payment-details-modal__expand-container--visible[_ngcontent-%COMP%]{visibility:visible}.rl-payment-details-modal__heroText[_ngcontent-%COMP%]{text-align:center}.rl-payment-details-modal__payment-panel[_ngcontent-%COMP%]{padding-bottom:16px;padding-top:16px}@media (min-width: 480px){.rl-payment-details-modal__payment-panel[_ngcontent-%COMP%]{padding-bottom:16px;padding-top:16px}}@media (min-width: 768px){.rl-payment-details-modal__payment-panel[_ngcontent-%COMP%]{padding-bottom:16px;padding-top:16px}}.rl-payment-details-modal__currency-picker[_ngcontent-%COMP%]{align-self:stretch;background-color:#ccd1d9;line-height:42px;white-space:nowrap;width:42px}.rl-payment-details-modal__input[readonly][_ngcontent-%COMP%]{cursor:not-allowed}.rl-payment-details-modal__alert-icon[_ngcontent-%COMP%]{font-size:16px}.rl-payment-details-modal__calendar-icon[_ngcontent-%COMP%]{font-size:24px}.rl-payment-details-modal__alert-icon[_ngcontent-%COMP%]{margin-right:12px}.rl-payment-details-modal__calendar-icon[_ngcontent-%COMP%]{color:#333;margin-left:12px}.rl-payment-details-modal__rate-info[_ngcontent-%COMP%]{border:none;border-collapse:collapse;box-shadow:0 0 8px #0000001a;width:100%}.rl-payment-details-modal__fee-tooltip-text[_ngcontent-%COMP%]:first-of-type{font-weight:700}.icon-fee[_ngcontent-%COMP%]{border:2px solid #3E3F4C;border-radius:100px;width:12px;font-size:10px;font-weight:700;text-align:center;padding:0;display:inline-block;margin-top:-3px;opacity:.7;vertical-align:middle;height:12px;line-height:12px}"],data:{animation:[(0,pt.X$)("openCloseRate",[(0,pt.SB)("open",(0,pt.oB)({height:"*",marginTop:"*",opacity:"1"})),(0,pt.SB)("closed",(0,pt.oB)({height:"0px",marginTop:"0px",opacity:"0"})),(0,pt.eR)("open <=> closed",[(0,pt.jt)("200ms ease-in-out")])])]}})}return i})(),hl=(()=>{class i{static findPartyByReference(e,n){return n.find(o=>o.reference===e)}constructor(e,n,o,a,s,l,d,p){this.alertService=e,this.eventTracker=n,this.modalControlService=o,this.payService=a,this.signService=s,this.store=l,this.translateService=d,this.loading=!1,this.payeeTableHeaderText="",this.destroy=new w.x,this.generalError="",this.currencyCode="USD",this.userIsLawyer=p.has("isLawyer")}ngOnInit(){this.getPayeeTableHeaderText().subscribe(e=>{this.payeeTableHeaderText=e}),this.translateService.get("payment-details-modal.general-error").subscribe(e=>{this.generalError=e}),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(e=>{if("back"===e.data.to)this.modalControlService.close(c.G.UserNavigatedBack);else if("created"===e.data.to){const{binder:n}=this.store.getState();n?.documents[0]?.inputs?.length>0?this.modalControlService.close(c.G.CompletedSuccessfully):this.modalControlService.close(c.G.CompletedSuccessfully,{nextModal:"askForSignatures"})}}),this.modalControlService.close$.pipe((0,C.R)(this.destroy)).subscribe(()=>{this.store.dispatch((0,ot.hQ)())})}ngOnDestroy(){this.destroy.next()}calculateFee(e){if(this.error=void 0,null===e)this.loading=!1,this.fee=void 0,this.payAmount=void 0,this.receiveAmount=void 0;else{this.loading=!0;const n=this.createPaymentAgreementForQuote(e);this.payService.getFeeQuote(n).pipe((0,C.R)(this.destroy),(0,B.U)(o=>{const a=o.amount/100;return{fee:a,receiveAmount:e-a}})).subscribe({next:({fee:o,receiveAmount:a})=>{this.fee=o,this.receiveAmount=a,this.payAmount=e},error:o=>{this.loading=!1,console.error(o),this.error=this.generalError,this.payAmount=void 0},complete:()=>{this.loading=!1}})}}savePaymentAgreement(){this.loading=!0;const e=this.store.getState().binder,n=this.removeUnusedParties(),o=this.updatePartyRoles(),a=this.findTemporaryParties();(n||o||a.length>0?this.updateBinderAndTemporaryPaymentAgreementIDs(a):(0,Y.of)(void 0)).pipe((0,Ve.K)(d=>{throw this.store.dispatch((0,L.yf)(e)),d}),(0,gt.b)(()=>{const d=(()=>{const M=this.store.getState(),y=(0,m.kT)(M),{payeeID:D,payerID:Z}=M.paymentAgreementTemp;return D===y?.id?"payee":Z===y?.id?"payer":"thirdParty"})(),p=this.createPaymentAgreementForSaving();return this.payService.createPaymentAgreement(p).pipe((0,Ve.K)(M=>{throw this.signService.updateBinder(e,!0),M}),(0,ct.b)({next:M=>{this.eventTracker.paymentAgreementCreated({paymentAgreementID:M.externalId,source:"setupAPayment",creatorRole:d})}}))})).subscribe({next:()=>{this.loading=!1,this.alertService.addSuccessAlert({message:{key:"payment-details-modal.payment-setup-successful"}}),this.modalControlService.navigate("created")},error:d=>{console.error(d),this.alertService.addDangerAlert({message:{key:"payment-details-modal.payment-setup-failure"}}),this.loading=!1}})}getPayeeTableHeaderText(){const e=this.store.getState(),n=(0,m.kT)(e),{payeeID:o}=e.paymentAgreementTemp;return o===n.id?this.translateService.get("payment-details-modal.receive-you"):this.translateService.get("payment-details-modal.receive-other-party",{otherParty:e.binder.parties.find(a=>a.id===o).legalName})}createPaymentAgreement(e,n,o,a,s,l){const d=(new Date).toISOString(),{binder:p}=this.store.getState();return{binderId:p.id,brand:"rl-us",firstPayment:d,lastPayment:d,paymentPeriod:"once",userIsLawyer:this.userIsLawyer,payments:[{due:d,ins:[this.createPaymentPayment(e,n)],outs:[this.createPaymentPayment(o,a)],fees:[this.createPaymentFee(s,l)]}]}}createPaymentAgreementForQuote(e){const n=Math.round(100*e),o="00000000-0000-0000-0000-000000000000";return this.createPaymentAgreement(n,o,n,o,0,o)}createPaymentAgreementForSaving(){const e=Math.round(100*this.payAmount),n=Math.round(100*this.fee),{paymentAgreementTemp:o}=this.store.getState();return this.createPaymentAgreement(e,o.payerID,e,o.payeeID,n,o.payeeID)}createPaymentPayment(e,n){const o={amount:e,currency:this.currencyCode};return void 0===n?o:{partyId:n,payment:o}}createPaymentFee(e,n){return{code:"rl-us-fee",description:"Convenience Fee",payment:this.createPaymentPayment(e),breakdown:[this.createPaymentPayment(e,n)]}}findTemporaryParties(){return this.store.getState().binder.parties.filter(e=>e.isTemporary)}removeUnusedParties(){let e=!1;const{paymentAgreementTemp:n}=this.store.getState();return this.findTemporaryParties().forEach(o=>{o.id!==n.payeeID&&o.id!==n.payerID&&(this.store.dispatch((0,nt.sQ)({id:o.id})),e=!0)}),e}updateBinderAndTemporaryPaymentAgreementIDs(e){const{binder:n,paymentAgreementTemp:o}=this.store.getState();return this.signService.updateBinder(n,!0).pipe((0,ct.b)(({parties:a})=>{e.length>0&&e.forEach(s=>{if(o.payeeID===s.id){const l=i.findPartyByReference(s.reference,a);this.store.dispatch((0,ot.IZ)(l.id))}else if(o.payerID===s.id){const l=i.findPartyByReference(s.reference,a);this.store.dispatch((0,ot.S$)(l.id))}})}),(0,it.h)(void 0))}updatePartyRoles(){let e=!1;const{binder:n,paymentAgreementTemp:o}=this.store.getState();return n.parties.forEach(a=>{const s=a.id===o.payeeID,l=(0,m.jn)(a,"PAYEE"),d=a.id===o.payerID,p=(0,m.jn)(a,"PAYER"),M=s&&!l,y=d&&!p,Q=l&&!s||p&&!d;if(M||y||Q){const at=JSON.parse(JSON.stringify(a));Q&&(at.roles=a.roles.filter(Pt=>"PAYEE"===Pt?s:"PAYER"!==Pt||d)),M&&at.roles.push("PAYEE"),y&&at.roles.push("PAYER"),this.store.dispatch((0,nt.CE)(at)),e=!0}}),e}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(R.c),t.Y36(tt.a),t.Y36(c.e),t.Y36(j.T),t.Y36(F.f),t.Y36(x.y),t.Y36(h.sK),t.Y36(lt.l))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-details-connected-modal"]],decls:1,vars:6,consts:[[3,"currencyCode","error","fee","loading","payeeTableHeaderText","receiveAmount","calculateClick","confirmClick"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-payment-details-modal",0),t.NdJ("calculateClick",function(s){return o.calculateFee(s)})("confirmClick",function(){return o.savePaymentAgreement()}),t.qZA()),2&n&&t.Q6J("currencyCode",o.currencyCode)("error",o.error)("fee",o.fee)("loading",o.loading)("payeeTableHeaderText",o.payeeTableHeaderText)("receiveAmount",o.receiveAmount)},dependencies:[_l],encapsulation:2})}return i})(),Ml=(()=>{class i{constructor(e,n,o,a,s){this.alertService=e,this.eventTracker=n,this.modalControlService=o,this.partyService=a,this.store=s,this.loading=!1,this.destroy=new w.x,this.bem=(0,I.aP)("rl-remove-payment-modal")}ngOnInit(){this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(()=>this.onNavigate())}onNavigate(){this.modalControlService.close(c.G.UserNavigatedBack)}back(){this.modalControlService.navigate("back")}ngOnDestroy(){this.destroy.next()}removePaymentAgreement(){if(!this.loading){this.loading=!0;const{externalId:e,status:n}=this.store.getState().paymentAgreement;this.store.dispatch((0,Ge.OX)()),this.partyService.ensurePartyRefIntegrity().subscribe({next:()=>{this.eventTracker.paymentAgreementDeleted({paymentAgreementID:e,status:n}),this.alertService.addSuccessAlert({message:{key:"remove-payment-modal.delete-payment-success"}}),this.modalControlService.close(c.G.CompletedSuccessfully)},error:()=>{this.loading=!1,this.alertService.addDangerAlert({message:{key:"remove-payment-modal.delete-payment-error"}})}})}}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(R.c),t.Y36(tt.a),t.Y36(c.e),t.Y36(Zt.p),t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-remove-payment-modal"]],decls:19,vars:10,consts:[["fakePath","payment/deleteAgreement","rl-test","remove-payment-modal"],["product","wallet"],["rl-modal-header-widget","left"],["rl-modal-title","","rl-typography","heading"],["rl-modal-header-widget","right"],["rl-modal-description","","rl-modal-body-part","heroText","rl-test","remove-payment-modal-hero","translate","",1,"bold-700"],["rl-modal-body-part","regularContent","rl-test","remove-payment-modal-description","translate",""],["rl-modal-body-part","actionsContainer"],["btnClass","btn btn-primary","rl-modal-body-part","primaryAction","rl-test","remove-payment-delete-payment-agreement",3,"isLoading","onClick"],["btnClass","btn btn-secondary","rl-modal-body-part","secondaryAction","rl-test","remove-payment-go-back",3,"onClick"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1),t._UZ(2,"rl-modal-header-back",2),t.TgZ(3,"h1",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"rl-modal-header-close",4),t.qZA(),t.TgZ(7,"rl-modal-body")(8,"p",5),t._uU(9,"remove-payment-modal.hero"),t.qZA(),t.TgZ(10,"p",6),t._uU(11,"remove-payment-modal.description"),t.qZA(),t.TgZ(12,"div",7)(13,"custom-button",8),t.NdJ("onClick",function(){return o.removePaymentAgreement()}),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"custom-button",9),t.NdJ("onClick",function(){return o.back()}),t._uU(17),t.ALo(18,"translate"),t.qZA()()()()),2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,4,"remove-payment-modal.heading")," "),t.xp6(9),t.Q6J("isLoading",o.loading),t.xp6(),t.Oqu(t.lcZ(15,6,"remove-payment-modal.remove")),t.xp6(3),t.Oqu(t.lcZ(18,8,"remove-payment-modal.go-back")))},dependencies:[h.Pi,q,_.zS,k,T,W,_.vP,_.Wb,A,S,z.x,b.tH,O.$m,h.X$],changeDetection:0})}return i})(),fl=(()=>{class i{constructor(e){this.modalControlService=e}close(){this.modalControlService.close(c.G.CompletedSuccessfully)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-failed-modal"]],decls:13,vars:0,consts:[["fakePath","payment/payInFailed","rl-test","payment-failed-modal"],["product","wallet"],["rl-modal-title","","rl-typography","heading","translate",""],["rl-modal-header-widget","right"],["rl-modal-description","","rl-modal-body-part","heroText","rl-test","payment-failed-modal-hero","translate","",1,"bold-700"],["rl-modal-body-part","regularContent","rl-test","payment-failed-modal-description","translate",""],["rl-modal-body-part","actionsContainer"],["rl-modal-body-part","primaryAction","rl-test","payment-status-cta","translate","",1,"btn","btn-primary",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._uU(3,"payment-failed-modal.heading"),t.qZA(),t._UZ(4,"rl-modal-header-close",3),t.qZA(),t.TgZ(5,"rl-modal-body")(6,"p",4),t._uU(7,"payment-failed-modal.hero"),t.qZA(),t.TgZ(8,"p",5),t._uU(9,"payment-failed-modal.description"),t.qZA(),t.TgZ(10,"div",6)(11,"button",7),t.NdJ("click",function(){return o.close()}),t._uU(12,"payment-failed-modal.cta"),t.qZA()()()())},dependencies:[h.Pi,q,_.zS,k,T,_.vP,_.Wb,A,S,b.tH,O.$m],encapsulation:2})}return i})();var yl=u(2707),xl=u(263),bl=u(7897);function Ol(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-pay-method-summary",3),t.NdJ("change",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.handleMethodChange(a))}),t._uU(1),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw();t.Tol(n.bem("method")),t.s9C("name",e.name),t.s9C("logo",e.logo),t.s9C("identifier",e.last4),t.s9C("checked",e===n.selectedMethod),t.xp6(),t.Oqu(e.name)}}function vl(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.useRocketWallet())}),t._UZ(1,"i",5),t.TgZ(2,"span",6),t._uU(3,"payment-pay-method-selector.use-wallet"),t.qZA()()}if(2&i){const e=t.oxw();t.Gre("btn btn-secondary ",e.bem("add-method"),"")}}function wl(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openAddBankAccountModal())}),t._UZ(1,"i",8),t.TgZ(2,"span",6),t._uU(3,"payment-pay-method-selector.add-bank-account"),t.qZA()()}if(2&i){const e=t.oxw();t.Gre("btn btn-secondary ",e.bem("add-method"),"")}}function Al(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openPayByCardModal())}),t._UZ(1,"i",8),t.TgZ(2,"span",6),t._uU(3,"payment-pay-method-selector.add-card"),t.qZA()()}if(2&i){const e=t.oxw();t.Gre("btn btn-secondary ",e.bem("add-method"),"")}}let Tl=(()=>{class i{constructor(e,n,o,a,s){this.featureFlagService=e,this.identityService=n,this.walletService=o,this.modalControlService=a,this.store=s,this.bem=(0,I.aP)("payment-pay-method-selector"),this.methods=[],this.destroy=new w.x}ngOnInit(){this.personID&&this.identityService.getIdentityProfile(this.personID).subscribe(),this.paymentMethodType=this.store.getState().paymentAgreement.paymentMethodType;const{identityProfile:e,paymentMethod:n}=this.store.getState();this.methods=Re.getConvertedGenericPaymentMethodsByType(e,this.paymentMethodType),n&&(this.selectedMethod=this.methods.find(o=>o.id===n.id),this.selectedMethod||this.store.dispatch((0,Vt.O)())),!this.selectedMethod&&this.methods.length>0&&this.handleMethodChange(this.methods[0]),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe({next:o=>{this.onNavigate(o)}})}handleMethodChange(e){this.selectedMethod=e,this.store.dispatch((0,Vt.B)(e))}openPayByCardModal(){this.modalControlService.navigate("payNow")}openAddBankAccountModal(){this.modalControlService.navigate("addBankAccount")}useRocketWallet(){const{paymentAgreement:e,binder:n}=this.store.getState(),o=(0,m.oJ)(n,"PAYER");this.walletService.createWalletTransactionIntent(e.externalId,o.id).subscribe({next:()=>{this.modalControlService.navigate("useWallet")},error:a=>{console.error(a),this.modalControlService.navigate("useWallet")}})}ngOnDestroy(){this.destroy.next()}onNavigate(e){"payNow"===e.data.to?this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:"payNow"}):"addBankAccount"===e.data.to?this.modalControlService.close(c.G.UserNavigatedNext,{nextModal:"addBankAccount"}):"useWallet"===e.data.to&&this.modalControlService.close(c.G.CompletedSuccessfully)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(ut.e),t.Y36(xl.P),t.Y36(bl.X),t.Y36(c.e),t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-pay-method-selector"]],inputs:{personID:"personID"},decls:6,vars:5,consts:[["rl-test","use-rocket-wallet",3,"class"],["rl-test","add-bank-account",3,"class"],["rl-test","add-card",3,"class"],["rl-test","pay-method",3,"name","logo","identifier","checked","change"],["rl-test","use-rocket-wallet",3,"click"],[1,"rl-icon","check"],["translate",""],["rl-test","add-bank-account",3,"click"],[1,"rl-icon","add"],["rl-test","add-card",3,"click"],["rl-test","pay-method",3,"class","name","logo","identifier","checked"]],template:function(n,o){1&n&&(t.TgZ(0,"div"),t.SjG(1,Ol,2,7,"rl-pay-method-summary",10,t.x6l),t.YNc(3,vl,4,3,"button",0)(4,wl,4,3,"button",1)(5,Al,4,3,"button",2),t.qZA()),2&n&&(t.Tol(o.bem()),t.xp6(),t.wJu(o.methods),t.xp6(2),t.um2(3,o.featureFlagService.flags.wallet_enabled?3:-1),t.xp6(),t.um2(4,o.featureFlagService.flags.pay_with_bank_account&&"bank"===o.paymentMethodType?4:-1),t.xp6(),t.um2(5,"card"===o.paymentMethodType?5:-1))},dependencies:[h.Pi,O.$m],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.payment-pay-method-selector[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto;justify-items:stretch;grid-template-columns:repeat(3,1fr 8px) 1fr}.payment-pay-method-selector[hidden][_ngcontent-%COMP%]{display:none}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.payment-pay-method-selector[_ngcontent-%COMP%]{grid-column-gap:8px;column-gap:8px;grid-row-gap:16px;row-gap:16px;grid-template-columns:repeat(4,1fr)}}.payment-pay-method-selector__method[_ngcontent-%COMP%], .payment-pay-method-selector__add-method[_ngcontent-%COMP%]{grid-column:1/span max(1,2 * 4 - 1)}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.payment-pay-method-selector__method[_ngcontent-%COMP%], .payment-pay-method-selector__add-method[_ngcontent-%COMP%]{grid-column:1/span 4}}.payment-pay-method-selector__method[_ngcontent-%COMP%]{font-size:62.5%}.payment-pay-method-selector__add-method[_ngcontent-%COMP%]{border-color:#3e3f4c;color:#3e3f4c;width:100%}.payment-pay-method-selector__add-method[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{margin-right:.5em}"]})}return i})();const kl=i=>({payeeName:i});let Sl=(()=>{class i{constructor(e,n){this.modalControlService=e,this.store=n,this.hasPaymentMethod=!1,this.destroy=new w.x}ngOnInit(){const e=this.store.getState(),{personId:n}=(0,m.kT)(e);this.personID=n;const o=e.paymentAgreement?.payments[0].outs[0].partyId,a=e.binder.parties.find(({id:s})=>s===o);this.payeeName=a?.legalName||"",this.store.getState$().pipe((0,C.R)(this.destroy),(0,B.U)(s=>s.paymentMethod),function Pl(i,r){return(0,Le.e)((e,n)=>{const o=new Set;e.subscribe((0,Yt.x)(n,a=>{const s=i?i(a):a;o.has(s)||(o.add(s),n.next(a))})),r&&(0,ce.Xf)(r).subscribe((0,Yt.x)(n,()=>o.clear(),yl.Z))})}()).subscribe({next:s=>{this.hasPaymentMethod=!!s}}),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe({next:s=>{this.onNavigate(s)}})}openPayConfirmModal(){this.modalControlService.navigate("next")}ngOnDestroy(){this.destroy.next()}onNavigate(e){"next"===e.data.to&&this.modalControlService.close(c.G.UserNavigatedNext)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e),t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-method-modal"]],decls:15,vars:11,consts:[["fakePath","payment/choosePayInMethod","rl-test","payment-method"],["product","wallet"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"rl-icon","card"],["rl-modal-header-widget","right"],["rl-modal-body-part","heroText","rl-typography","bold","translate","",3,"translateParams"],["rl-test","method-selector",3,"personID"],["rl-modal-body-part","actionsContainer",3,"hidden"],["rl-test","continue-button","rl-modal-body-part","primaryAction",1,"btn","btn-primary",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._UZ(3,"i",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"rl-modal-header-close",4),t.qZA(),t.TgZ(7,"rl-modal-body")(8,"p",5),t._uU(9,"payment-payment-method-modal.hero"),t.qZA(),t._UZ(10,"rl-pay-method-selector",6),t.TgZ(11,"div",7)(12,"button",8),t.NdJ("click",function(){return o.openPayConfirmModal()}),t._uU(13),t.ALo(14,"translate"),t.qZA()()()()),2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,5,"payment-payment-method-modal.heading")," "),t.xp6(4),t.Q6J("translateParams",t.VKq(9,kl,o.payeeName)),t.xp6(2),t.Q6J("personID",o.personID),t.xp6(),t.Q6J("hidden",!o.hasPaymentMethod),t.xp6(2),t.Oqu(t.lcZ(14,7,"payment-payment-method-modal.cta")))},dependencies:[h.Pi,q,_.zS,k,T,_.vP,A,S,b.tH,O.$m,Tl,h.X$]})}return i})();function Zl(i,r){1&i&&(t.TgZ(0,"div",3),t._UZ(1,"rl-working-indicator",4),t.qZA())}const El=()=>({plaidRedirectRoute:"payment/payByBank"});let Il=(()=>{class i{constructor(e,n,o,a){this.alertService=e,this.payService=n,this.store=o,this.tracking=a,this.hideModal=new t.vpe,this.showSpinner=!0}ngOnInit(){const e=this.store.getState();this.partyID=(0,m.kT)(e).id}ngAfterViewInit(){this.tracking.virtualPageView({location:"payment/payByBank"})}onLoaded(){this.showSpinner=!1}onError(){this.showFailureNotification(),this.hideModal.emit({nextModal:"end"})}onExit(){this.hideModal.emit({nextModal:"end"})}onSuccess(e,n){this.showSpinner=!0,this.payService.createAchPaymentMethod({brand:"rl-us",token:e,partyId:this.partyID,accountId:n.accounts[0].id}).subscribe({next:a=>{this.showSuccessNotification(),this.store.dispatch((0,Ie.Rk)(a)),this.hideModal.emit({nextModal:"end"})},error:()=>{this.showFailureNotification(),this.hideModal.emit({nextModal:"end"})}})}showSuccessNotification(){this.alertService.addSuccessAlert({message:"payment-ach-plaid-modal.setup-successful"})}showFailureNotification(){this.alertService.addDangerAlert({message:"payment-ach-plaid-modal.setup-error"})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(R.c),t.Y36(j.T),t.Y36(x.y),t.Y36(tt.a))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-ach-plaid-modal"]],outputs:{hideModal:"hideModal"},decls:3,vars:4,consts:[[3,"visible"],["class","overlay"],[3,"additionalOAuthStorageData","loaded","error","exit","success"],[1,"overlay"],["size","large"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-lightbox",0),t.YNc(1,Zl,2,0,"div",1),t.TgZ(2,"rl-payment-plaid",2),t.NdJ("loaded",function(){return o.onLoaded()})("error",function(){return o.onError()})("exit",function(){return o.onExit()})("success",function(s){return o.onSuccess(s.publicToken,s.metadata)}),t.qZA()()),2&n&&(t.Q6J("visible",!0),t.xp6(),t.um2(1,o.showSpinner?1:-1),t.xp6(),t.Q6J("additionalOAuthStorageData",t.DdM(3,El)))},dependencies:[qe.s,Je],styles:["rl-working-indicator[_ngcontent-%COMP%]{margin:0 auto;display:block;font-size:10px}"]})}return i})(),Dl=(()=>{class i{constructor(e,n,o,a){this.modalControlService=e,this.signService=n,this.store=o,this.payService=a,this.destroy=new w.x,this.busy=!1}ngOnInit(){this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(e=>{"back"===e.data.to?this.modalControlService.close(c.G.UserNavigatedBack):"actionModal"===e.data.to?this.modalControlService.close(c.G.CompletedSuccessfully,{nextModal:"actionModal"}):"inviteModal"===e.data.to&&this.modalControlService.close(c.G.CompletedSuccessfully,{nextModal:"inviteModal"})})}onAddSignatureOptionSelected(e){"with-signatures"===e.detail?(this.busy=!0,this.updateBinderSignable(!0).subscribe(()=>{this.busy=!1,this.modalControlService.navigate("actionModal")})):(this.busy=!0,this.updateBinderSignable(!1).subscribe(()=>{(0,m.jn)((0,m.kT)(this.store.getState()),"PAYER")?this.signService.sendFinalisation("finalisation without signing",this.store.getState().binder).subscribe(()=>{this.payService.setPaymentAgreementStatus(this.store.getState().paymentAgreement.externalId,"pending").subscribe(()=>{this.busy=!1,this.modalControlService.navigate("actionModal")})}):this.modalControlService.navigate("inviteModal")}))}updateBinderSignable(e){const n=this.store.getState().binder,o={...n,documents:n.documents.map(a=>({...a,signable:e}))};return this.signService.updateBinder(o,!0)}ngOnDestroy(){this.destroy.next()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e),t.Y36(F.f),t.Y36(x.y),t.Y36(j.T))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-add-signatures-selector-modal"]],decls:8,vars:1,consts:[["fakePath","addSignaturesSelectorModal","rl-test","payment-add-signature-after-payment-agreement"],["rl-modal-title","","rl-typography","heading","translate",""],["rl-modal-header-widget","right"],["src","images/rocketsign-logo.svg",1,"sign-icon","modal-default-icon-color"],["rl-test","add-signature-selector-wc",3,"busy","rlAddSignatureSelectorSelected"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header")(2,"h1",1),t._uU(3," add-signatures-selector-modal.header "),t.qZA(),t._UZ(4,"rl-modal-header-close",2),t.qZA(),t.TgZ(5,"rl-modal-body"),t._UZ(6,"img",3),t.TgZ(7,"rl-add-signature-selector",4),t.NdJ("rlAddSignatureSelectorSelected",function(s){return o.onAddSignatureOptionSelected(s)}),t.qZA()()()),2&n&&(t.xp6(7),t.Q6J("busy",o.busy))},dependencies:[h.Pi,_t,_.zS,k,T,_.vP,A,b.tH,O.$m],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.header-image[_ngcontent-%COMP%]{max-height:100%;max-width:100%;width:auto;height:auto;position:absolute;inset:0;margin:auto}.sign-icon[_ngcontent-%COMP%]{min-height:40px;margin:0 auto;width:40px;display:block}.default-icon[_ngcontent-%COMP%]{font-size:39px;width:40px;height:40px}.sign-icon[_ngcontent-%COMP%]{width:64px;margin-top:48px}.sign-icon[_ngcontent-%COMP%]:first-child{margin-top:32px}@supports (display: grid) and ((column-gap: 1px) or (grid-column-gap: 1px)){.sign-icon[_ngcontent-%COMP%]{margin-top:32px}}"]})}return i})();var Ye=function(i){return i[i.BINDER_CREATED=0]="BINDER_CREATED",i[i.BINDER_VIEWED=1]="BINDER_VIEWED",i[i.BINDER_SIGNED=2]="BINDER_SIGNED",i[i.BINDER_DOWNLOADED=3]="BINDER_DOWNLOADED",i[i.BINDER_CANCELED=4]="BINDER_CANCELED",i[i.BINDER_SIGN_COMPLETED=5]="BINDER_SIGN_COMPLETED",i[i.INVITATION_TO_SIGN_SENT=6]="INVITATION_TO_SIGN_SENT",i[i.SIGNER_DECLINED_TO_SIGN=7]="SIGNER_DECLINED_TO_SIGN",i[i.VIEWER_INVITED=8]="VIEWER_INVITED",i[i.VIEWER_REMOVED_FROM_BINDER=9]="VIEWER_REMOVED_FROM_BINDER",i[i.BINDER_DOCUMENT_CHANGED=10]="BINDER_DOCUMENT_CHANGED",i[i.SIGN_REMINDER_SENT=11]="SIGN_REMINDER_SENT",i[i.BINDER_PRINTED=12]="BINDER_PRINTED",i}(Ye||{});const Nl=(i,r)=>r.id;function Rl(i,r){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(),t.Oqu(e.name)}}function Fl(i,r){1&i&&(t.TgZ(0,"span"),t._UZ(1,"com",9),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","history-panel_binder-status-preparation"))}function Ul(i,r){1&i&&(t.TgZ(0,"span"),t._UZ(1,"com",9),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","history-panel_binder-status-progress"))}function ql(i,r){1&i&&(t.TgZ(0,"span"),t._UZ(1,"com",9),t.qZA()),2&i&&(t.xp6(),t.Q6J("key","history-panel_binder-status-complete"))}function Jl(i,r){1&i&&t._UZ(0,"span",22)(1,"span",23),2&i&&(t.xp6(),t.Q6J("comContent","history-panel_binder-icon-caption-created"))}function zl(i,r){1&i&&t._UZ(0,"span",24)(1,"span",23),2&i&&(t.xp6(),t.Q6J("comContent","history-panel_binder-icon-caption-edited"))}function Hl(i,r){1&i&&t._UZ(0,"span",25)(1,"span",23),2&i&&(t.xp6(),t.Q6J("comContent","history-panel_binder-icon-caption-invitation"))}function Bl(i,r){1&i&&t._UZ(0,"span",25)(1,"span",23),2&i&&(t.xp6(),t.Q6J("comContent","history-panel_binder-icon-caption-invitation"))}function Ll(i,r){1&i&&t._UZ(0,"span",26)(1,"span",23),2&i&&(t.xp6(),t.Q6J("comContent","history-panel_binder-icon-caption-viewed"))}function Gl(i,r){1&i&&t._UZ(0,"span",27)(1,"span",23),2&i&&(t.xp6(),t.Q6J("comContent","history-panel_binder-icon-caption-signed"))}function Vl(i,r){1&i&&t._UZ(0,"span",28)(1,"span",23),2&i&&(t.xp6(),t.Q6J("comContent","history-panel_binder-icon-caption-downloaded"))}function Ql(i,r){1&i&&t._UZ(0,"span",29)(1,"span",23),2&i&&(t.xp6(),t.Q6J("comContent","history-panel_binder-icon-caption-printed"))}function Yl(i,r){1&i&&t._UZ(0,"span",30)(1,"span",23),2&i&&(t.xp6(),t.Q6J("comContent","history-panel_binder-icon-caption-reminder"))}function Wl(i,r){1&i&&t._UZ(0,"span",31)(1,"span",23),2&i&&(t.xp6(),t.Q6J("comContent","history-panel_binder-icon-caption-cancelled"))}function $l(i,r){1&i&&t._UZ(0,"span",31)(1,"span",23),2&i&&(t.xp6(),t.Q6J("comContent","history-panel_binder-icon-caption-declined"))}function Kl(i,r){1&i&&t._UZ(0,"span",31)(1,"span",23),2&i&&(t.xp6(),t.Q6J("comContent","history-panel_binder-icon-caption-cancelled"))}function jl(i,r){1&i&&t._UZ(0,"span",32)(1,"span",23),2&i&&(t.xp6(),t.Q6J("comContent","history-panel_binder-icon-caption-completed"))}const N=(i,r)=>({name:i,email:r});function Xl(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-created-singular":"history-panel_binder-created-singular-alt")}}function tc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-edited-singular":"history-panel_binder-edited-singular-alt")}}function ec(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_invitation-to-sign-sent-singular":"history-panel_invitation-to-sign-sent-singular-alt")}}function nc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_invitation-to-view-sent-singular":"history-panel_invitation-to-view-sent-singular-alt")}}function oc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-viewed-singular":"history-panel_binder-viewed-singular-alt")}}function ic(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-signed-singular":"history-panel_binder-signed-singular-alt")}}function ac(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-downloaded-singular":"history-panel_binder-downloaded-singular-alt")}}function rc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-printed-singular":"history-panel_binder-printed-singular-alt")}}function sc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-reminder-sent":"history-panel_binder-reminder-sent-alt")}}function lc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_viewer-removed-singular":"history-panel_viewer-removed-singular-alt")}}function cc(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"span",23),t.TgZ(2,"q"),t._uU(3),t.qZA()()),2&i){const e=t.oxw(3).$implicit;t.xp6(),t.Q6J("comContent","history-panel_binder-reason"),t.xp6(2),t.Oqu(e.details.message)}}function dc(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"span",34),t.YNc(2,cc,4,2,"div"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(),t.Q6J("params",t.WLB(3,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-canceled-singular":"history-panel_binder-canceled-singular-alt"),t.xp6(),t.um2(2,e.details.message?2:-1)}}function mc(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"span",23),t.TgZ(2,"q"),t._uU(3),t.qZA()()),2&i){const e=t.oxw(3).$implicit;t.xp6(),t.Q6J("comContent","history-panel_binder-reason"),t.xp6(2),t.Oqu(e.details.message)}}function gc(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"span",34),t.YNc(2,mc,4,2,"div"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(),t.Q6J("params",t.WLB(3,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_signer-declined-to-sign-singular":"history-panel_signer-declined-to-sign-singular-alt"),t.xp6(),t.um2(2,e.details.message?2:-1)}}function pc(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"span",23),t.TgZ(2,"q"),t._uU(3),t.qZA()()),2&i){const e=t.oxw(3).$implicit;t.xp6(),t.Q6J("comContent","history-panel_binder-reason"),t.xp6(2),t.Oqu(e.details.message)}}function uc(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"span",34),t.YNc(2,pc,4,2,"div"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(),t.Q6J("params",t.WLB(3,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-sign-completed-singular":"history-panel_binder-sign-completed-singular-alt"),t.xp6(),t.um2(2,e.details.message?2:-1)}}function _c(i,r){if(1&i&&(t.TgZ(0,"div",33),t.YNc(1,Xl,1,5)(2,tc,1,5)(3,ec,1,5)(4,nc,1,5)(5,oc,1,5)(6,ic,1,5)(7,ac,1,5)(8,rc,1,5)(9,sc,1,5)(10,lc,1,5)(11,dc,3,6)(12,gc,3,6)(13,uc,3,6),t.qZA()),2&i){const e=t.oxw().$implicit;let n;t.xp6(),t.um2(1,"BINDER_CREATED"===(n=e.type)?1:"BINDER_DOCUMENT_CHANGED"===n?2:"INVITATION_TO_SIGN_SENT"===n?3:"VIEWER_INVITED"===n?4:"BINDER_VIEWED"===n?5:"BINDER_SIGNED"===n?6:"BINDER_DOWNLOADED"===n?7:"BINDER_PRINTED"===n?8:"SIGN_REMINDER_SENT"===n?9:"VIEWER_REMOVED_FROM_BINDER"===n?10:"BINDER_CANCELED"===n?11:"SIGNER_DECLINED_TO_SIGN"===n?12:"BINDER_SIGN_COMPLETED"===n?13:-1)}}function hc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-created-plural":"history-panel_binder-created-plural-alt")}}function Cc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-edited-plural":"history-panel_binder-edited-plural-alt")}}function Mc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_invitation-to-sign-sent-plural":"history-panel_invitation-to-sign-sent-plural-alt")}}function fc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_invitation-to-view-sent-plural":"history-panel_invitation-to-view-sent-plural-alt")}}function yc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-viewed-plural":"history-panel_binder-viewed-plural-alt")}}function Pc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-signed-plural":"history-panel_binder-signed-plural-alt")}}function xc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-downloaded-plural":"history-panel_binder-downloaded-plural-alt")}}function bc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-printed-plural":"history-panel_binder-printed-plural-alt")}}function Oc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-reminder-sent":"history-panel_binder-reminder-sent-alt")}}function vc(i,r){if(1&i&&t._UZ(0,"span",34),2&i){const e=t.oxw(2).$implicit;t.Q6J("params",t.WLB(2,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_viewer-removed-plural":"history-panel_viewer-removed-plural-alt")}}function wc(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"span",23),t.TgZ(2,"q"),t._uU(3),t.qZA()()),2&i){const e=t.oxw(3).$implicit;t.xp6(),t.Q6J("comContent","history-panel_binder-reason"),t.xp6(2),t.Oqu(e.details.message)}}function Ac(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"span",34),t.YNc(2,wc,4,2,"div"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(),t.Q6J("params",t.WLB(3,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-canceled-plural":"history-panel_binder-canceled-plural-alt"),t.xp6(),t.um2(2,e.details.message?2:-1)}}function Tc(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"span",23),t.TgZ(2,"q"),t._uU(3),t.qZA()()),2&i){const e=t.oxw(3).$implicit;t.xp6(),t.Q6J("comContent","history-panel_binder-reason"),t.xp6(2),t.Oqu(e.details.message)}}function kc(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"span",34),t.YNc(2,Tc,4,2,"div"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(),t.Q6J("params",t.WLB(3,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_signer-declined-to-sign-plural":"history-panel_signer-declined-to-sign-plural-alt"),t.xp6(),t.um2(2,e.details.message?2:-1)}}function Sc(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"span",23),t.TgZ(2,"q"),t._uU(3),t.qZA()()),2&i){const e=t.oxw(3).$implicit;t.xp6(),t.Q6J("comContent","history-panel_binder-reason"),t.xp6(2),t.Oqu(e.details.message)}}function Zc(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"span",34),t.YNc(2,Sc,4,2,"div"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(),t.Q6J("params",t.WLB(3,N,e.details.legalName?e.details.legalName:e.details.email,e.details.email))("comContent",e.details.legalName&&e.details.email?"history-panel_binder-sign-completed-plural":"history-panel_binder-sign-completed-plural-alt"),t.xp6(),t.um2(2,e.details.message?2:-1)}}function Ec(i,r){if(1&i&&(t.TgZ(0,"div",33),t.YNc(1,hc,1,5)(2,Cc,1,5)(3,Mc,1,5)(4,fc,1,5)(5,yc,1,5)(6,Pc,1,5)(7,xc,1,5)(8,bc,1,5)(9,Oc,1,5)(10,vc,1,5)(11,Ac,3,6)(12,kc,3,6)(13,Zc,3,6),t.qZA()),2&i){const e=t.oxw().$implicit;let n;t.xp6(),t.um2(1,"BINDER_CREATED"===(n=e.type)?1:"BINDER_DOCUMENT_CHANGED"===n?2:"INVITATION_TO_SIGN_SENT"===n?3:"VIEWER_INVITED"===n?4:"BINDER_VIEWED"===n?5:"BINDER_SIGNED"===n?6:"BINDER_DOWNLOADED"===n?7:"BINDER_PRINTED"===n?8:"SIGN_REMINDER_SENT"===n?9:"VIEWER_REMOVED_FROM_BINDER"===n?10:"BINDER_CANCELED"===n?11:"SIGNER_DECLINED_TO_SIGN"===n?12:"BINDER_SIGN_COMPLETED"===n?13:-1)}}function Ic(i,r){if(1&i&&(t.TgZ(0,"li",18)(1,"div",19),t.YNc(2,Jl,2,1)(3,zl,2,1)(4,Hl,2,1)(5,Bl,2,1)(6,Ll,2,1)(7,Gl,2,1)(8,Vl,2,1)(9,Ql,2,1)(10,Yl,2,1)(11,Wl,2,1)(12,$l,2,1)(13,Kl,2,1)(14,jl,2,1),t.qZA(),t.TgZ(15,"div",20)(16,"span"),t._uU(17),t.ALo(18,"date"),t.qZA(),t.TgZ(19,"span"),t._uU(20),t.ALo(21,"date"),t.qZA()(),t.YNc(22,_c,14,1,"div",21)(23,Ec,14,1,"div",21),t.qZA()),2&i){const e=r.$implicit,n=t.oxw();let o;t.xp6(2),t.um2(2,"BINDER_CREATED"===(o=e.type)?2:"BINDER_DOCUMENT_CHANGED"===o?3:"INVITATION_TO_SIGN_SENT"===o?4:"VIEWER_INVITED"===o?5:"BINDER_VIEWED"===o?6:"BINDER_SIGNED"===o?7:"BINDER_DOWNLOADED"===o?8:"BINDER_PRINTED"===o?9:"SIGN_REMINDER_SENT"===o?10:"BINDER_CANCELED"===o?11:"SIGNER_DECLINED_TO_SIGN"===o?12:"VIEWER_REMOVED_FROM_BINDER"===o?13:"BINDER_SIGN_COMPLETED"===o?14:-1),t.xp6(15),t.Oqu(t.xi3(18,5,e.occurredAt,n.binder.dateFormat)),t.xp6(3),t.Oqu(t.xi3(21,8,e.occurredAt,"hh:mma")),t.xp6(2),t.um2(22,1==n.numberOfDocs?22:-1),t.xp6(),t.um2(23,n.numberOfDocs>1?23:-1)}}let Dc=(()=>{class i{constructor(e){this.store=e,this.numberOfDocs=1,this.hideModal=new t.vpe,this.documentEvents=[]}ngOnInit(){this.binder=this.store.getState().binder,this.binderOwner=(0,m.oJ)(this.binder,"OWNER"),this.sub=this.store.subscribe(()=>this.setEvents()),this.setEvents()}ngOnDestroy(){this.sub()}setEvents(){const e=this.store.getState().historyInfo;e&&(this.documentEvents=e.filter(n=>n.type in Ye))}close(){this.hideModal.emit()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["history-panel"]],outputs:{hideModal:"hideModal"},decls:43,vars:8,consts:[["fakePath","history","rl-test","history-modal"],["product","sign"],["rl-modal-title","","rl-typography","heading"],["role","presentation",1,"header-icon","rl-icon","document"],["translate",""],["rl-modal-header-widget","right"],[1,"modal-dialog","modal-content"],[1,"details-wrapper"],[1,"panel-heading"],[3,"key"],[1,"binder-details-content"],["rl-typography","small",1,"binder-details"],[1,"binder-files-list"],[1,"history-wrapper"],[1,"history-entries"],[1,"history-entry","list-unstyled"],[1,"bottom-buttons"],[1,"btn","btn-primary",3,"click"],["rl-typography","small"],[1,"event-icon"],["rl-typography","small",1,"date"],["class","description"],[1,"rl-icon","created"],[3,"comContent"],[1,"rl-icon","settings"],[1,"rl-icon","action"],[1,"rl-icon","eye"],[1,"rl-icon","signed"],[1,"rl-icon","download-document"],[1,"rl-icon","print"],[1,"rl-icon","reminder"],[1,"rl-icon","declined-to-sign"],[1,"rl-icon","completed"],[1,"description"],[3,"params","comContent"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1)(2,"h1",2),t._UZ(3,"i",3),t.TgZ(4,"span",4),t._uU(5,"history-panel_heading"),t.qZA()(),t._UZ(6,"rl-modal-header-close",5),t.qZA(),t.TgZ(7,"rl-modal-body")(8,"div",6)(9,"div",7)(10,"div",8)(11,"span"),t._UZ(12,"com",9),t.qZA()(),t.TgZ(13,"div",10)(14,"div",11)(15,"div")(16,"span"),t._UZ(17,"com",9),t.qZA(),t._uU(18,"\xa0 "),t.qZA(),t.TgZ(19,"div",12),t.SjG(20,Rl,2,1,"span",null,t.x6l),t.qZA()(),t.TgZ(22,"div",11)(23,"div")(24,"span"),t._UZ(25,"com",9),t.qZA(),t._uU(26,"\xa0 "),t.qZA(),t.TgZ(27,"div"),t.YNc(28,Fl,2,1,"span")(29,Ul,2,1,"span")(30,ql,2,1,"span"),t.qZA()()()(),t.TgZ(31,"div",13)(32,"div",8)(33,"span"),t._UZ(34,"com",9),t.qZA()(),t.TgZ(35,"div",14)(36,"ul",15),t.SjG(37,Ic,24,11,"li",18,Nl),t.qZA()()(),t.TgZ(39,"div",16)(40,"button",17),t.NdJ("click",function(){return o.hideModal.emit()}),t._UZ(41,"com",9),t.qZA()()()(),t._UZ(42,"rl-modal-footer"),t.qZA()),2&n&&(t.xp6(12),t.Q6J("key","history-panel_binder-heading"),t.xp6(5),t.Q6J("key","history-panel_binder-files"),t.xp6(3),t.wJu(o.binder.documents),t.xp6(5),t.Q6J("key","history-panel_binder-status"),t.xp6(3),t.um2(28,"IN_PREPARATION"==o.binder.status?28:-1),t.xp6(),t.um2(29,"SIGN_IN_PROGRESS"==o.binder.status?29:-1),t.xp6(),t.um2(30,"SIGN_COMPLETED"==o.binder.status?30:-1),t.xp6(4),t.Q6J("key","history-panel_events-heading"),t.xp6(3),t.wJu(o.documentEvents),t.xp6(4),t.Q6J("key","history-panel_button-close"))},dependencies:[J.w,mt.q,h.Pi,_.zS,k,U,T,_.vP,A,S,b.tH,O.$m,v.uU],styles:[".bold-600[_ngcontent-%COMP%]{font-weight:600}.bold-700[_ngcontent-%COMP%]{font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{margin:0 auto}.pull-left[_ngcontent-%COMP%]{float:left}.pull-right[_ngcontent-%COMP%]{float:right}ul.list-unstyled[_ngcontent-%COMP%]{list-style:none}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.enable-hardware-accel[_ngcontent-%COMP%]{backface-visibility:hidden;-ms-perspective:1000;perspective:1000}.secure[_ngcontent-%COMP%]{color:#519b87;font-size:12px;text-align:center;padding-bottom:20px}.interest-panel[_ngcontent-%COMP%]{background-color:#f7f7f8;margin:0 -80px 16px;padding:16px 80px 24px}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;width:100%;max-width:416px;box-sizing:border-box;margin:0 auto;padding:32px 0 0}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:24px 8px 40px}}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]{position:relative;width:100%;box-sizing:border-box}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   span.rl-icon.dispute[_ngcontent-%COMP%]{top:6px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;resize:none;outline:none!important;font-size:16px;font-family:Open Sans;background-color:#f7f7f8;font-weight:400;margin-top:8px;padding:10px;border-radius:2px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#9da0ac}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border:1px solid #e62300}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .custom-text-caption[_ngcontent-%COMP%]{font-size:12px;clear:both}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%]{font-size:10px;color:#9da0ac;position:absolute;right:5px;bottom:5px}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{float:left;display:block}.modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-message[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{width:100%;padding:0;margin-top:24px;display:flex;justify-content:space-between;flex-direction:column}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{width:100%;height:48px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]{flex-direction:row-reverse;height:48px}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child, .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]:first-child{margin-right:0;margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .bottom-buttons[_ngcontent-%COMP%]   custom-button[_ngcontent-%COMP%]{flex:0 1 50%;height:100%;margin-right:8px;margin-bottom:0}}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]{font-family:Open Sans;font-style:normal;font-weight:600;font-size:16px;line-height:20px;letter-spacing:.0125em;margin:16px 0 0}.modal-content[_ngcontent-%COMP%]   .content-heading[_ngcontent-%COMP%]:first-child{margin-top:0}.modal-content[_ngcontent-%COMP%]   .modal-content-heading[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;margin:0 0 16px}.modal-content[_ngcontent-%COMP%]   .item-ref-label[_ngcontent-%COMP%]{display:block;height:33px;margin:20px 0;line-height:33px;cursor:pointer}.modal-content[_ngcontent-%COMP%]   span.checkbox-check[_ngcontent-%COMP%]{margin-right:8px}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:18px;position:relative}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.modal-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.modal-content[_ngcontent-%COMP%]   .rl-icon.dispute[_ngcontent-%COMP%]{position:absolute;top:44px;right:12px;font-size:25px;color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{display:block;width:100%;font-size:16px;padding:15px;border:1px solid #CCD1D9!important;border-bottom:2px solid #CCD1D9!important;border-radius:2px;outline:0;box-sizing:border-box;background-color:#f7f7f8;margin-top:8px}.modal-content[_ngcontent-%COMP%]   .party-form-control.disabled[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.disabled[_ngcontent-%COMP%]{pointer-events:none}.modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .party-form-control[_ngcontent-%COMP%]:focus, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:active, .modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]:focus{background-color:#fff}.modal-content[_ngcontent-%COMP%]   .party-form-control.invalid[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.invalid[_ngcontent-%COMP%]{box-shadow:0 2px #e62300,inset 1px 1px #e62300,inset -1px 1px #e62300}.modal-content[_ngcontent-%COMP%]   .party-form-control.margin-top[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .custom-text-edit.margin-top[_ngcontent-%COMP%]{margin-top:6px}.modal-content[_ngcontent-%COMP%]   .question-text[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700}.modal-content[_ngcontent-%COMP%]   .custom-text-edit[_ngcontent-%COMP%]{resize:none;height:120px}.modal-content[_ngcontent-%COMP%]   .char-counter[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{font-size:12px;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .text-length-error[_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .over-limit.text-length-error[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   com[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .over-limit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e62300}.modal-content[_ngcontent-%COMP%]   .party-ref-label[_ngcontent-%COMP%]{display:block;height:33px;line-height:33px;cursor:pointer;max-width:calc(100% - 60px)}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]{margin-right:8px;margin-top:24px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   .doc-man-checkbox[_ngcontent-%COMP%]:before{font-size:14px;position:relative}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   com[_ngcontent-%COMP%]{font-size:16px}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.modal-content[_ngcontent-%COMP%]   .required-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:14px;display:flex;flex-direction:row;align-items:center}.modal-content.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;display:block;width:100%;margin:0 auto}.modal-content.add-new[_ngcontent-%COMP%]   .form-error[_ngcontent-%COMP%]{margin-top:0;color:#e62300;font-size:16px}@media screen and (min-width: 480px){.modal-content[_ngcontent-%COMP%]{padding:32px 0 0}}.rl-icon.document[_ngcontent-%COMP%]{padding-right:8px;font-size:22px}.btn-primary[_ngcontent-%COMP%]{width:100%!important}.history-wrapper[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]{background-color:#fff;padding:15px 8px}.history-wrapper[_ngcontent-%COMP%]:first-child, .details-wrapper[_ngcontent-%COMP%]:first-child{padding-bottom:15px}.history-wrapper[_ngcontent-%COMP%]   .binder-details[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]   .binder-details[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;word-break:break-all;color:#333;margin-bottom:10px}.history-wrapper[_ngcontent-%COMP%]   .binder-details[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]   .binder-details[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.history-wrapper[_ngcontent-%COMP%]   .binder-details[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]:first-child, .details-wrapper[_ngcontent-%COMP%]   .binder-details[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]:first-child{font-weight:600}.history-wrapper[_ngcontent-%COMP%]   .binder-details[_ngcontent-%COMP%]   .binder-files-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]   .binder-details[_ngcontent-%COMP%]   .binder-files-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.history-wrapper[_ngcontent-%COMP%]   .panel-heading[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]   .panel-heading[_ngcontent-%COMP%]{font-size:16px;color:#333;width:100%;font-weight:600;margin-bottom:10px}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0;margin:0}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#333;flex-direction:row;padding:10px 0;margin-top:0;display:flex}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child, .details-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{padding-top:0}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .event-icon[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .event-icon[_ngcontent-%COMP%]{width:80px;box-sizing:content-box;display:none;padding:0 30px 0 15px;text-align:center;height:40px;align-items:flex-end;align-content:stretch;flex-wrap:wrap;color:#04334c}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .event-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child, .details-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .event-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-size:18px;display:inline-block;width:100%}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .event-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child, .details-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .event-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-size:8px;display:inline-block;width:100%;font-weight:600;overflow-wrap:break-word}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box;padding-right:10px}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.user[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.user[_ngcontent-%COMP%]{width:25%}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.action[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.action[_ngcontent-%COMP%]{width:50%}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.description[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.description[_ngcontent-%COMP%]{width:calc(100% - 120px)}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{word-break:break-word}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.date[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.date[_ngcontent-%COMP%]{padding:0 30px 0 0}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .details-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child, .details-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:600;margin-bottom:5px}@media (min-width: 445px){.close[_ngcontent-%COMP%]{position:relative}.close[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}.close[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-width:240px}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .event-icon[_ngcontent-%COMP%]{display:flex}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.date[_ngcontent-%COMP%]{padding:0;min-width:80px}.history-wrapper[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.description[_ngcontent-%COMP%]{padding-left:15px}}"],data:{animation:[P.Ic,P.i_]}})}return i})();function Nc(i,r){1&i&&t._UZ(0,"rl-modal-header-back",2)}function Rc(i,r){1&i&&(t.TgZ(0,"span",6),t._uU(1,"payment-kyc-verify-result.verified.hero"),t.qZA())}function Fc(i,r){1&i&&(t.TgZ(0,"span",6),t._uU(1,"payment-kyc-verify-result.unverified.hero"),t.qZA())}function Uc(i,r){1&i&&(t.TgZ(0,"span",6),t._uU(1,"payment-kyc-verify-result.pending.hero"),t.qZA())}function qc(i,r){1&i&&(t.TgZ(0,"span",6),t._uU(1,"payment-kyc-verify-result.verified.main-individual"),t.qZA())}const Jc=i=>({companyName:i});function zc(i,r){if(1&i&&(t.TgZ(0,"span",11),t._uU(1,"payment-kyc-verify-result.verified.main-individual"),t.qZA()),2&i){const e=t.oxw(2);t.Q6J("translateParams",t.VKq(1,Jc,e.companyName))}}function Hc(i,r){if(1&i&&(t.TgZ(0,"p",7),t.YNc(1,qc,2,0,"span",6)(2,zc,2,3,"span",11),t.qZA()),2&i){const e=t.oxw();t.xp6(),t.um2(1,"INDIVIDUAL"===e.entityType?1:-1),t.xp6(),t.um2(2,"BUSINESS"===e.entityType?2:-1)}}function Bc(i,r){1&i&&(t.TgZ(0,"p",8),t._uU(1,"payment-kyc-verify-result.unverified.main"),t.qZA())}function Lc(i,r){1&i&&(t.TgZ(0,"p",8),t._uU(1,"payment-kyc-verify-result.pending.main"),t.qZA())}function Gc(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.next())}),t._uU(1,"payment-kyc-verify-result.verified.cta"),t.qZA()}}function Vc(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.next())}),t._uU(1,"payment-kyc-verify-result.unverified.nextCTA"),t.qZA(),t.TgZ(2,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.back())}),t._uU(3,"payment-kyc-verify-result.unverified.retryCTA"),t.qZA()}}function Qc(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.next())}),t._uU(1,"payment-kyc-verify-result.pending.cta"),t.qZA()}}let Yc=(()=>{class i{constructor(e,n){this.modalControlService=e,this.store=n,this.destroy=new w.x}ngOnInit(){this.setupStatus(),this.modalControlService.navigate$.pipe((0,C.R)(this.destroy)).subscribe(e=>{this.onNavigate(e)})}ngOnDestroy(){this.destroy.next()}back(){this.modalControlService.navigate("back")}next(){this.modalControlService.navigate("finish")}onNavigate(e){this.modalControlService.close("back"===e.data.to?c.G.UserNavigatedBack:c.G.CompletedSuccessfully)}setupStatus(){const{paymentAccount:e}=this.store.getState();this.status="INDIVIDUAL"===e.type&&e.individual.verification.status||"pending",this.companyName=e.company?.name,this.entityType=e.type}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e),t.Y36(x.y))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["rl-payment-kyc-verify-result-modal"]],decls:18,vars:10,consts:[["fakePath","kyc/result","rl-test","kyc-result",1,"rl-payment-kyc-verify-result"],["product","wallet"],["rl-modal-header-widget","left"],["rl-modal-title","","rl-typography","heading","translate",""],["rl-modal-header-widget","right"],["rl-modal-body-part","heroText","rl-typography","bold","rl-modal-description","","rl-test","kyc-result-hero-text"],["translate",""],["rl-modal-body-part","regularContent"],["rl-modal-body-part","regularContent","translate",""],["rl-modal-body-part","actionsContainer"],["class","btn btn-primary","rl-modal-body-part","primaryAction","translate",""],["translate","",3,"translateParams"],["rl-modal-body-part","primaryAction","translate","",1,"btn","btn-primary",3,"click"],["rl-modal-body-part","secondaryAction","translate","",1,"btn","btn-secondary",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"rl-modal",0)(1,"rl-modal-header-branded",1),t.YNc(2,Nc,1,0,"rl-modal-header-back",2),t.TgZ(3,"h1",3),t._uU(4,"payment-kyc-verify-result.header"),t.qZA(),t._UZ(5,"rl-modal-header-close",4),t.qZA(),t.TgZ(6,"rl-modal-body")(7,"p",5),t.YNc(8,Rc,2,0,"span",6)(9,Fc,2,0,"span",6)(10,Uc,2,0,"span",6),t.qZA(),t.YNc(11,Hc,3,2,"p",7)(12,Bc,2,0,"p",8)(13,Lc,2,0,"p",8),t.TgZ(14,"div",9),t.YNc(15,Gc,2,0,"button",10)(16,Vc,4,0)(17,Qc,2,0,"button",10),t.qZA()()()),2&n&&(t.xp6(2),t.um2(2,"unverified"===o.status?2:-1),t.xp6(6),t.um2(8,"verified"===o.status?8:-1),t.xp6(),t.um2(9,"unverified"===o.status?9:-1),t.xp6(),t.um2(10,"pending"===o.status?10:-1),t.xp6(),t.um2(11,"verified"===o.status?11:-1),t.xp6(),t.um2(12,"unverified"===o.status?12:-1),t.xp6(),t.um2(13,"pending"===o.status?13:-1),t.xp6(2),t.um2(15,"verified"===o.status?15:-1),t.xp6(),t.um2(16,"unverified"===o.status?16:-1),t.xp6(),t.um2(17,"pending"===o.status?17:-1))},dependencies:[h.Pi,q,_.zS,k,T,W,_.vP,_.Wb,A,S,b.tH,O.$m],styles:[".rl-payment-kyc-verify-result[_ngcontent-%COMP%]{text-align:center}"]})}return i})();function Wc(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"action-modal",15,16),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG("end"===o.nextModal?a.closeModal():a.onModalAction(o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function $c(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"document-editor",17),t.NdJ("onDocUpdate",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onDocUpdate())})("onBinderUpdate",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onBinderUpdate())}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("docHtml",e.docHtml)}}function Kc(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"edit-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("editModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function jc(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"edit-warning-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("advancedEditorWarningModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function Xc(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"history-panel",18),t.NdJ("hideModal",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.modalFlowService.end())})("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("historyPanel",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("numberOfDocs",null==e.documents?null:e.documents.length)("rl-modal-transition",e.modalFlowService.direction)}}function td(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"add-name-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("addNameModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function ed(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"owner-finalise-warning-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("ownerFinaliseWarningModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("@animateModalChildren",void 0)("rl-modal-transition",e.modalFlowService.direction)}}function nd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"edit-title-modal",19),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("editDocTitleModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("@animateModalChildren",void 0)("docIndex",e.editableDocIndex)("rl-modal-transition",e.modalFlowService.direction)}}function od(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"add-signer-data-modal",20),t.NdJ("showModalWithDelay",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.showModalWithDelay(o))})("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("addSignerDataModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("originalOwnerPartyReference",e.originalOwnerPartyReference)("proceedWithNextActionsOnSave",e.proceedWithNextActionsOnSave)("proceedWithEditInputOnSave",e.proceedWithEditInputOnSave)("introToUse",e.addSignerDataModalIntroText)("forceUserToAddData",e.forceUserToAddData)("rl-modal-transition",e.modalFlowService.direction)}}function id(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-invite-collaborators-connected-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("inviteCollaboratorsModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function ad(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"invite-viewers-modal",21),t.NdJ("startAction",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onModalAction(o))})("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("inviteViewersModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("binder",e.binder)("rl-modal-transition",e.modalFlowService.direction)}}function rd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"cancel-signing-modal",22),t.NdJ("onCancellationConfirmed",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onCancel())})("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("cancelSigningModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function sd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"remove-signature-modal",22),t.NdJ("onCancellationConfirmed",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onCancel())})("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("removeSignatureModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function ld(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"decline-to-sign-modal",23),t.NdJ("declineConfirmed",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onDecline())})("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("declineSigningModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("docOwnerName",e.ownerLegalName)("rl-modal-transition",e.modalFlowService.direction)}}function cd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"manage-modal",24),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("manageModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("signingFinished",e.signingComplete)("rl-modal-transition",e.modalFlowService.direction)}}function dd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"manage-viewers-modal",25),t.NdJ("startAction",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onModalAction(o))})("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("manageViewersModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function md(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"initials-modal",26),t.NdJ("signatureModalSubmitted",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.highlightNextInput())})("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.closeSigModal("initialsModal",o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("showModal",!0)("input",e.editedInput)("currentUserLegalName",e.currentUserLegalName)("rl-modal-transition",e.modalFlowService.direction)}}function gd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"signature-modal",26),t.NdJ("signatureModalSubmitted",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.highlightNextInput())})("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.closeSigModal("signatureModal",o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("showModal",!0)("input",e.editedInput)("currentUserLegalName",e.currentUserLegalName)("rl-modal-transition",e.modalFlowService.direction)}}function pd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"edit-input-modal",27),t.NdJ("editParty",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.modalFlowService.forward())})("hideModal",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.modalFlowService.end())})("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("editInputModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function ud(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"repositioning-demo-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("repositioningDemoModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function _d(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"how-it-works-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("howItWorksModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function hd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-edit-party-modal-connected",28),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("editPartyModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function Cd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-edit-party-modal-connected",29),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("editSignerModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function Md(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payment-kyc-verify-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("paymentKYCVerifyModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function fd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payment-kyc-verify-result-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("paymentKYCVerifyResultModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function yd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payment-plaid-modal",30),t.NdJ("hideModal",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("paymentPlaidModal",o.nextModal))}),t.qZA()}}function Pd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payment-ach-plaid-modal",30),t.NdJ("hideModal",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("paymentAchPlaidModal",o.nextModal))}),t.qZA()}}function xd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payment-paying-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("paymentPayerModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function bd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payment-select-role-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("paymentSelectRoleModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function Od(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payment-recipient-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("paymentPayeeModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function vd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payment-failed-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("paymentFailedModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function wd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payment-creator-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("paymentCreatorModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function Ad(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-add-signatures-selector-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("addSignaturesSelectorModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function Td(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payment-details-connected-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("paymentDetailsModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function kd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payment-status-modal-connected",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("paymentStatusModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function Sd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-ask-for-refund-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("askForRefundModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function Zd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-remove-payment-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("removePaymentModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function Ed(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payment-method-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("paymentChoosePaymentMethod",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function Id(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payment-pay-now-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("paymentPayNowModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function Dd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payment-pay-confirm-modal-connected-component",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("paymentPayConfirmModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function Nd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"rl-payout-failed",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("payoutFailedModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}function Rd(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"export-document-modal",15),t.NdJ("rl-modal-transition-onHide",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.routeModal("exportDocumentModal",o.nextModal))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("rl-modal-transition",e.modalFlowService.direction)}}class Fd{constructor(){this.modalDelayInterrupt=new w.x,this._modalShown=null}get modalShown(){return this._modalShown}cancelDelayedModals(){this.modalDelayInterrupt.next()}showModalNow(r){this.cancelDelayedModals(),this._modalShown=r}showModalLater(r,e){this.cancelDelayedModals(),(0,bn.H)(Math.max(e??0,0)).pipe((0,C.R)(this.modalDelayInterrupt)).subscribe(()=>this.showModalNow(r))}routeModal(r,e){const n=te[r][e];if(n)!function On(i){return!!i?.nextModal}(n)?this.showModalNow("string"==typeof n?n:null):(this.showModalNow(null),this.showModalLater(n.nextModal,n.delay));else{const o=Object.keys(te[r]);console?.warn(`Tried to route from "${r}" to "${e}". ${o.length>0?`Expected "${e}" to be one of ["${o.join('", "')}"].`:`"${r} has no routes defined.`}`),this.showModalNow(null)}}}let Ud=(()=>{class i{constructor(e,n,o,a,s,l,d,p){this.modalControlService=e,this.modalFlowService=n,this.signService=o,this.alertService=a,this.store=s,this.searchParams=l,this.docPreviewService=d,this.featureFlagService=p,this.subscriptions=[],this.onRouteChange=new t.vpe,this.modalRouteingHelper=new Fd,this.sessionStorage=(0,bt.h)({storage:sessionStorage,ignoreStorageErrors:!0}),this.localStorage=(0,bt.h)({storage:localStorage,ignoreStorageErrors:!1}),this.setupComponent(this.store.getState());const M=this.store.subscribe(y=>{this.setupComponent(y)});this.binder&&(this.originalOwnerPartyReference=this.binder.parties.find(y=>(0,m.jn)(y,"OWNER")).reference,this.checkStartingActionModal(),this.subscriptions.push(M),this.destroy=new w.x,this.downloadDocHtml())}setupComponent(e){this.binder=e.binder,this.binder&&(this.signerDataIsMissing=this.binder.parties.some(n=>!n.legalName||!n.email),this.documentEditorModeEnabled=e.get("documentEditorModeEnabled"),this.documents=this.binder.documents,this.signatureBuilderModeEnabled=e.signatureBuilderModeEnabled,this.advancedEditorIsEnabled=e.get("advancedEditorOptionEnabled"),this.backToInterviewIsEnabled=e.get("backToInterviewOptionEnabled"),this.inputs=(0,m.sG)(e),this.currentUser=(0,m.kT)(e),this.currentUserLegalName=this.currentUser?this.currentUser.legalName:"",this.ownerLegalName=(0,m.oJ)(this.binder,"OWNER").legalName,this.signingComplete="SIGN_COMPLETED"===this.binder.status)}downloadDocHtml(){"text/html"==this.binder.documents[0].contentType&&this.signService.fetchHtmlDocument(this.binder.id,this.binder.documents[0].id).subscribe(e=>{this.docHtml=e})}onDocUpdate(){this.downloadDocHtml(),this.store.dispatch((0,H.Hj)(!1))}ngOnDestroy(){this.subscriptions.forEach(e=>e()),this.destroy.next()}get modalShown(){return this.modalRouteingHelper.modalShown}onBinderUpdate(){this.store.dispatch((0,H.cD)(!1)),0!==this.inputs.filter(e=>"ABSOLUTE"===e.position.type).length&&this.store.dispatch((0,H.BA)(!0))}onDecline(){this.store.dispatch((0,H.MI)(!1))}onCancel(){this.store.dispatch((0,H.MI)(!1))}onModalAction(e){switch(e){case f.InviteCollaborators:this.showModal("inviteCollaboratorsModal");break;case f.InviteViewers:this.showModal("inviteViewersModal");break;case f.SignNowOwner:this.closeModal(),this.startSigning(),this.highlightNextInput();break;case f.Cancel:this.showModal("cancelSigningModal");break;case f.RemoveSignature:this.showModal("removeSignatureModal");break;case f.Decline:this.showModal("declineSigningModal");break;case f.ChangeTitle:this.showModal("editDocTitleModal");break;case f.ShowHistory:this.showModal("historyPanel");break;case f.SignNow:this.closeModal(),this.signNow();break;case f.Manage:this.showModal("manageModal");break;case f.ManageViewers:this.showModal("manageViewersModal");break;case f.GetSignature:this.editSignatures();break;case f.ShowFinaliseWarning:this.showModal("ownerFinaliseWarningModal");break;case f.ShowPaymentCreatorModal:this.showModal("paymentCreatorModal");break;case f.ShowPaymentPayerModal:this.showModal("paymentPayerModal");break;case f.ShowPaymentStatusModal:this.showModal("paymentStatusModal");break;case f.ShowPaymentSelectRoleModal:this.showModal("paymentSelectRoleModal");break;case f.ShowPaymentPayNow:this.showModal("paymentPayNowModal");break;case f.PayChoosePaymentMethod:this.showModal("paymentChoosePaymentMethod");break;case f.ShowKYCVerify:this.showModal("paymentKYCVerifyModal");break;case f.Edit:this.showModal("editModal");break;case f.StartDocumentEdit:this.startDocEdit();break;case f.AddSignerDataModal:this.closeModal(),this.proceedWithNextActionsOnSave=!0,this.addSignerDataModalIntroText="standard",this.proceedWithEditInputOnSave=!1,this.docPreviewService.highlightInputs(),this.docPreviewService.highlightConfirmed$.subscribe(()=>{this.showModal("addSignerDataModal")});break;case f.ExportDocument:this.showModal("exportDocumentModal");break;case f.AddAnotherSigner:this.proceedWithNextActionsOnSave=!1,this.proceedWithEditInputOnSave=!1,this.forceUserToAddData=!0,this.addSignerDataModalIntroText="addAnotherSigner",this.store.dispatch((0,H.KI)(!0)),this.showModal("addSignerDataModal");break;case f.ShowPlaid:this.showModal("paymentPlaidModal")}}startSigning(){this.store.dispatch((0,H.MI)(!0))}signNow(){this.store.dispatch((0,H.MI)(!0)),this.highlightNextInput()}editSignatures(){const e=this.sessionStorage.rlShownHowItWorks;this.sessionStorage.rlShownHowItWorks="true",e?this.closeModal():this.showModal("howItWorksModal")}startDocEdit(){this.advancedEditorIsEnabled&&this.backToInterviewIsEnabled?this.showModal("editModal"):(this.closeModal(),this.store.dispatch((0,H.cD)(!0)))}highlightNextInput(){setTimeout(()=>{this.docPreviewService.highlightNextInput()},800)}checkStartingActionModal(){if(!this.ownerLegalName||0==this.ownerLegalName.trim().length||this.modalShown||this.signatureBuilderModeEnabled)return;if(this.searchParams.has("plaid_redirect_uri")&&this.localStorage.plaidRedirectLinkToken){const a=this.localStorage.plaidRedirectRoute;if("payment/payByBank"===a)return this.showModal("paymentAchPlaidModal");if("payment/bankPayout"===a)return this.showModal("paymentPlaidModal");delete this.localStorage.plaidRedirectRoute,delete this.localStorage.plaidRedirectLinkToken}const e=this.store.getState();if(function Tn(i){const r=i.paymentAgreement;if(!r||"collected"!==r.status||!ee(i))return!1;const e=i.paymentAccount;return!(!e||!e.bankName||e.payoutsEnabled)}(e))return this.showModal("payoutFailedModal");if(ne(e))return this.showModal("optional"===e.paymentAgreement.status?"paymentCreatorModal":"paymentStatusModal");const n="setupAPayment"===this.searchParams.get("source"),o=this.featureFlagService.flags.variable_fee_enabled;return this.showModal(!n||e.paymentAgreement||o?n&&!e.paymentAgreement&&o?"paymentCreatorModal":"actionModal":"paymentSelectRoleModal")}closeSigModal(e,n){this.openSigningModal(!1),this.routeModal(e,n.nextModal)}openSigningModal(e){this.store.dispatch((0,H.MI)(!0)),e&&"INITIALS"==e.type||(e&&"SIGNATURE_TEXT"==e.type?this.showModal("signatureModal"):this.closeModal()),this.editedInput=e||null}isModalActive(){return null!=this.modalShown}closeModal(){this.modalRouteingHelper.showModalNow(null),this.modalFlowService.end()}showModal(e){this.modalRouteingHelper.showModalNow(null!=e?e:null)}showModalWithDelay(e){this.modalRouteingHelper.showModalLater(e,3e3)}routeModal(e,n){return this.modalRouteingHelper.routeModal(e,n)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(c.e),t.Y36(It.D),t.Y36(F.f),t.Y36(R.c),t.Y36(x.y),t.Y36(lt.l),t.Y36(kn.g),t.Y36(ut.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-modals"]],inputs:{config:"config",editedInput:"editedInput"},outputs:{onRouteChange:"onRouteChange"},decls:42,vars:42,consts:[[3,"rl-modal-transition","rl-modal-transition-onHide",4,"ngIf"],[3,"docHtml","onDocUpdate","onBinderUpdate",4,"ngIf"],[3,"numberOfDocs","rl-modal-transition","hideModal","rl-modal-transition-onHide",4,"ngIf"],[3,"docIndex","rl-modal-transition","rl-modal-transition-onHide",4,"ngIf"],[3,"originalOwnerPartyReference","proceedWithNextActionsOnSave","proceedWithEditInputOnSave","introToUse","forceUserToAddData","rl-modal-transition","showModalWithDelay","rl-modal-transition-onHide",4,"ngIf"],[3,"binder","rl-modal-transition","startAction","rl-modal-transition-onHide",4,"ngIf"],[3,"rl-modal-transition","onCancellationConfirmed","rl-modal-transition-onHide",4,"ngIf"],[3,"docOwnerName","rl-modal-transition","declineConfirmed","rl-modal-transition-onHide",4,"ngIf"],[3,"signingFinished","rl-modal-transition","rl-modal-transition-onHide",4,"ngIf"],[3,"rl-modal-transition","startAction","rl-modal-transition-onHide",4,"ngIf"],[3,"showModal","input","currentUserLegalName","rl-modal-transition","signatureModalSubmitted","rl-modal-transition-onHide",4,"ngIf"],[3,"rl-modal-transition","editParty","hideModal","rl-modal-transition-onHide",4,"ngIf"],["language","edit-party-modal",3,"rl-modal-transition","rl-modal-transition-onHide",4,"ngIf"],["language","edit-party-modal-signers",3,"rl-modal-transition","rl-modal-transition-onHide",4,"ngIf"],[3,"hideModal",4,"ngIf"],[3,"rl-modal-transition","rl-modal-transition-onHide"],["actionModal",""],[3,"docHtml","onDocUpdate","onBinderUpdate"],[3,"numberOfDocs","rl-modal-transition","hideModal","rl-modal-transition-onHide"],[3,"docIndex","rl-modal-transition","rl-modal-transition-onHide"],[3,"originalOwnerPartyReference","proceedWithNextActionsOnSave","proceedWithEditInputOnSave","introToUse","forceUserToAddData","rl-modal-transition","showModalWithDelay","rl-modal-transition-onHide"],[3,"binder","rl-modal-transition","startAction","rl-modal-transition-onHide"],[3,"rl-modal-transition","onCancellationConfirmed","rl-modal-transition-onHide"],[3,"docOwnerName","rl-modal-transition","declineConfirmed","rl-modal-transition-onHide"],[3,"signingFinished","rl-modal-transition","rl-modal-transition-onHide"],[3,"rl-modal-transition","startAction","rl-modal-transition-onHide"],[3,"showModal","input","currentUserLegalName","rl-modal-transition","signatureModalSubmitted","rl-modal-transition-onHide"],[3,"rl-modal-transition","editParty","hideModal","rl-modal-transition-onHide"],["language","edit-party-modal",3,"rl-modal-transition","rl-modal-transition-onHide"],["language","edit-party-modal-signers",3,"rl-modal-transition","rl-modal-transition-onHide"],[3,"hideModal"]],template:function(n,o){1&n&&t.YNc(0,Wc,2,1,"action-modal",0)(1,$c,1,1,"document-editor",1)(2,Kc,1,1,"edit-modal",0)(3,jc,1,1,"edit-warning-modal",0)(4,Xc,1,2,"history-panel",2)(5,td,1,1,"add-name-modal",0)(6,ed,1,2,"owner-finalise-warning-modal",0)(7,nd,1,3,"edit-title-modal",3)(8,od,1,6,"add-signer-data-modal",4)(9,id,1,1,"rl-invite-collaborators-connected-modal",0)(10,ad,1,2,"invite-viewers-modal",5)(11,rd,1,1,"cancel-signing-modal",6)(12,sd,1,1,"remove-signature-modal",6)(13,ld,1,2,"decline-to-sign-modal",7)(14,cd,1,2,"manage-modal",8)(15,dd,1,1,"manage-viewers-modal",9)(16,md,1,4,"initials-modal",10)(17,gd,1,4,"signature-modal",10)(18,pd,1,1,"edit-input-modal",11)(19,ud,1,1,"repositioning-demo-modal",0)(20,_d,1,1,"how-it-works-modal",0)(21,hd,1,1,"rl-edit-party-modal-connected",12)(22,Cd,1,1,"rl-edit-party-modal-connected",13)(23,Md,1,1,"rl-payment-kyc-verify-modal",0)(24,fd,1,1,"rl-payment-kyc-verify-result-modal",0)(25,yd,1,0,"rl-payment-plaid-modal",14)(26,Pd,1,0,"rl-payment-ach-plaid-modal",14)(27,xd,1,1,"rl-payment-paying-modal",0)(28,bd,1,1,"rl-payment-select-role-modal",0)(29,Od,1,1,"rl-payment-recipient-modal",0)(30,vd,1,1,"rl-payment-failed-modal",0)(31,wd,1,1,"rl-payment-creator-modal",0)(32,Ad,1,1,"rl-add-signatures-selector-modal",0)(33,Td,1,1,"rl-payment-details-connected-modal",0)(34,kd,1,1,"rl-payment-status-modal-connected",0)(35,Sd,1,1,"rl-ask-for-refund-modal",0)(36,Zd,1,1,"rl-remove-payment-modal",0)(37,Ed,1,1,"rl-payment-method-modal",0)(38,Id,1,1,"rl-payment-pay-now-modal",0)(39,Dd,1,1,"rl-payment-pay-confirm-modal-connected-component",0)(40,Nd,1,1,"rl-payout-failed",0)(41,Rd,1,1,"export-document-modal",0),2&n&&(t.Q6J("ngIf","actionModal"==o.modalShown),t.xp6(),t.Q6J("ngIf",o.documentEditorModeEnabled&&o.docHtml),t.xp6(),t.Q6J("ngIf","editModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","advancedEditorWarningModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","historyPanel"==o.modalShown),t.xp6(),t.Q6J("ngIf","addNameModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","ownerFinaliseWarningModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","editDocTitleModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","addSignerDataModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","inviteCollaboratorsModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","inviteViewersModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","cancelSigningModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","removeSignatureModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","declineSigningModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","manageModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","manageViewersModal"==o.modalShown),t.xp6(),t.Q6J("ngIf",o.editedInput&&"INITIALS"==o.editedInput.type),t.xp6(),t.Q6J("ngIf",o.editedInput&&"SIGNATURE_TEXT"==o.editedInput.type),t.xp6(),t.Q6J("ngIf","editInputModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","repositioningDemoModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","howItWorksModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","editPartyModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","editSignerModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","paymentKYCVerifyModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","paymentKYCVerifyResultModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","paymentPlaidModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","paymentAchPlaidModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","paymentPayerModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","paymentSelectRoleModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","paymentPayeeModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","paymentFailedModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","paymentCreatorModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","addSignaturesSelectorModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","paymentDetailsModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","paymentStatusModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","askForRefundModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","removePaymentModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","paymentChoosePaymentMethod"===o.modalShown),t.xp6(),t.Q6J("ngIf","paymentPayNowModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","paymentPayConfirmModal"===o.modalShown),t.xp6(),t.Q6J("ngIf","payoutFailedModal"==o.modalShown),t.xp6(),t.Q6J("ngIf","exportDocumentModal"===o.modalShown))},dependencies:[v.O5,It.p,$o,Ce,gi,Pe,yi,Zi,Fi,pa,wa,Ba,mr,ur,_r,Mr,Ur,zr,Wr,Xr,os,is,cs,He,gs,hs,ys,vs,Ts,ks,Ss,Xs,ll,ml,hl,fi,Ml,fl,Sl,Il,Dl,Dc,Yc],encapsulation:2,data:{animation:[P.O4,P.Pc,_.K4]}})}return i})(),qd=(()=>{class i{static#t=this.components={dynamicComponent:Ud};static#e=this.\u0275fac=function(n){return new(n||i)};static#n=this.\u0275mod=t.oAB({type:i});static#o=this.\u0275inj=t.cJS({providers:[It.D,F.f],imports:[v.ez,on.j,Kt.d,g.u5,g.UX,Kt.d,h.aw,nn.G,an.g,rn.Z,sn.I,Mn.O,tn,Cn,fn.z,yn.i,Pn,xn.R,en._7,Xt.w]})}return i})()}}]);
//# sourceMappingURL=src_app_modules_sign-app_app-modals_app-modals_module_ts.813e221183cb3a8b.js.map