import{r as e,c as t,h as a,H as i}from"./p-8d6e32e8.js";import{s as r}from"./p-48fe7822.js";import"./p-caddc234.js";const o={dragAndDrop:{inactiveLabel:"Drag and drop or",activeLabel:"Drop your file here to upload",supportedFormats:"PDF or DOCX format.",maxFileSize:"Max file size: {{size}}MB"},button:{label:"Add document",loading:"Uploading"}};var n;const s=class{constructor(a){e(this,a),this.success=t(this,"success",7),this.error=t(this,"error",7),this.validationFailed=t(this,"validationFailed",7),this.maxFilesize=5,this.httpMethod="PUT",this.contentType="application/pdf",this.formFieldName="document",this.customHeaders=[],this.activeClassname=null,this.progress=0,this.requestInFlight=!1,n.set(this,void 0)}validateFiles(e){if(1!==e.length)return this.validationFailed.emit("NUMBER_OF_FILES_EXCEEDED"),!1;const t=this.normalizeDraggedItem(e[0]),a=t.size/1048576;return this.validateFileType(t.type)?(this.validationFailed.emit("FILE_TYPE_INCORRECT"),!1):!(a>this.maxFilesize&&(this.validationFailed.emit("FILE_SIZE_EXCEEDED"),1))}validateFileType(e){return""==e||-1===this.contentType.indexOf(e)}onInputChange(e){this.validateFiles(e)&&this.uploadFile(e[0])}dropHandler(e){var t;e.preventDefault(),this.activeClassname="";const a=(null===(t=e.dataTransfer)||void 0===t?void 0:t.items)||e.dataTransfer.files;this.validateFiles(a)&&this.uploadFile(a[0])}uploadFile(e){this.requestInFlight=!0;const t=new FormData;t.append(this.formFieldName,this.normalizeDraggedItem(e));const a=new XMLHttpRequest;a.addEventListener("load",(()=>{200===a.status?this.success.emit(a.response):(this.error.emit({status:a.status,statusText:a.statusText}),this.requestInFlight=!1)})),a.addEventListener("error",(()=>{this.error.emit({status:a.status,statusText:a.statusText}),this.requestInFlight=!1})),a.upload.addEventListener("progress",(t=>{const a=t.loaded/e.size*100;this.progress=a<100?a:100})),a.open(this.httpMethod,this.url),0!==this.customHeaders.length&&this.customHeaders.forEach((e=>{a.setRequestHeader(e.key,e.value)})),a.send(t)}async componentWillLoad(){!function(e,t,a){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");t.set(e,a)}(this,n,await r("rlFileUpload",o))}render(){var e;const{I18n:t}=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(this,n);return a(i,{onDragEnter:e=>this.dragEnterHandler(e),onDrop:e=>this.dropHandler(e),onDragOver:e=>s.dragOverHandler(e),onDragLeave:e=>this.dragLeaveHandler(e)},a("div",{class:`drag-zone ${null!==(e=this.activeClassname)&&void 0!==e?e:""} ${this.requestInFlight?"hide":""}`},a("rl-icon",{class:"upload-icon",slot:"icon",name:"upload"}),a("p",{class:"header-text hidden-on-active"},a(t,{label:"dragAndDrop.inactiveLabel"})),a("p",{class:"header-text shown-on-active"},a(t,{label:"dragAndDrop.activeLabel"})),a("label",{class:"hidden-on-active",htmlFor:"file-upload-input"},a("rl-button",{variant:"secondary"},a("span",null,a(t,{label:"button.label"}))),a("input",{onChange:e=>this.onInputChange(e.target.files),id:"file-upload-input",type:"file",accept:this.contentType})),a("p",{class:"footer-text"},a(t,{label:"dragAndDrop.supportedFormats"}),"Â ",a(t,{label:"dragAndDrop.maxFileSize",options:{size:this.maxFilesize}}))),a("div",{class:"progress-wrapper "+(this.requestInFlight?"show":"")},a("div",{style:{width:`${this.progress}%`},class:"progress"}),a("p",null,a(t,{label:"button.loading"}))))}dragEnterHandler(e){e.preventDefault(),this.activeClassname="active"}static dragOverHandler(e){e.preventDefault()}dragLeaveHandler(e){e.preventDefault(),this.activeClassname=null}isFile(e){return e instanceof File}normalizeDraggedItem(e){return this.isFile(e)?e:e.getAsFile()}};n=new WeakMap,s.style=':host([brand=default]){--rl-base-font-size:16px;--rl-font-family:"Open Sans"}:host{font-size:var(--rl-base-font-size, 16px)}.drag-zone{font-family:var(--rl-font-family, "Open Sans");font-size:18px;font-weight:400;line-height:1.5em;color:var(--rl-text-body-secondary);padding:80px 30px;text-align:center;border-radius:5px;box-sizing:border-box}.drag-zone.hide{display:none}.drag-zone .header-text,.drag-zone .upload-icon{display:none}.drag-zone rl-button{width:248px}@media screen and (min-width: 768px){.drag-zone{border:3px dashed var(--rl-border-subtle)}.drag-zone.active{border-color:var(--rl-action-primary-default);color:var(--rl-action-primary-default)}.drag-zone.active label{display:none}.drag-zone.active .hidden-on-active{display:none}.drag-zone.active .shown-on-active{display:block}.drag-zone .header-text,.drag-zone .upload-icon{display:block}.drag-zone .header-text{margin:16px 0;font-size:16px;font-weight:700}.drag-zone .upload-icon{margin:0 auto}.drag-zone .hidden-on-active{display:block}.drag-zone .shown-on-active{display:none}}.upload-icon{height:40px;width:40px;background-size:contain}.footer-text{text-align:center;margin:8px 0 0;font-size:12px}#file-upload-input{display:none}.progress-wrapper{display:none;width:100%;padding:1px;border:1px solid var(--rl-action-primary-default);box-sizing:border-box;height:30px;margin-top:20px}.progress-wrapper .progress{height:100%;background-color:var(--rl-action-primary-default);box-sizing:border-box;transition:width 0.3s}.progress-wrapper p{text-align:center;margin:20px 0;color:var(--rl-text-body-secondary);font-size:14px}.progress-wrapper.show{display:block}';export{s as rl_file_upload};